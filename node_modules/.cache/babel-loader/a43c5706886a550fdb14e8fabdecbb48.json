{"ast":null,"code":"module.exports = function (Chart) {\n  var chartHelpers = Chart.helpers;\n\n  var helpers = require('./helpers.js')(Chart);\n\n  function collapseHoverEvents(events) {\n    var hover = false;\n    var filteredEvents = events.filter(function (eventName) {\n      switch (eventName) {\n        case 'mouseenter':\n        case 'mouseover':\n        case 'mouseout':\n        case 'mouseleave':\n          hover = true;\n          return false;\n\n        default:\n          return true;\n      }\n    });\n\n    if (hover && filteredEvents.indexOf('mousemove') === -1) {\n      filteredEvents.push('mousemove');\n    }\n\n    return filteredEvents;\n  }\n\n  function dispatcher(e) {\n    var ns = this.annotation;\n    var elements = helpers.elements(this);\n    var position = chartHelpers.getRelativePosition(e, this.chart);\n    var element = helpers.getNearestItems(elements, position);\n    var events = collapseHoverEvents(ns.options.events);\n    var dblClickSpeed = ns.options.dblClickSpeed;\n    var eventHandlers = [];\n    var eventHandlerName = helpers.getEventHandlerName(e.type);\n    var options = (element || {}).options; // Detect hover events\n\n    if (e.type === 'mousemove') {\n      if (element && !element.hovering) {\n        // hover started\n        ['mouseenter', 'mouseover'].forEach(function (eventName) {\n          var eventHandlerName = helpers.getEventHandlerName(eventName);\n          var hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n\n          element.hovering = true;\n\n          if (typeof options[eventHandlerName] === 'function') {\n            eventHandlers.push([options[eventHandlerName], hoverEvent, element]);\n          }\n        });\n      } else if (!element) {\n        // hover ended\n        elements.forEach(function (element) {\n          if (element.hovering) {\n            element.hovering = false;\n            var options = element.options;\n            ['mouseout', 'mouseleave'].forEach(function (eventName) {\n              var eventHandlerName = helpers.getEventHandlerName(eventName);\n              var hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n\n              if (typeof options[eventHandlerName] === 'function') {\n                eventHandlers.push([options[eventHandlerName], hoverEvent, element]);\n              }\n            });\n          }\n        });\n      }\n    } // Suppress duplicate click events during a double click\n    // 1. click -> 2. click -> 3. dblclick\n    //\n    // 1: wait dblClickSpeed ms, then fire click\n    // 2: cancel (1) if it is waiting then wait dblClickSpeed ms then fire click, else fire click immediately\n    // 3: cancel (1) or (2) if waiting, then fire dblclick \n\n\n    if (element && events.indexOf('dblclick') > -1 && typeof options.onDblclick === 'function') {\n      if (e.type === 'click' && typeof options.onClick === 'function') {\n        clearTimeout(element.clickTimeout);\n        element.clickTimeout = setTimeout(function () {\n          delete element.clickTimeout;\n          options.onClick.call(element, e);\n        }, dblClickSpeed);\n        e.stopImmediatePropagation();\n        e.preventDefault();\n        return;\n      } else if (e.type === 'dblclick' && element.clickTimeout) {\n        clearTimeout(element.clickTimeout);\n        delete element.clickTimeout;\n      }\n    } // Dispatch the event to the usual handler, but only if we haven't substituted it\n\n\n    if (element && typeof options[eventHandlerName] === 'function' && eventHandlers.length === 0) {\n      eventHandlers.push([options[eventHandlerName], e, element]);\n    }\n\n    if (eventHandlers.length > 0) {\n      e.stopImmediatePropagation();\n      e.preventDefault();\n      eventHandlers.forEach(function (eventHandler) {\n        // [handler, event, element]\n        eventHandler[0].call(eventHandler[2], eventHandler[1]);\n      });\n    }\n  }\n\n  return {\n    dispatcher: dispatcher,\n    collapseHoverEvents: collapseHoverEvents\n  };\n};","map":{"version":3,"sources":["/Users/james/Documents/CODE/GREENKODE_DASHBOARD/greenkode-dashboard/frontend/greenkode/node_modules/chartjs-plugin-annotation/src/events.js"],"names":["module","exports","Chart","chartHelpers","helpers","require","collapseHoverEvents","events","hover","filteredEvents","filter","eventName","indexOf","push","dispatcher","e","ns","annotation","elements","position","getRelativePosition","chart","element","getNearestItems","options","dblClickSpeed","eventHandlers","eventHandlerName","getEventHandlerName","type","hovering","forEach","hoverEvent","createMouseEvent","onDblclick","onClick","clearTimeout","clickTimeout","setTimeout","call","stopImmediatePropagation","preventDefault","length","eventHandler"],"mappings":"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","sourcesContent":["module.exports = function(Chart) {\n\tvar chartHelpers = Chart.helpers;\n\tvar helpers = require('./helpers.js')(Chart);\n\n\tfunction collapseHoverEvents(events) {\n\t\tvar hover = false;\n\t\tvar filteredEvents = events.filter(function(eventName) {\n\t\t\tswitch (eventName) {\n\t\t\t\tcase 'mouseenter':\n\t\t\t\tcase 'mouseover':\n\t\t\t\tcase 'mouseout':\n\t\t\t\tcase 'mouseleave':\n\t\t\t\t\thover = true;\n\t\t\t\t\treturn false;\n\n\t\t\t\tdefault:\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\tif (hover && filteredEvents.indexOf('mousemove') === -1) {\n\t\t\tfilteredEvents.push('mousemove');\n\t\t}\n\t\treturn filteredEvents;\n\t}\n\n\tfunction dispatcher(e) {\n\t\tvar ns = this.annotation;\n\t\tvar elements = helpers.elements(this);\n\t\tvar position = chartHelpers.getRelativePosition(e, this.chart);\n\t\tvar element = helpers.getNearestItems(elements, position);\n\t\tvar events = collapseHoverEvents(ns.options.events);\n\t\tvar dblClickSpeed = ns.options.dblClickSpeed;\n\t\tvar eventHandlers = [];\n\t\tvar eventHandlerName = helpers.getEventHandlerName(e.type);\n\t\tvar options = (element || {}).options;\n\n\t\t// Detect hover events\n\t\tif (e.type === 'mousemove') {\n\t\t\tif (element && !element.hovering) {\n\t\t\t\t// hover started\n\t\t\t\t['mouseenter', 'mouseover'].forEach(function(eventName) {\n\t\t\t\t\tvar eventHandlerName = helpers.getEventHandlerName(eventName);\n\t\t\t\t\tvar hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n\t\t\t\t\telement.hovering = true;\n\t\t\t\t\tif (typeof options[eventHandlerName] === 'function') {\n\t\t\t\t\t\teventHandlers.push([ options[eventHandlerName], hoverEvent, element ]);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else if (!element) {\n\t\t\t\t// hover ended\n\t\t\t\telements.forEach(function(element) {\n\t\t\t\t\tif (element.hovering) {\n\t\t\t\t\t\telement.hovering = false;\n\t\t\t\t\t\tvar options = element.options;\n\t\t\t\t\t\t['mouseout', 'mouseleave'].forEach(function(eventName) {\n\t\t\t\t\t\t\tvar eventHandlerName = helpers.getEventHandlerName(eventName);\n\t\t\t\t\t\t\tvar hoverEvent = helpers.createMouseEvent(eventName, e); // recreate the event to match the handler\n\t\t\t\t\t\t\tif (typeof options[eventHandlerName] === 'function') {\n\t\t\t\t\t\t\t\teventHandlers.push([ options[eventHandlerName], hoverEvent, element ]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t// Suppress duplicate click events during a double click\n\t\t// 1. click -> 2. click -> 3. dblclick\n\t\t//\n\t\t// 1: wait dblClickSpeed ms, then fire click\n\t\t// 2: cancel (1) if it is waiting then wait dblClickSpeed ms then fire click, else fire click immediately\n\t\t// 3: cancel (1) or (2) if waiting, then fire dblclick \n\t\tif (element && events.indexOf('dblclick') > -1 && typeof options.onDblclick === 'function') {\n\t\t\tif (e.type === 'click' && typeof options.onClick === 'function') {\n\t\t\t\tclearTimeout(element.clickTimeout);\n\t\t\t\telement.clickTimeout = setTimeout(function() {\n\t\t\t\t\tdelete element.clickTimeout;\n\t\t\t\t\toptions.onClick.call(element, e);\n\t\t\t\t}, dblClickSpeed);\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else if (e.type === 'dblclick' && element.clickTimeout) {\n\t\t\t\tclearTimeout(element.clickTimeout);\n\t\t\t\tdelete element.clickTimeout;\n\t\t\t}\n\t\t}\n\n\t\t// Dispatch the event to the usual handler, but only if we haven't substituted it\n\t\tif (element && typeof options[eventHandlerName] === 'function' && eventHandlers.length === 0) {\n\t\t\teventHandlers.push([ options[eventHandlerName], e, element ]);\n\t\t}\n\n\t\tif (eventHandlers.length > 0) {\n\t\t\te.stopImmediatePropagation();\n\t\t\te.preventDefault();\n\t\t\teventHandlers.forEach(function(eventHandler) {\n\t\t\t\t// [handler, event, element]\n\t\t\t\teventHandler[0].call(eventHandler[2], eventHandler[1]);\n\t\t\t});\n\t\t}\n\t}\n\n\treturn {\n\t\tdispatcher: dispatcher,\n\t\tcollapseHoverEvents: collapseHoverEvents\n\t};\n};\n"]},"metadata":{},"sourceType":"script"}