{"ast":null,"code":"var _jsxFileName = \"/Users/james/Documents/CODE/GREENKODE_DASHBOARD/greenkode-dashboard/frontend/greenkode/src/shared/components/containers/auth/login.js\";\nimport React, { useState } from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport { Link } from \"react-router-dom\";\nimport Footer from \"../../navigation/footer\";\nimport useSpinner from \"../../libs/use-spinner\";\nconst initialFormState = {\n  username: '',\n  password: '',\n  email: '',\n  authCode: '',\n  formType: 'signIn'\n};\nexport default function Login(props) {\n  const [formState, updateFormState] = useState(initialFormState);\n\n  function onChange(e) {\n    e.persist();\n    updateFormState(() => ({ ...formState,\n      [e.target.name]: e.target.value\n    }));\n  }\n\n  const {\n    formType\n  } = formState;\n  const [errorMessage, setErrorMessage] = useState(false);\n  const [spinner, showSpinner, hideSpinner] = useSpinner();\n\n  async function signIn() {\n    const {\n      username,\n      password\n    } = formState;\n    showSpinner();\n\n    try {\n      const result = await Auth.signIn(username, password);\n\n      if (result) {\n        hideSpinner();\n        console.log(\"Auth\", Auth);\n        const usersEmail = Auth.user.attributes.email;\n        const companyName = Auth.user.attributes[\"custom:company\"];\n        const companyId = Auth.user.attributes[\"custom:companyId\"];\n        const userGroups = Auth.user.signInUserSession.accessToken.payload[\"cognito:groups\"];\n        const name = Auth.user.attributes[\"name\"]; // const noOfUsers = Auth.user.attributes[\"custom:NumberOfUsersCreated\"] ? Auth.user.attributes[\"custom:NumberOfUsersCreated\"]: 6;\n\n        const noOfUsers = Auth.user.attributes[\"custom:NumberOfUsersSix\"] ? Auth.user.attributes[\"custom:NumberOfUsersSix\"] : 6;\n        const checkIfUserHasPermissionToAccessDashboard = userGroups.filter(data => {\n          return data === \"admin\" || data === \"greenkodeUser\" || data === \"superAdmin\" || data === \"user\";\n        });\n        const greenkodeUser = userGroups.find(element => element === \"greenkodeUser\");\n        const admin = userGroups.find(element => element === \"admin\");\n        const superAdmin = userGroups.find(element => element === \"superAdmin\");\n        const user = userGroups.find(element => element === \"user\");\n        const typeOfUser = greenkodeUser ? greenkodeUser : superAdmin ? superAdmin : admin ? admin : user ? user : user;\n\n        if (typeOfUser === \"superAdmin\" || typeOfUser === \"admin\" || typeOfUser === \"user\") {\n          if (companyName !== undefined) {\n            if (checkIfUserHasPermissionToAccessDashboard.length === 0) {\n              await Auth.signOut();\n            } else {\n              const userDetails = {\n                companyname: companyName,\n                email: usersEmail,\n                fullName: name,\n                typeOfUser: typeOfUser\n              };\n              props.saveUserType(typeOfUser);\n              props.getUserDetails(userDetails);\n              props.getNoOfUsersCreated(noOfUsers);\n              props.userHasAuthenticated(true);\n              props.getAllData(companyName, usersEmail, userDetails, companyId); // props.getAllData(companyName, userDetails);\n            }\n          }\n        } else {\n          props.userHasAuthenticated(true);\n          props.saveUserType(typeOfUser);\n        }\n      }\n    } catch (e) {\n      console.log(\"e\", e);\n      let message;\n\n      if (e.code === \"UserNotConfirmedException\" || e.code === \"NotAuthorizedException\") {\n        message = e.message;\n      } else {\n        message = \"An error occurred while logging in, please re-enter again\";\n      }\n\n      setErrorMessage(message);\n      hideSpinner();\n    }\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, spinner, formType === 'signIn' && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    controlid: \"email\",\n    bssize: \"large\",\n    className: \"login__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__email--colorAndSpacing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 19\n    }\n  }, \"Email\")), \" \", /*#__PURE__*/React.createElement(\"input\", {\n    name: \"username\",\n    onChange: onChange,\n    placeholder: \"username\",\n    className: \"login__emailInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    controlid: \"password\",\n    bssize: \"large\",\n    className: \"login__wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__password--colorAndSpacing\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 19\n    }\n  }, \"Password\")), \" \", /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    onChange: onChange,\n    placeholder: \"password\",\n    className: \"login__passwordInput\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: signIn,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, \"Sign in\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__links\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    className: \"login__linksForgotpassword\",\n    to: \"forgotpassword\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 17\n    }\n  }, \"Forgot Password\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"warning-message\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, errorMessage)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login__heading--size\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  }, \"\\\"The Hospitality \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 34\n    }\n  }), \"sector can make a \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 35\n    }\n  }), \" profit of \\xA37 for every \", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 65\n    }\n  }), \" \\xA31 they invest in\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 17\n    }\n  }), \" cutting food waste, a\", /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 45\n    }\n  }), \" global report reveals\\\"\", /*#__PURE__*/React.createElement(\"p\", {\n    className: \"login__headingReference\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 17\n    }\n  }, \"https://champions123.org/the-business-case-for-reducing-food-loss-and-waste/\")))), /*#__PURE__*/React.createElement(Footer, {\n    message: \"Working towards a circular economy in waste management\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }\n  }));\n}","map":{"version":3,"sources":["/Users/james/Documents/CODE/GREENKODE_DASHBOARD/greenkode-dashboard/frontend/greenkode/src/shared/components/containers/auth/login.js"],"names":["React","useState","Auth","Link","Footer","useSpinner","initialFormState","username","password","email","authCode","formType","Login","props","formState","updateFormState","onChange","e","persist","target","name","value","errorMessage","setErrorMessage","spinner","showSpinner","hideSpinner","signIn","result","console","log","usersEmail","user","attributes","companyName","companyId","userGroups","signInUserSession","accessToken","payload","noOfUsers","checkIfUserHasPermissionToAccessDashboard","filter","data","greenkodeUser","find","element","admin","superAdmin","typeOfUser","undefined","length","signOut","userDetails","companyname","fullName","saveUserType","getUserDetails","getNoOfUsersCreated","userHasAuthenticated","getAllData","message","code"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport { Auth } from \"aws-amplify\";\nimport { Link } from \"react-router-dom\";\nimport Footer from \"../../navigation/footer\";\n\nimport useSpinner from \"../../libs/use-spinner\";\n\nconst initialFormState = {\n  username: '', password: '', email: '', authCode: '', formType: 'signIn'\n}\n\nexport default function Login(props) {\n  const [formState, updateFormState] = useState(initialFormState)\n\n  function onChange(e) {\n    e.persist()\n    updateFormState(() => ({ ...formState, [e.target.name]: e.target.value }))\n  }\n  const { formType } = formState\n\n  const [errorMessage, setErrorMessage] = useState(false);\n  const [spinner, showSpinner, hideSpinner] = useSpinner();\n\n  async function signIn() {\n\n    const { username, password } = formState\n    showSpinner()\n\n    try {\n\n      const result = await Auth.signIn(username, password)\n\n      if (result) {\n        hideSpinner()\n\n        console.log(\"Auth\",Auth)\n\n        const usersEmail = Auth.user.attributes.email;\n        const companyName = Auth.user.attributes[\"custom:company\"];\n        const companyId = Auth.user.attributes[\"custom:companyId\"];\n\n        const userGroups = Auth.user.signInUserSession.accessToken.payload[\"cognito:groups\"];\n        const name = Auth.user.attributes[\"name\"];\n        // const noOfUsers = Auth.user.attributes[\"custom:NumberOfUsersCreated\"] ? Auth.user.attributes[\"custom:NumberOfUsersCreated\"]: 6;\n        const noOfUsers = Auth.user.attributes[\"custom:NumberOfUsersSix\"] ? Auth.user.attributes[\"custom:NumberOfUsersSix\"] : 6;\n\n\n        const checkIfUserHasPermissionToAccessDashboard = userGroups.filter((data) => {\n          return data === \"admin\" || data === \"greenkodeUser\" || data === \"superAdmin\" || data === \"user\"\n        })\n\n        const greenkodeUser = userGroups.find(element => element === \"greenkodeUser\");\n        const admin = userGroups.find(element => element === \"admin\");\n        const superAdmin = userGroups.find(element => element === \"superAdmin\");\n        const user = userGroups.find(element => element === \"user\");\n\n        const typeOfUser = greenkodeUser ? greenkodeUser : superAdmin ? superAdmin : admin ? admin : user ? user : user;\n\n        if (typeOfUser === \"superAdmin\" || typeOfUser === \"admin\" || typeOfUser === \"user\") {\n\n          if (companyName !== undefined) {\n\n            if (checkIfUserHasPermissionToAccessDashboard.length === 0) {\n\n              await Auth.signOut();\n\n            } else {\n\n              const userDetails = {\n                companyname: companyName,\n                email: usersEmail,\n                fullName: name,\n                typeOfUser: typeOfUser\n              };\n\n              props.saveUserType(typeOfUser)\n              props.getUserDetails(userDetails);\n              props.getNoOfUsersCreated(noOfUsers);\n              props.userHasAuthenticated(true);\n\n              props.getAllData(companyName, usersEmail, userDetails, companyId);\n              // props.getAllData(companyName, userDetails);\n            }\n\n          }\n        } else {\n          props.userHasAuthenticated(true);\n          props.saveUserType(typeOfUser)\n        }\n\n      }\n\n    } catch (e) {\n      console.log(\"e\", e)\n\n      let message;\n\n      if (e.code === \"UserNotConfirmedException\" || e.code === \"NotAuthorizedException\") {\n        message = e.message;\n      } else {\n        message = \"An error occurred while logging in, please re-enter again\";\n      }\n\n      setErrorMessage(message)\n      hideSpinner()\n    }\n\n  }\n\n\n  return (\n\n    <>\n      {spinner}\n      {\n        formType === 'signIn' && (\n          <div className=\"login\">\n\n            <div className=\"login__form\">\n              <div controlid=\"email\" bssize=\"large\" className=\"login__wrapper\">\n                <div className=\"login__email--colorAndSpacing\">\n                  <h3>Email</h3>\n                </div>{\" \"}\n                <input name=\"username\" onChange={onChange} placeholder=\"username\" className=\"login__emailInput\" />\n              </div>\n              <div controlid=\"password\" bssize=\"large\" className=\"login__wrapper\">\n                <div className=\"login__password--colorAndSpacing\">\n                  <h3>Password</h3>\n                </div>{\" \"}\n                <input name=\"password\" type=\"password\" onChange={onChange} placeholder=\"password\" className=\"login__passwordInput\" />\n              </div>\n              <button onClick={signIn}>\n                <h3>Sign in</h3>\n              </button>\n              <div className=\"login__links\">\n                <Link className=\"login__linksForgotpassword\" to=\"forgotpassword\">Forgot Password</Link>\n              </div>\n              <div className=\"warning-message\">{errorMessage}</div>\n            </div>\n\n            <div className=\"login__heading\">\n              <div className=\"login__heading--size\">\n                \"The Hospitality <br />\n                sector can make a <br /> profit of £7 for every <br /> £1 they\n                invest in\n                <br /> cutting food waste, a<br /> global report reveals\"\n                <p className=\"login__headingReference\">\n                  https://champions123.org/the-business-case-for-reducing-food-loss-and-waste/\n                </p>\n              </div>\n            </div>\n          </div>\n        )\n      }\n\n      <Footer\n        message={\"Working towards a circular economy in waste management\"}\n      />\n\n    </>\n\n  );\n}\n\n"]},"metadata":{},"sourceType":"module"}