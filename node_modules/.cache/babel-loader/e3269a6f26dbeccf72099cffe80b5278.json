{"ast":null,"code":"function noop() {}\n\nfunction elements(chartInstance) {\n  // Turn the elements object into an array of elements\n  var elements = chartInstance.annotation.elements;\n  return Object.keys(elements).map(function (id) {\n    return elements[id];\n  });\n}\n\nfunction objectId() {\n  return Math.random().toString(36).substr(2, 6);\n}\n\nfunction isValid(rawValue) {\n  if (rawValue === null || typeof rawValue === 'undefined') {\n    return false;\n  } else if (typeof rawValue === 'number') {\n    return isFinite(rawValue);\n  } else {\n    return !!rawValue;\n  }\n}\n\nfunction decorate(obj, prop, func) {\n  var prefix = '$';\n\n  if (!obj[prefix + prop]) {\n    if (obj[prop]) {\n      obj[prefix + prop] = obj[prop].bind(obj);\n\n      obj[prop] = function () {\n        var args = [obj[prefix + prop]].concat(Array.prototype.slice.call(arguments));\n        return func.apply(obj, args);\n      };\n    } else {\n      obj[prop] = function () {\n        var args = [undefined].concat(Array.prototype.slice.call(arguments));\n        return func.apply(obj, args);\n      };\n    }\n  }\n}\n\nfunction callEach(fns, method) {\n  fns.forEach(function (fn) {\n    (method ? fn[method] : fn)();\n  });\n}\n\nfunction getEventHandlerName(eventName) {\n  return 'on' + eventName[0].toUpperCase() + eventName.substring(1);\n}\n\nfunction createMouseEvent(type, previousEvent) {\n  try {\n    return new MouseEvent(type, previousEvent);\n  } catch (exception) {\n    try {\n      var m = document.createEvent('MouseEvent');\n      m.initMouseEvent(type, previousEvent.canBubble, previousEvent.cancelable, previousEvent.view, previousEvent.detail, previousEvent.screenX, previousEvent.screenY, previousEvent.clientX, previousEvent.clientY, previousEvent.ctrlKey, previousEvent.altKey, previousEvent.shiftKey, previousEvent.metaKey, previousEvent.button, previousEvent.relatedTarget);\n      return m;\n    } catch (exception2) {\n      var e = document.createEvent('Event');\n      e.initEvent(type, previousEvent.canBubble, previousEvent.cancelable);\n      return e;\n    }\n  }\n}\n\nmodule.exports = function (Chart) {\n  var chartHelpers = Chart.helpers;\n\n  function initConfig(config) {\n    config = chartHelpers.configMerge(Chart.Annotation.defaults, config);\n\n    if (chartHelpers.isArray(config.annotations)) {\n      config.annotations.forEach(function (annotation) {\n        annotation.label = chartHelpers.configMerge(Chart.Annotation.labelDefaults, annotation.label);\n      });\n    }\n\n    return config;\n  }\n\n  function getScaleLimits(scaleId, annotations, scaleMin, scaleMax) {\n    var ranges = annotations.filter(function (annotation) {\n      return !!annotation._model.ranges[scaleId];\n    }).map(function (annotation) {\n      return annotation._model.ranges[scaleId];\n    });\n    var min = ranges.map(function (range) {\n      return Number(range.min);\n    }).reduce(function (a, b) {\n      return isFinite(b) && !isNaN(b) && b < a ? b : a;\n    }, scaleMin);\n    var max = ranges.map(function (range) {\n      return Number(range.max);\n    }).reduce(function (a, b) {\n      return isFinite(b) && !isNaN(b) && b > a ? b : a;\n    }, scaleMax);\n    return {\n      min: min,\n      max: max\n    };\n  }\n\n  function adjustScaleRange(scale) {\n    // Adjust the scale range to include annotation values\n    var range = getScaleLimits(scale.id, elements(scale.chart), scale.min, scale.max);\n\n    if (typeof scale.options.ticks.min === 'undefined' && typeof scale.options.ticks.suggestedMin === 'undefined') {\n      scale.min = range.min;\n    }\n\n    if (typeof scale.options.ticks.max === 'undefined' && typeof scale.options.ticks.suggestedMax === 'undefined') {\n      scale.max = range.max;\n    }\n\n    if (scale.handleTickRangeOptions) {\n      scale.handleTickRangeOptions();\n    }\n  }\n\n  function getNearestItems(annotations, position) {\n    var minDistance = Number.POSITIVE_INFINITY;\n    return annotations.filter(function (element) {\n      return element.inRange(position.x, position.y);\n    }).reduce(function (nearestItems, element) {\n      var center = element.getCenterPoint();\n      var distance = chartHelpers.distanceBetweenPoints(position, center);\n\n      if (distance < minDistance) {\n        nearestItems = [element];\n        minDistance = distance;\n      } else if (distance === minDistance) {\n        // Can have multiple items at the same distance in which case we sort by size\n        nearestItems.push(element);\n      }\n\n      return nearestItems;\n    }, []).sort(function (a, b) {\n      // If there are multiple elements equally close,\n      // sort them by size, then by index\n      var sizeA = a.getArea(),\n          sizeB = b.getArea();\n      return sizeA > sizeB || sizeA < sizeB ? sizeA - sizeB : a._index - b._index;\n    }).slice(0, 1)[0]; // return only the top item\n  }\n\n  return {\n    initConfig: initConfig,\n    elements: elements,\n    callEach: callEach,\n    noop: noop,\n    objectId: objectId,\n    isValid: isValid,\n    decorate: decorate,\n    adjustScaleRange: adjustScaleRange,\n    getNearestItems: getNearestItems,\n    getEventHandlerName: getEventHandlerName,\n    createMouseEvent: createMouseEvent\n  };\n};","map":{"version":3,"sources":["/Users/james/Documents/CODE/greenkode-dashboard/frontend/greenkode/node_modules/chartjs-plugin-annotation/src/helpers.js"],"names":["noop","elements","chartInstance","annotation","Object","keys","map","id","objectId","Math","random","toString","substr","isValid","rawValue","isFinite","decorate","obj","prop","func","prefix","bind","args","concat","Array","prototype","slice","call","arguments","apply","undefined","callEach","fns","method","forEach","fn","getEventHandlerName","eventName","toUpperCase","substring","createMouseEvent","type","previousEvent","MouseEvent","exception","m","document","createEvent","initMouseEvent","canBubble","cancelable","view","detail","screenX","screenY","clientX","clientY","ctrlKey","altKey","shiftKey","metaKey","button","relatedTarget","exception2","e","initEvent","module","exports","Chart","chartHelpers","helpers","initConfig","config","configMerge","Annotation","defaults","isArray","annotations","label","labelDefaults","getScaleLimits","scaleId","scaleMin","scaleMax","ranges","filter","_model","min","range","Number","reduce","a","b","isNaN","max","adjustScaleRange","scale","chart","options","ticks","suggestedMin","suggestedMax","handleTickRangeOptions","getNearestItems","position","minDistance","POSITIVE_INFINITY","element","inRange","x","y","nearestItems","center","getCenterPoint","distance","distanceBetweenPoints","push","sort","sizeA","getArea","sizeB","_index"],"mappings":"AAAA,SAASA,IAAT,GAAgB,CAAE;;AAElB,SAASC,QAAT,CAAkBC,aAAlB,EAAiC;AAChC;AACA,MAAID,QAAQ,GAAGC,aAAa,CAACC,UAAd,CAAyBF,QAAxC;AACA,SAAOG,MAAM,CAACC,IAAP,CAAYJ,QAAZ,EAAsBK,GAAtB,CAA0B,UAASC,EAAT,EAAa;AAC7C,WAAON,QAAQ,CAACM,EAAD,CAAf;AACA,GAFM,CAAP;AAGA;;AAED,SAASC,QAAT,GAAoB;AACnB,SAAOC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,CAArC,CAAP;AACA;;AAED,SAASC,OAAT,CAAiBC,QAAjB,EAA2B;AAC1B,MAAIA,QAAQ,KAAK,IAAb,IAAqB,OAAOA,QAAP,KAAoB,WAA7C,EAA0D;AACzD,WAAO,KAAP;AACA,GAFD,MAEO,IAAI,OAAOA,QAAP,KAAoB,QAAxB,EAAkC;AACxC,WAAOC,QAAQ,CAACD,QAAD,CAAf;AACA,GAFM,MAEA;AACN,WAAO,CAAC,CAACA,QAAT;AACA;AACD;;AAED,SAASE,QAAT,CAAkBC,GAAlB,EAAuBC,IAAvB,EAA6BC,IAA7B,EAAmC;AAClC,MAAIC,MAAM,GAAG,GAAb;;AACA,MAAI,CAACH,GAAG,CAACG,MAAM,GAAGF,IAAV,CAAR,EAAyB;AACxB,QAAID,GAAG,CAACC,IAAD,CAAP,EAAe;AACdD,MAAAA,GAAG,CAACG,MAAM,GAAGF,IAAV,CAAH,GAAqBD,GAAG,CAACC,IAAD,CAAH,CAAUG,IAAV,CAAeJ,GAAf,CAArB;;AACAA,MAAAA,GAAG,CAACC,IAAD,CAAH,GAAY,YAAW;AACtB,YAAII,IAAI,GAAG,CAAEL,GAAG,CAACG,MAAM,GAAGF,IAAV,CAAL,EAAuBK,MAAvB,CAA8BC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAA9B,CAAX;AACA,eAAOT,IAAI,CAACU,KAAL,CAAWZ,GAAX,EAAgBK,IAAhB,CAAP;AACA,OAHD;AAIA,KAND,MAMO;AACNL,MAAAA,GAAG,CAACC,IAAD,CAAH,GAAY,YAAW;AACtB,YAAII,IAAI,GAAG,CAAEQ,SAAF,EAAcP,MAAd,CAAqBC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,CAArB,CAAX;AACA,eAAOT,IAAI,CAACU,KAAL,CAAWZ,GAAX,EAAgBK,IAAhB,CAAP;AACA,OAHD;AAIA;AACD;AACD;;AAED,SAASS,QAAT,CAAkBC,GAAlB,EAAuBC,MAAvB,EAA+B;AAC9BD,EAAAA,GAAG,CAACE,OAAJ,CAAY,UAASC,EAAT,EAAa;AACxB,KAACF,MAAM,GAAGE,EAAE,CAACF,MAAD,CAAL,GAAgBE,EAAvB;AACA,GAFD;AAGA;;AAED,SAASC,mBAAT,CAA6BC,SAA7B,EAAwC;AACvC,SAAO,OAAOA,SAAS,CAAC,CAAD,CAAT,CAAaC,WAAb,EAAP,GAAoCD,SAAS,CAACE,SAAV,CAAoB,CAApB,CAA3C;AACA;;AAED,SAASC,gBAAT,CAA0BC,IAA1B,EAAgCC,aAAhC,EAA+C;AAC9C,MAAI;AACH,WAAO,IAAIC,UAAJ,CAAeF,IAAf,EAAqBC,aAArB,CAAP;AACA,GAFD,CAEE,OAAOE,SAAP,EAAkB;AACnB,QAAI;AACH,UAAIC,CAAC,GAAGC,QAAQ,CAACC,WAAT,CAAqB,YAArB,CAAR;AACAF,MAAAA,CAAC,CAACG,cAAF,CACCP,IADD,EAECC,aAAa,CAACO,SAFf,EAGCP,aAAa,CAACQ,UAHf,EAICR,aAAa,CAACS,IAJf,EAKCT,aAAa,CAACU,MALf,EAMCV,aAAa,CAACW,OANf,EAOCX,aAAa,CAACY,OAPf,EAQCZ,aAAa,CAACa,OARf,EASCb,aAAa,CAACc,OATf,EAUCd,aAAa,CAACe,OAVf,EAWCf,aAAa,CAACgB,MAXf,EAYChB,aAAa,CAACiB,QAZf,EAaCjB,aAAa,CAACkB,OAbf,EAcClB,aAAa,CAACmB,MAdf,EAeCnB,aAAa,CAACoB,aAff;AAiBA,aAAOjB,CAAP;AACA,KApBD,CAoBE,OAAOkB,UAAP,EAAmB;AACpB,UAAIC,CAAC,GAAGlB,QAAQ,CAACC,WAAT,CAAqB,OAArB,CAAR;AACAiB,MAAAA,CAAC,CAACC,SAAF,CACCxB,IADD,EAECC,aAAa,CAACO,SAFf,EAGCP,aAAa,CAACQ,UAHf;AAKA,aAAOc,CAAP;AACA;AACD;AACD;;AAEDE,MAAM,CAACC,OAAP,GAAiB,UAASC,KAAT,EAAgB;AAChC,MAAIC,YAAY,GAAGD,KAAK,CAACE,OAAzB;;AAEA,WAASC,UAAT,CAAoBC,MAApB,EAA4B;AAC3BA,IAAAA,MAAM,GAAGH,YAAY,CAACI,WAAb,CAAyBL,KAAK,CAACM,UAAN,CAAiBC,QAA1C,EAAoDH,MAApD,CAAT;;AACA,QAAIH,YAAY,CAACO,OAAb,CAAqBJ,MAAM,CAACK,WAA5B,CAAJ,EAA8C;AAC7CL,MAAAA,MAAM,CAACK,WAAP,CAAmB3C,OAAnB,CAA2B,UAAS/B,UAAT,EAAqB;AAC/CA,QAAAA,UAAU,CAAC2E,KAAX,GAAmBT,YAAY,CAACI,WAAb,CAAyBL,KAAK,CAACM,UAAN,CAAiBK,aAA1C,EAAyD5E,UAAU,CAAC2E,KAApE,CAAnB;AACA,OAFD;AAGA;;AACD,WAAON,MAAP;AACA;;AAED,WAASQ,cAAT,CAAwBC,OAAxB,EAAiCJ,WAAjC,EAA8CK,QAA9C,EAAwDC,QAAxD,EAAkE;AACjE,QAAIC,MAAM,GAAGP,WAAW,CAACQ,MAAZ,CAAmB,UAASlF,UAAT,EAAqB;AACpD,aAAO,CAAC,CAACA,UAAU,CAACmF,MAAX,CAAkBF,MAAlB,CAAyBH,OAAzB,CAAT;AACA,KAFY,EAEV3E,GAFU,CAEN,UAASH,UAAT,EAAqB;AAC3B,aAAOA,UAAU,CAACmF,MAAX,CAAkBF,MAAlB,CAAyBH,OAAzB,CAAP;AACA,KAJY,CAAb;AAMA,QAAIM,GAAG,GAAGH,MAAM,CAAC9E,GAAP,CAAW,UAASkF,KAAT,EAAgB;AACpC,aAAOC,MAAM,CAACD,KAAK,CAACD,GAAP,CAAb;AACA,KAFS,EAEPG,MAFO,CAEA,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACxB,aAAO7E,QAAQ,CAAC6E,CAAD,CAAR,IAAe,CAACC,KAAK,CAACD,CAAD,CAArB,IAA4BA,CAAC,GAAGD,CAAhC,GAAoCC,CAApC,GAAwCD,CAA/C;AACA,KAJS,EAIPT,QAJO,CAAV;AAMA,QAAIY,GAAG,GAAGV,MAAM,CAAC9E,GAAP,CAAW,UAASkF,KAAT,EAAgB;AACpC,aAAOC,MAAM,CAACD,KAAK,CAACM,GAAP,CAAb;AACA,KAFS,EAEPJ,MAFO,CAEA,UAASC,CAAT,EAAYC,CAAZ,EAAe;AACxB,aAAO7E,QAAQ,CAAC6E,CAAD,CAAR,IAAe,CAACC,KAAK,CAACD,CAAD,CAArB,IAA4BA,CAAC,GAAGD,CAAhC,GAAoCC,CAApC,GAAwCD,CAA/C;AACA,KAJS,EAIPR,QAJO,CAAV;AAMA,WAAO;AACNI,MAAAA,GAAG,EAAEA,GADC;AAENO,MAAAA,GAAG,EAAEA;AAFC,KAAP;AAIA;;AAED,WAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAChC;AACA,QAAIR,KAAK,GAAGR,cAAc,CAACgB,KAAK,CAACzF,EAAP,EAAWN,QAAQ,CAAC+F,KAAK,CAACC,KAAP,CAAnB,EAAkCD,KAAK,CAACT,GAAxC,EAA6CS,KAAK,CAACF,GAAnD,CAA1B;;AACA,QAAI,OAAOE,KAAK,CAACE,OAAN,CAAcC,KAAd,CAAoBZ,GAA3B,KAAmC,WAAnC,IAAkD,OAAOS,KAAK,CAACE,OAAN,CAAcC,KAAd,CAAoBC,YAA3B,KAA4C,WAAlG,EAA+G;AAC9GJ,MAAAA,KAAK,CAACT,GAAN,GAAYC,KAAK,CAACD,GAAlB;AACA;;AACD,QAAI,OAAOS,KAAK,CAACE,OAAN,CAAcC,KAAd,CAAoBL,GAA3B,KAAmC,WAAnC,IAAkD,OAAOE,KAAK,CAACE,OAAN,CAAcC,KAAd,CAAoBE,YAA3B,KAA4C,WAAlG,EAA+G;AAC9GL,MAAAA,KAAK,CAACF,GAAN,GAAYN,KAAK,CAACM,GAAlB;AACA;;AACD,QAAIE,KAAK,CAACM,sBAAV,EAAkC;AACjCN,MAAAA,KAAK,CAACM,sBAAN;AACA;AACD;;AAED,WAASC,eAAT,CAAyB1B,WAAzB,EAAsC2B,QAAtC,EAAgD;AAC/C,QAAIC,WAAW,GAAGhB,MAAM,CAACiB,iBAAzB;AAEA,WAAO7B,WAAW,CAChBQ,MADK,CACE,UAASsB,OAAT,EAAkB;AACzB,aAAOA,OAAO,CAACC,OAAR,CAAgBJ,QAAQ,CAACK,CAAzB,EAA4BL,QAAQ,CAACM,CAArC,CAAP;AACA,KAHK,EAILpB,MAJK,CAIE,UAASqB,YAAT,EAAuBJ,OAAvB,EAAgC;AACvC,UAAIK,MAAM,GAAGL,OAAO,CAACM,cAAR,EAAb;AACA,UAAIC,QAAQ,GAAG7C,YAAY,CAAC8C,qBAAb,CAAmCX,QAAnC,EAA6CQ,MAA7C,CAAf;;AAEA,UAAIE,QAAQ,GAAGT,WAAf,EAA4B;AAC3BM,QAAAA,YAAY,GAAG,CAACJ,OAAD,CAAf;AACAF,QAAAA,WAAW,GAAGS,QAAd;AACA,OAHD,MAGO,IAAIA,QAAQ,KAAKT,WAAjB,EAA8B;AACpC;AACAM,QAAAA,YAAY,CAACK,IAAb,CAAkBT,OAAlB;AACA;;AAED,aAAOI,YAAP;AACA,KAjBK,EAiBH,EAjBG,EAkBLM,IAlBK,CAkBA,UAAS1B,CAAT,EAAYC,CAAZ,EAAe;AACpB;AACA;AACA,UAAI0B,KAAK,GAAG3B,CAAC,CAAC4B,OAAF,EAAZ;AAAA,UAAyBC,KAAK,GAAG5B,CAAC,CAAC2B,OAAF,EAAjC;AACA,aAAQD,KAAK,GAAGE,KAAR,IAAiBF,KAAK,GAAGE,KAA1B,GAAmCF,KAAK,GAAGE,KAA3C,GAAmD7B,CAAC,CAAC8B,MAAF,GAAW7B,CAAC,CAAC6B,MAAvE;AACA,KAvBK,EAwBL/F,KAxBK,CAwBC,CAxBD,EAwBI,CAxBJ,EAwBO,CAxBP,CAAP,CAH+C,CA2B7B;AAClB;;AAED,SAAO;AACN6C,IAAAA,UAAU,EAAEA,UADN;AAENtE,IAAAA,QAAQ,EAAEA,QAFJ;AAGN8B,IAAAA,QAAQ,EAAEA,QAHJ;AAIN/B,IAAAA,IAAI,EAAEA,IAJA;AAKNQ,IAAAA,QAAQ,EAAEA,QALJ;AAMNK,IAAAA,OAAO,EAAEA,OANH;AAONG,IAAAA,QAAQ,EAAEA,QAPJ;AAQN+E,IAAAA,gBAAgB,EAAEA,gBARZ;AASNQ,IAAAA,eAAe,EAAEA,eATX;AAUNnE,IAAAA,mBAAmB,EAAEA,mBAVf;AAWNI,IAAAA,gBAAgB,EAAEA;AAXZ,GAAP;AAaA,CA/FD","sourcesContent":["function noop() {}\n\nfunction elements(chartInstance) {\n\t// Turn the elements object into an array of elements\n\tvar elements = chartInstance.annotation.elements;\n\treturn Object.keys(elements).map(function(id) {\n\t\treturn elements[id];\n\t});\n}\n\nfunction objectId() {\n\treturn Math.random().toString(36).substr(2, 6);\n}\n\nfunction isValid(rawValue) {\n\tif (rawValue === null || typeof rawValue === 'undefined') {\n\t\treturn false;\n\t} else if (typeof rawValue === 'number') {\n\t\treturn isFinite(rawValue);\n\t} else {\n\t\treturn !!rawValue;\n\t}\n}\n\nfunction decorate(obj, prop, func) {\n\tvar prefix = '$';\n\tif (!obj[prefix + prop]) {\n\t\tif (obj[prop]) {\n\t\t\tobj[prefix + prop] = obj[prop].bind(obj);\n\t\t\tobj[prop] = function() {\n\t\t\t\tvar args = [ obj[prefix + prop] ].concat(Array.prototype.slice.call(arguments));\n\t\t\t\treturn func.apply(obj, args);\n\t\t\t};\n\t\t} else {\n\t\t\tobj[prop] = function() {\n\t\t\t\tvar args = [ undefined ].concat(Array.prototype.slice.call(arguments));\n\t\t\t\treturn func.apply(obj, args);\n\t\t\t};\n\t\t}\n\t}\n}\n\nfunction callEach(fns, method) {\n\tfns.forEach(function(fn) {\n\t\t(method ? fn[method] : fn)();\n\t});\n}\n\nfunction getEventHandlerName(eventName) {\n\treturn 'on' + eventName[0].toUpperCase() + eventName.substring(1);\n}\n\nfunction createMouseEvent(type, previousEvent) {\n\ttry {\n\t\treturn new MouseEvent(type, previousEvent);\n\t} catch (exception) {\n\t\ttry {\n\t\t\tvar m = document.createEvent('MouseEvent');\n\t\t\tm.initMouseEvent(\n\t\t\t\ttype,\n\t\t\t\tpreviousEvent.canBubble,\n\t\t\t\tpreviousEvent.cancelable,\n\t\t\t\tpreviousEvent.view,\n\t\t\t\tpreviousEvent.detail,\n\t\t\t\tpreviousEvent.screenX,\n\t\t\t\tpreviousEvent.screenY,\n\t\t\t\tpreviousEvent.clientX,\n\t\t\t\tpreviousEvent.clientY,\n\t\t\t\tpreviousEvent.ctrlKey,\n\t\t\t\tpreviousEvent.altKey,\n\t\t\t\tpreviousEvent.shiftKey,\n\t\t\t\tpreviousEvent.metaKey,\n\t\t\t\tpreviousEvent.button,\n\t\t\t\tpreviousEvent.relatedTarget\n\t\t\t);\n\t\t\treturn m;\n\t\t} catch (exception2) {\n\t\t\tvar e = document.createEvent('Event');\n\t\t\te.initEvent(\n\t\t\t\ttype,\n\t\t\t\tpreviousEvent.canBubble,\n\t\t\t\tpreviousEvent.cancelable\n\t\t\t);\n\t\t\treturn e;\n\t\t}\n\t}\n}\n\nmodule.exports = function(Chart) {\n\tvar chartHelpers = Chart.helpers;\n\n\tfunction initConfig(config) {\n\t\tconfig = chartHelpers.configMerge(Chart.Annotation.defaults, config);\n\t\tif (chartHelpers.isArray(config.annotations)) {\n\t\t\tconfig.annotations.forEach(function(annotation) {\n\t\t\t\tannotation.label = chartHelpers.configMerge(Chart.Annotation.labelDefaults, annotation.label);\n\t\t\t});\n\t\t}\n\t\treturn config;\n\t}\n\n\tfunction getScaleLimits(scaleId, annotations, scaleMin, scaleMax) {\n\t\tvar ranges = annotations.filter(function(annotation) {\n\t\t\treturn !!annotation._model.ranges[scaleId];\n\t\t}).map(function(annotation) {\n\t\t\treturn annotation._model.ranges[scaleId];\n\t\t});\n\n\t\tvar min = ranges.map(function(range) {\n\t\t\treturn Number(range.min);\n\t\t}).reduce(function(a, b) {\n\t\t\treturn isFinite(b) && !isNaN(b) && b < a ? b : a;\n\t\t}, scaleMin);\n\n\t\tvar max = ranges.map(function(range) {\n\t\t\treturn Number(range.max);\n\t\t}).reduce(function(a, b) {\n\t\t\treturn isFinite(b) && !isNaN(b) && b > a ? b : a;\n\t\t}, scaleMax);\n\n\t\treturn {\n\t\t\tmin: min,\n\t\t\tmax: max\n\t\t};\n\t}\n\n\tfunction adjustScaleRange(scale) {\n\t\t// Adjust the scale range to include annotation values\n\t\tvar range = getScaleLimits(scale.id, elements(scale.chart), scale.min, scale.max);\n\t\tif (typeof scale.options.ticks.min === 'undefined' && typeof scale.options.ticks.suggestedMin === 'undefined') {\n\t\t\tscale.min = range.min;\n\t\t}\n\t\tif (typeof scale.options.ticks.max === 'undefined' && typeof scale.options.ticks.suggestedMax === 'undefined') {\n\t\t\tscale.max = range.max;\n\t\t}\n\t\tif (scale.handleTickRangeOptions) {\n\t\t\tscale.handleTickRangeOptions();\n\t\t}\n\t}\n\n\tfunction getNearestItems(annotations, position) {\n\t\tvar minDistance = Number.POSITIVE_INFINITY;\n\n\t\treturn annotations\n\t\t\t.filter(function(element) {\n\t\t\t\treturn element.inRange(position.x, position.y);\n\t\t\t})\n\t\t\t.reduce(function(nearestItems, element) {\n\t\t\t\tvar center = element.getCenterPoint();\n\t\t\t\tvar distance = chartHelpers.distanceBetweenPoints(position, center);\n\n\t\t\t\tif (distance < minDistance) {\n\t\t\t\t\tnearestItems = [element];\n\t\t\t\t\tminDistance = distance;\n\t\t\t\t} else if (distance === minDistance) {\n\t\t\t\t\t// Can have multiple items at the same distance in which case we sort by size\n\t\t\t\t\tnearestItems.push(element);\n\t\t\t\t}\n\n\t\t\t\treturn nearestItems;\n\t\t\t}, [])\n\t\t\t.sort(function(a, b) {\n\t\t\t\t// If there are multiple elements equally close,\n\t\t\t\t// sort them by size, then by index\n\t\t\t\tvar sizeA = a.getArea(), sizeB = b.getArea();\n\t\t\t\treturn (sizeA > sizeB || sizeA < sizeB) ? sizeA - sizeB : a._index - b._index;\n\t\t\t})\n\t\t\t.slice(0, 1)[0]; // return only the top item\n\t}\n\n\treturn {\n\t\tinitConfig: initConfig,\n\t\telements: elements,\n\t\tcallEach: callEach,\n\t\tnoop: noop,\n\t\tobjectId: objectId,\n\t\tisValid: isValid,\n\t\tdecorate: decorate,\n\t\tadjustScaleRange: adjustScaleRange,\n\t\tgetNearestItems: getNearestItems,\n\t\tgetEventHandlerName: getEventHandlerName,\n\t\tcreateMouseEvent: createMouseEvent\n\t};\n};\n\n"]},"metadata":{},"sourceType":"script"}