(this["webpackJsonpgreenkode-app-client"]=this["webpackJsonpgreenkode-app-client"]||[]).push([[0],{227:function(e,a,t){e.exports=t.p+"static/media/green_kode_white.5a90a352.svg"},249:function(e,a,t){e.exports=t.p+"static/media/meals.4e97c906.svg"},250:function(e,a,t){e.exports=t.p+"static/media/co2.6797119b.svg"},251:function(e,a,t){e.exports=t.p+"static/media/money.7f0795b5.svg"},252:function(e,a,t){e.exports=t.p+"static/media/previous_icon.3b04b1e1.svg"},253:function(e,a,t){e.exports=t.p+"static/media/next_icon.1b83573b.svg"},257:function(e,a,t){e.exports=t.p+"static/media/green_kode.8f56e717.svg"},276:function(e,a,t){e.exports=t(485)},281:function(e,a,t){},479:function(e,a,t){},485:function(e,a,t){"use strict";t.r(a);var r=t(0),n=t.n(r),s=t(13),l=t.n(s),o=(t(281),t(282),t(2)),c=t(27),i=t(12),d=t.n(i),m=t(31),u=t(8),p=t(11),g=t(92),h=t(25),b=t(227),v=t.n(b),y=t(117),f=t(48),E=t(34);var _=function(e){return n.a.createElement("div",{className:"footer"},n.a.createElement("div",{className:"footer__wrapper"},n.a.createElement("div",{className:"footer__addressAndLogo"},n.a.createElement("img",{className:"footer__logo",src:v.a,alt:"logo"}),n.a.createElement("p",{className:"footer__address"},"Launchpad Falmouth University ",n.a.createElement("br",null)," Penryn Campus",n.a.createElement("br",null)," Treliever Road ",n.a.createElement("br",null)," Penryn",n.a.createElement("br",null),"Cornwall ",n.a.createElement("br",null)," TR10 9FE")),n.a.createElement("div",{className:"footer__contact"},n.a.createElement("p",{className:"footer__contactHeader--style"},"Contact us"),n.a.createElement("div",null,n.a.createElement(E.a,{icon:f.b}),n.a.createElement("a",{className:"footer__contactIcon--style",href:"mailto:contact@greenkode.net",target:"_top"},"contact@greenkode.net"))),n.a.createElement("div",{className:"footer__heading"},n.a.createElement("p",{className:"footer__heading--style"},'"',e.message,'"')),n.a.createElement("div",{className:"footer__socialMedia"},n.a.createElement("div",{className:"footer__socialMedia--padding"},n.a.createElement("div",{className:"circle"},n.a.createElement("a",{href:"https://twitter.com/GreenKode_net",target:"_blank",rel:"noopener noreferrer"},n.a.createElement(E.a,{icon:y.d})))),n.a.createElement("div",{className:"footer__socialMedia--padding"},n.a.createElement("div",{className:"circle"},n.a.createElement("a",{href:"https://www.instagram.com/green_kode/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement(E.a,{icon:y.b})))),n.a.createElement("div",{className:"footer__socialMedia--padding"},n.a.createElement("div",{className:"circle"},n.a.createElement("a",{href:"https://www.linkedin.com/company/greenkode/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement(E.a,{icon:y.c}))))," ",n.a.createElement("div",{className:"footer__socialMedia--padding"},n.a.createElement("div",{className:"circle"},n.a.createElement("a",{href:"https://www.facebook.com/greenkodenet/",target:"_blank",rel:"noopener noreferrer"},n.a.createElement(E.a,{icon:y.a}))))," ")))},w=t(228),S=function(){return n.a.createElement("div",{className:"Spinner"},n.a.createElement(w.SyncLoader,{size:16,color:"rgb(140, 112, 140)"}))},N=function(){var e=Object(r.useState)(!1),a=Object(o.a)(e,2),t=a[0],s=a[1];return[t?n.a.createElement(S,null):null,function(){return s(!0)},function(){return s(!1)}]},C={username:"",password:"",email:"",authCode:"",formType:"signIn"};function O(e){var a=Object(r.useState)(C),t=Object(o.a)(a,2),s=t[0],l=t[1];function c(e){e.persist(),l((function(){return Object(p.a)({},s,Object(u.a)({},e.target.name,e.target.value))}))}var i=s.formType,b=Object(r.useState)(!1),v=Object(o.a)(b,2),y=v[0],f=v[1],E=N(),w=Object(o.a)(E,3),S=w[0],O=w[1],W=w[2];function k(){return(k=Object(m.a)(d.a.mark((function a(){var t,r,n,l,o,c,i,m,u,p,h,b,v,y,E,_;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=s.username,r=s.password,O(),a.prev=2,a.next=5,g.a.signIn(t,r);case 5:if(!a.sent){a.next=37;break}if(W(),n=g.a.user.attributes.email,l=g.a.user.attributes["custom:company"],o=g.a.user.attributes["custom:companyId"],c=g.a.user.signInUserSession.accessToken.payload["cognito:groups"],i=g.a.user.attributes.name,m=g.a.user.attributes["custom:NumberOfUsersSix"]?g.a.user.attributes["custom:NumberOfUsersSix"]:6,u=c.filter((function(e){return"admin"===e||"greenkodeUser"===e||"superAdmin"===e||"user"===e})),p=c.find((function(e){return"greenkodeUser"===e})),h=c.find((function(e){return"admin"===e})),b=c.find((function(e){return"superAdmin"===e})),v=c.find((function(e){return"user"===e})),"superAdmin"!==(y=p||(b||(h||(v||v))))&&"admin"!==y&&"user"!==y){a.next=35;break}if(void 0===l){a.next=33;break}if(0!==u.length){a.next=27;break}return a.next=25,g.a.signOut();case 25:a.next=33;break;case 27:E={companyname:l,email:n,fullName:i,typeOfUser:y},e.saveUserType(y),e.getUserDetails(E),e.getNoOfUsersCreated(m),e.userHasAuthenticated(!0),e.getAllData(l,n,E,o);case 33:a.next=37;break;case 35:e.userHasAuthenticated(!0),e.saveUserType(y);case 37:a.next=45;break;case 39:a.prev=39,a.t0=a.catch(2),console.log("e",a.t0),_="UserNotConfirmedException"===a.t0.code||"NotAuthorizedException"===a.t0.code?a.t0.message:"An error occurred while logging in, please re-enter again",f(_),W();case 45:case"end":return a.stop()}}),a,null,[[2,39]])})))).apply(this,arguments)}return n.a.createElement(n.a.Fragment,null,S,"signIn"===i&&n.a.createElement("div",{className:"login"},n.a.createElement("div",{className:"login__form"},n.a.createElement("div",{controlid:"email",bssize:"large",className:"login__wrapper"},n.a.createElement("div",{className:"login__email--colorAndSpacing"},n.a.createElement("h3",null,"Email"))," ",n.a.createElement("input",{name:"username",onChange:c,placeholder:"username",className:"login__emailInput"})),n.a.createElement("div",{controlid:"password",bssize:"large",className:"login__wrapper"},n.a.createElement("div",{className:"login__password--colorAndSpacing"},n.a.createElement("h3",null,"Password"))," ",n.a.createElement("input",{name:"password",type:"password",onChange:c,placeholder:"password",className:"login__passwordInput"})),n.a.createElement("button",{onClick:function(){return k.apply(this,arguments)}},n.a.createElement("h3",null,"Sign in")),n.a.createElement("div",{className:"login__links"},n.a.createElement(h.b,{className:"login__linksForgotpassword",to:"forgotpassword"},"Forgot Password")),n.a.createElement("div",{className:"warning-message"},y)),n.a.createElement("div",{className:"login__heading"},n.a.createElement("div",{className:"login__heading--size"},'"The Hospitality ',n.a.createElement("br",null),"sector can make a ",n.a.createElement("br",null)," profit of \xa37 for every ",n.a.createElement("br",null)," \xa31 they invest in",n.a.createElement("br",null)," cutting food waste, a",n.a.createElement("br",null),' global report reveals"',n.a.createElement("p",{className:"login__headingReference"},"https://champions123.org/the-business-case-for-reducing-food-loss-and-waste/")))),n.a.createElement(_,{message:"Working towards a circular economy in waste management"}))}var W=t(61),k=t(549),P=t(572),j=t(573),T=t(552),A=t(568),x=t(226),I=function(){return{checkWeeklyWasteData:function(e){return 0===Object.keys(e).length||null===e||void 0===e?{currentWeeklyValues:[[{coverWaste:[0],preparationWaste:[0],spoilageWaste:[0],weekOfYear:"0",Date:""}]],weeklyWasteTrend:[{totalWaste:0,coverWaste:0,prepWaste:0,spoilageWaste:0}]}:e},checkWastePerCoverOrSales:function(e){return 0===Object.keys(e).length||null===e||void 0===e?{monthsName:"",percentageOfInputsAreZeros:0,siteName:"",totalCW:"",totalCoverInputs:0,totalPW:"",totalSW:"",totalWaste:"",wastePerCoverForAllWaste:[0],wastePerCoverForCoverWaste:[0],wastePerCoverForPreparationWaste:[0],wastePerCoverForSpoilageWaste:[0],xAxis:[]}:e},checkAllSitesData:function(e){return 0===Object.keys(e).length||null===e||void 0===e?[{coverWaste:0,prepWaste:0,siteName:"",spoilageWaste:0,totalWaste:0,trends:0}]:e},checkGetDailyAndWeeklyDatesData:function(e){return 0===Object.keys(e).length||null===e||void 0===e?{dailyCoverWasteArrayFormated:[0],dailyPrepWasteArrayFormated:[0],dailySpoilageWasteArrayFormated:[0],hourlyWastesWeeklyArray:[{date:"",data:{coverWaste:[0],preparationWaste:[0],spoilageWaste:[0]}}],totalDailyWaste:[0],weeklyData:["2021-05-17","2021-05-18","2021-05-19","2021-05-20","2021-05-21","2021-05-22","2021-05-23"]}:e}}}(),D=I.checkWeeklyWasteData,B=I.checkWastePerCoverOrSales,M=I.checkAllSitesData,R=I.checkGetDailyAndWeeklyDatesData,F=function(e,a){return new Promise((function(t,r){x.a.post("wastes","/addUserToGroup",{body:{username:e,groupName:a}}).then((function(e){t(e)})).catch((function(e){console.log("error",e),r(e)}))}))},L=function(e,a){return new Promise((function(t,r){x.a.post("wastes","/updateUsersAttribute",{body:{username:e,value:a}}).then((function(e){t(e)})).catch((function(e){console.log("error updateUsersAttribute",e),r(e)}))}))},H=function(e,a,t,r){return new Promise((function(n,s){x.a.post("wastes","/createUserLoginTime/",{body:{name:e,username:a,company:t,companyID:r}}).then((function(e){n(e)})).catch((function(e){console.log("error",e),s(e)}))}))},V=function(e){return console.log("RES",e),new Promise((function(a,t){x.a.post("wastes","/addCoverInput",{body:e}).then((function(e){a(e)})).catch((function(e){console.log("error",e),t(e)}))}))},Y=function(e){return new Promise((function(a,t){x.a.post("wastes","/addSalesInput",{body:e}).then((function(e){a(e)})).catch((function(e){console.log("error",e),t(e)}))}))},U=function(e){return new Promise((function(a,t){x.a.post("wastes","/verifyEmailIdentity",{body:{email:e}}).then((function(e){a(e)})).catch((function(e){console.log("error",e),t(e)}))}))},z=t(558),G=t(557),q=t(559),K=t(560),J=t(561),Z=t(562),X=t(563);function $(e){var a=Object(W.a)(),t=a.register,s=a.handleSubmit,l=a.errors,c=Object(r.useState)(""),i=Object(o.a)(c,2),u=i[0],p=i[1],h=Object(r.useState)(1),b=Object(o.a)(h,2),v=b[0],y=b[1],_=Object(r.useState)(""),w=Object(o.a)(_,2),S=w[0],C=w[1],O=N(),x=Object(o.a)(O,3),I=x[0],D=x[1],B=x[2],M=Object(k.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}))(),R=n.a.useState("user"),V=Object(o.a)(R,2),Y=V[0],$=V[1];function Q(){return(Q=Object(m.a)(d.a.mark((function a(t){var r,n,s,l,o,c,i,m,u,h;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return D(),r=t.email,n=t.password,s=t.name,l=t.phone,o=e.companyName,c=e.noOfUsers+1,i=e.companyID,m={username:r,password:n,attributes:{name:s,"custom:company":o,"custom:NumberOfUsersSix":"0","custom:companyId":i,"custom:smsAlerts":"true","custom:emailAlerts":"true","custom:mobile":l,"custom:companyStartDate":e.startDate}},console.log("signUpInformation",m),u=!1,a.prev=11,a.next=14,g.a.signUp(m);case 14:u=!0,B(),p(""),y(2),a.next=25;break;case 20:a.prev=20,a.t0=a.catch(11),B(),p(a.t0.message),console.log("error signing up:",a.t0);case 25:if(!u){a.next=64;break}if("admin"!==Y){a.next=36;break}return a.prev=27,a.next=30,U(r);case 30:a.next=36;break;case 32:a.prev=32,a.t1=a.catch(27),p(a.t1.message),console.log("error verifyEmail:",a.t1);case 36:return a.prev=36,a.next=39,F(r,Y);case 39:a.next=45;break;case 41:a.prev=41,a.t2=a.catch(36),p(a.t2.message),console.log("error addToGroup:",a.t2);case 45:return a.prev=45,h=c.toString(),a.next=49,L(S,h);case 49:a.next=55;break;case 51:a.prev=51,a.t3=a.catch(45),p(a.t3.message),console.log("error updateUsersAttribute:",a.t3);case 55:return a.prev=55,a.next=58,H(s,r,o,i);case 58:a.next=64;break;case 60:a.prev=60,a.t4=a.catch(55),p(a.t4.message),console.log("error createUserLoginTime:",a.t4);case 64:case"end":return a.stop()}}),a,null,[[11,20],[27,32],[36,41],[45,51],[55,60]])})))).apply(this,arguments)}function ee(){return(ee=Object(m.a)(d.a.mark((function a(t){var r,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.email,n=t.code,a.prev=2,a.next=5,g.a.confirmSignUp(r,n).then((function(){e.history.push("/dashboard")}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),p(a.t0.message);case 10:case"end":return a.stop()}}),a,null,[[2,7]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){C(e.userDetail.email)}),[e.userDetail]),n.a.createElement(n.a.Fragment,null,I,1===v&&n.a.createElement("div",{className:"signup"},n.a.createElement("div",{className:"signup__columns"},n.a.createElement("form",{onSubmit:s((function(e){return Q.apply(this,arguments)})),className:"signup__form signup__column"},n.a.createElement("div",{className:"signup__heading--style"},"Sign up maximum of ",0===e.noOfUsers?6:6-e.noOfUsers," users"),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__textWrapper"},n.a.createElement(E.a,{icon:f.a}),n.a.createElement("div",{className:"signup__inputText"},"Email (Username)")," "),n.a.createElement("input",{autoFocus:!0,type:"email",name:"email",className:"signup__emailInput",ref:t({required:"required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address"}})}),l.email?n.a.createElement("p",null,l.email.message," "):""),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__textWrapper"},n.a.createElement(E.a,{icon:f.a}),n.a.createElement("div",{className:"signup__inputText"},"New Password")," "),n.a.createElement("input",{type:"password",name:"password",className:"signup__passwordInput",ref:t({required:"required",minLength:{value:8,message:"min length is 8"}})}),l.password?n.a.createElement("p",null,l.password.message," "):""),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__textWrapper"},n.a.createElement(E.a,{icon:f.a}),n.a.createElement("div",{className:"signup__inputText"},"Full Name")," "),n.a.createElement("input",{type:"name",name:"name",className:"signup__passwordInput",ref:t({required:"required"})}),l.name?n.a.createElement("p",null,l.name.message," "):""),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__textWrapper"},n.a.createElement(E.a,{icon:f.a}),n.a.createElement("div",{className:"signup__inputText"},"Mobile Number")," "),n.a.createElement("input",{type:"number",name:"phone",className:"signup__passwordInput",ref:t({required:"required",minLength:{value:11,message:"invalid number"},maxLength:{value:11,message:"invalid number"}}),onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),l.phone?n.a.createElement("p",null,l.phone.message," "):""),n.a.createElement("div",{className:"signup__userType__formWrapper"},n.a.createElement(T.a,{variant:"outlined",className:M.formControl},n.a.createElement(P.a,{id:"demo-simple-select-outlined-label"},"User Role"),n.a.createElement(A.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:Y,onChange:function(e){$(e.target.value)},label:"users"},n.a.createElement(j.a,{value:"user"},"Staff"),n.a.createElement(j.a,{value:"admin"},"Head chef")))),6===e.noOfUsers?n.a.createElement("div",{style:{display:"flex",justifyContent:"center",color:"red"}},'"You have reached the maximum amount of users"'):n.a.createElement("button",{type:"submit"},"Sign up"),n.a.createElement("div",{className:"signUp__errorMessage"},n.a.createElement("p",null,u))),n.a.createElement("div",{className:"signup__column"},n.a.createElement(z.a,{component:G.a},n.a.createElement(q.a,{className:"superAdminCreatedUsers__table","aria-label":"simple table"},n.a.createElement(K.a,null,n.a.createElement(J.a,null,n.a.createElement(Z.a,null,"Full Name"),n.a.createElement(Z.a,{align:"left"},"Most Recent Logins"))),n.a.createElement(X.a,null,e.superAdminCreatedUsers.map((function(e,a){return n.a.createElement(J.a,{key:a},n.a.createElement(Z.a,{component:"th",scope:"row"},e.name),n.a.createElement(Z.a,{align:"left"},e.loginTime.map((function(e){return n.a.createElement("div",null,e.time)}))))})))))))),2===v&&n.a.createElement("div",{className:"signup"},n.a.createElement("form",{onSubmit:s((function(e){return ee.apply(this,arguments)})),className:"signup__form"},n.a.createElement("div",{className:"signup__heading--style"},"Confirm Sign Up"),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__emailText"},"Username (Email)")," ",n.a.createElement("input",{autoFocus:!0,type:"email",name:"email",className:"signup__emailInput",ref:t({required:"required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address"}})})),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__passwordText"},"Verification code")," ",n.a.createElement("input",{type:"code",name:"code",className:"signup__passwordInput",ref:t({required:"required"})})),n.a.createElement("button",{type:"submit",bssize:"large"},"confirm"),n.a.createElement("div",{className:"forget-password-message"},n.a.createElement("p",null,u)))))}function Q(e){var a=Object(r.useState)(1),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(W.a)(),p=u.register,h=u.handleSubmit,b=u.watch,v=u.errors,y=Object(r.useState)(""),f=Object(o.a)(y,2),E=f[0],w=f[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"login"},1===s&&n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),g.a.forgotPassword(d).then((function(e){console.log(e),l(2)})).catch((function(e){return w(e.message)}))},className:"login__form"},n.a.createElement("div",{className:"signup__heading--style"},n.a.createElement("h3",null,"Submit your email to receive code")),n.a.createElement("div",{controlid:"email",bssize:"large",className:"login__wrapper"},n.a.createElement("div",{className:"login__email--colorAndSpacing"},n.a.createElement("h3",null,"Email"))," ",n.a.createElement("input",{className:"signup__passwordInput",value:d,onChange:function(e){return m(e.target.value)}}))," ",n.a.createElement("button",{type:"submit",bssize:"large"},n.a.createElement("h3",null,"Submit"))),2===s&&n.a.createElement("form",{onSubmit:h((function(a){var t=a.code,r=a.confirmPassword;g.a.forgotPasswordSubmit(d,t,r).then((function(){return e.history.push("/")})).catch((function(e){return w(e.message)}))})),className:"signup__form"},n.a.createElement("div",{className:"forgotPassword__heading--style"},n.a.createElement("h3",null,"If your email exisits, you will receive a code in your inbox")),n.a.createElement("div",null,n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"forgotPassword__text"}," ",n.a.createElement("h3",null,"code")," ")," ",n.a.createElement("input",{className:"signup__passwordInput",name:"code",ref:p({required:"required"})}),v.code?n.a.createElement("p",null,v.code.message," "):""," "),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"forgotPassword__text"}," ",n.a.createElement("h3",null,"new password")," ")," ",n.a.createElement("input",{className:"signup__passwordInput",type:"password",name:"password",ref:p({required:"required",minLength:{value:8,message:"min length is 8"}})}),v.password?n.a.createElement("p",null,v.password.message," "):""," "),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"forgotPassword__text"},n.a.createElement("div",null," ",n.a.createElement("h3",null,"confirm password")," "))," ",n.a.createElement("input",{className:"signup__passwordInput",type:"password",name:"confirmPassword",ref:p({required:"required",minLength:{value:8,message:"min length is 8"},validate:function(e){return e===b("password")||"Passwords don't match."}})}),v.confirmpassword?n.a.createElement("p",null,v.confirmpassword.message," "):""," ")),n.a.createElement("button",{type:"submit",bssize:"large"},n.a.createElement("h3",null,"Submit")),n.a.createElement("div",{className:"warning-message"},E))),n.a.createElement(_,{message:"Working towards a circular economy in waste management"}))}function ee(e){var a=Object(W.a)(),t=a.register,s=a.handleSubmit,l=a.errors,c=Object(r.useState)(""),i=Object(o.a)(c,2),u=i[0],p=i[1],h=Object(r.useState)(1),b=Object(o.a)(h,2),v=b[0],y=b[1];function _(e){return w.apply(this,arguments)}function w(){return(w=Object(m.a)(d.a.mark((function a(t){var r,n,s,l,o,c;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return console.log("values.email",t),r=t.email,n=t.phone,"PassW0rd!",s=t.name,l=t.company,o=e.companyID,c={username:r,password:"PassW0rd!",attributes:{name:s,"custom:company":l,"custom:NumberOfUsersSix":"0","custom:companyId":o,"custom:smsAlerts":"true","custom:emailAlerts":"true","custom:mobile":n}},a.prev=8,console.log("signUpInformation",c),a.next=12,g.a.signUp(c);case 12:return a.next=14,F(r,"superAdmin");case 14:y(2),a.next=21;break;case 17:a.prev=17,a.t0=a.catch(8),p(a.t0.message),console.log("error signing up:",a.t0);case 21:case"end":return a.stop()}}),a,null,[[8,17]])})))).apply(this,arguments)}function S(){return(S=Object(m.a)(d.a.mark((function a(t){var r,n;return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=t.email,n=t.code,a.prev=2,a.next=5,g.a.confirmSignUp(r,n).then((function(){e.history.push("/login")}));case 5:a.next=10;break;case 7:a.prev=7,a.t0=a.catch(2),p(a.t0.message);case 10:case"end":return a.stop()}}),a,null,[[2,7]])})))).apply(this,arguments)}return n.a.createElement(n.a.Fragment,null,1===v&&n.a.createElement("div",{className:"signup"},n.a.createElement("form",{onSubmit:s(_),className:"signup__form"},n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__emailText"},"Email (Username)")," ",n.a.createElement("input",{autoFocus:!0,type:"email",name:"email",className:"signup__emailInput",ref:t({required:"required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address"}})}),l.email?n.a.createElement("p",null,l.email.message," "):n.a.createElement(E.a,{icon:f.a})),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__passwordText"},"Full Name")," ",n.a.createElement("input",{type:"name",name:"name",className:"signup__passwordInput",ref:t({required:"required"})}),l.name?n.a.createElement("p",null,l.name.message," "):n.a.createElement(E.a,{icon:f.a})," "),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__passwordText"},"Company Name")," ",n.a.createElement("input",{type:"company",name:"company",className:"signup__passwordInput",ref:t({required:"required",maxLength:20})}),l.company?n.a.createElement("p",null,l.company.message," "):n.a.createElement(E.a,{icon:f.a})," "),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__passwordText"},"Mobile number")," ",n.a.createElement("input",{name:"phone",className:"signup__passwordInput",ref:t({required:"required",maxLength:20})}),l.company?n.a.createElement("p",null,l.company.message," "):n.a.createElement(E.a,{icon:f.a})," "),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__passwordText"},"company ID")," ",n.a.createElement("input",{name:"companyID",className:"signup__passwordInput",ref:t({required:"required",maxLength:20})}),l.company?n.a.createElement("p",null,l.company.message," "):n.a.createElement(E.a,{icon:f.a})," "),n.a.createElement("button",{type:"submit",onClick:_},"Sign up"),n.a.createElement("div",{className:"forget-password-message"},n.a.createElement("p",null,u)))),2===v&&n.a.createElement("div",{className:"signup"},n.a.createElement("form",{onSubmit:s((function(e){return S.apply(this,arguments)})),className:"signup__form"},n.a.createElement("div",{className:"signup__heading--style"},"Confirm Sign Up"),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__emailText"},"Username (Email)")," ",n.a.createElement("input",{autoFocus:!0,type:"email",name:"email",className:"signup__emailInput",ref:t({required:"required",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"invalid email address"}})})),n.a.createElement("div",{className:"signup__wrapper"},n.a.createElement("div",{className:"signup__passwordText"},"Verification code")," ",n.a.createElement("input",{type:"code",name:"code",className:"signup__passwordInput",ref:t({required:"required"})})),n.a.createElement("button",{type:"submit",bssize:"large"},"confirm"),n.a.createElement("div",{className:"forget-password-message"},n.a.createElement("p",null,u)))))}var ae=t(9),te=Object(r.createContext)(),re=function(e){var a=e.monthlySelectedValue,t=e.handleSiteChange,r=e.selectedValue,s=e.siteName,l=e.companyName,o=e.sites,c=e.handleMonthlyValues,i=e.displayMonthlyValue,d=e.allMonthlyData,m=e.monthlyChartMaxValue,u=e.monthlyChangesValue,p=e.startDate,g=e.showPounds,h=e.userEmail,b=e.adminType,v=e.count,y=e.totalMonthlyWaste,f=e.clickOnMonthlyBarChart,E=e.changeIndex,_=e.userType,w=e.userDetail,S=e.sitesID,N=e.handleSiteIDchange,C=e.selectedSiteValueID,O=e.companyID,W=e.weeklyDailyLabels,k=e.weeklyDailyRange;return n.a.createElement(te.Provider,{value:{monthlySelectedValue:a,handleSiteChange:t,selectedValue:r,siteName:s,companyName:l,sites:o,handleMonthlyValues:c,displayMonthlyValue:i,allMonthlyData:d,monthlyChartMaxValue:m,monthlyChangesValue:u,startDate:p,showPounds:g,userEmail:h,adminType:b,count:v,totalMonthlyWaste:y,clickOnMonthlyBarChart:f,changeIndex:E,userType:_,userDetail:w,sitesID:S,companyID:O,handleSiteIDchange:N,selectedSiteValueID:C,weeklyDailyLabels:W,weeklyDailyRange:k}},e.children)},ne=Object(r.createContext)(),se=function(e){var a=Object(r.useState)(0),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)(0),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)(""),v=Object(o.a)(b,2),y=v[0],f=v[1];return Object(r.useEffect)((function(){if(void 0!==e.totalWasteFromSelectedSite[0]){var a=e.totalWasteFromSelectedSite[0].siteName.replace(/[^A-Za-z]+/g,"").toUpperCase();f(a),l(e.totalWasteFromSelectedSite[0].coverWaste),m(e.totalWasteFromSelectedSite[0].prepWaste),h(e.totalWasteFromSelectedSite[0].spoilageWaste)}}),[e.totalWasteFromSelectedSite]),n.a.createElement(ne.Provider,{value:{coverWaste:s,prepWaste:d,spoilageWaste:g,siteName:y}},e.children)},le=Object(r.createContext)(),oe=function(e){var a=Object(r.useState)({wastePerCoverCappingValues:[{id:0,label:"wastePerCoverCoverWastes",type:"C",value:0},{id:1,label:"wastePerCoverSpoilageWastes",type:"S",value:0},{id:2,label:"wastePerCoverPreparationWastes",type:"P",value:0}],wastePerSalesCappingValues:[{id:0,label:"wastePerSalesCoverWastes",type:"C",value:0},{id:1,label:"wastePerSalesSpoilageWastes",type:"S",value:0},{id:2,label:"wastePerSalesPreparationWastes",type:"P",value:0}]}),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)(0),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)(0),v=Object(o.a)(b,2),y=v[0],f=v[1],E=Object(r.useState)(0),_=Object(o.a)(E,2),w=_[0],S=_[1],N=Object(r.useState)(0),C=Object(o.a)(N,2),O=C[0],W=C[1],k=Object(r.useState)(0),P=Object(o.a)(k,2),j=P[0],T=P[1],A=Object(r.useState)(0),x=Object(o.a)(A,2),I=x[0],D=x[1],B=Object(r.useState)(0),M=Object(o.a)(B,2),R=M[0],F=M[1],L=Object(r.useState)(0),H=Object(o.a)(L,2),V=H[0],Y=H[1],U=Object(r.useState)(0),z=Object(o.a)(U,2),G=z[0],q=z[1],K=Object(r.useState)(0),J=Object(o.a)(K,2),Z=J[0],X=J[1],$=Object(r.useState)(0),Q=Object(o.a)($,2),ee=Q[0],ae=Q[1],te=Object(r.useState)(0),re=Object(o.a)(te,2),ne=re[0],se=re[1],oe=Object(r.useState)(0),ce=Object(o.a)(oe,2),ie=ce[0],de=ce[1],me=Object(r.useState)(0),ue=Object(o.a)(me,2),pe=ue[0],ge=ue[1],he=Object(r.useState)(0),be=Object(o.a)(he,2),ve=be[0],ye=be[1],fe=Object(r.useState)(0),Ee=Object(o.a)(fe,2),_e=Ee[0],we=Ee[1],Se=Object(r.useState)(0),Ne=Object(o.a)(Se,2),Ce=Ne[0],Oe=Ne[1],We=Object(r.useState)(!1),ke=Object(o.a)(We,2),Pe=ke[0],je=ke[1];Object(r.useEffect)((function(){e.cappingValue&&(Te(e.cappingValue.Items[0].cappingValue),Ae(e.cappingValue.Items[0].cappingValue.weeklyCappingValues),De(e.cappingValue.Items[0].cappingValue.totalCappingValues),xe(e.cappingValue.Items[0].cappingValue.hourlyCappingValues),Ie(e.cappingValue.Items[0].cappingValue.dailyCappingValues),Be(e.cappingValue.Items[0].cappingValue.wastePerCoverCappingValues),Me(e.cappingValue.Items[0].cappingValue.wastePerSalesCappingValues)),je(e.showPounds)}),[e.cappingValue,e.showPounds]);var Te=function(e){l(e)},Ae=function(e){var a=e.filter((function(e){return"weeklyCoverWastes"===e.label})),t=e.filter((function(e){return"weeklySpoilageWastes"===e.label})),r=e.filter((function(e){return"weeklyPreparationWastes"===e.label}));m(a[0].value),h(t[0].value),f(r[0].value)},xe=function(e){var a=e.filter((function(e){return"hourlyCoverWastes"===e.label})),t=e.filter((function(e){return"hourlySpoilageWastes"===e.label})),r=e.filter((function(e){return"hourlyPreparationWastes"===e.label}));q(a[0].value),X(t[0].value),ae(r[0].value)},Ie=function(e){var a=e.filter((function(e){return"dailyCoverWastes"===e.label})),t=e.filter((function(e){return"dailySpoilageWastes"===e.label})),r=e.filter((function(e){return"dailyPreparationWastes"===e.label}));D(a[0].value),F(t[0].value),Y(r[0].value)},De=function(e){var a=e.filter((function(e){return"totalCoverWastes"===e.label})),t=e.filter((function(e){return"totalSpoilageWastes"===e.label})),r=e.filter((function(e){return"totalPreparationWastes"===e.label}));S(a[0].value),W(t[0].value),T(r[0].value)},Be=function(e){var a=e.filter((function(e){return"wastePerCoverCoverWastes"===e.label})),t=e.filter((function(e){return"wastePerCoverSpoilageWastes"===e.label})),r=e.filter((function(e){return"wastePerCoverPreparationWastes"===e.label}));se(a[0].value),de(t[0].value),ge(r[0].value)},Me=function(e){var a=e.filter((function(e){return"wastePerSalesCoverWastes"===e.label})),t=e.filter((function(e){return"wastePerSalesSpoilageWastes"===e.label})),r=e.filter((function(e){return"wastePerSalesPreparationWastes"===e.label}));ye(a[0].value),we(t[0].value),Oe(r[0].value)};return n.a.createElement(le.Provider,{value:{wastePerSalesCoverWastes:ve,wastePerSalesSpoilageWastes:_e,wastePerSalesPrepWastes:Ce,allCappingValue:s,weeklyCoverWastes:d,weeklySpoliageWastes:g,weeklyPeparationWastes:y,showPounds:Pe,selectedSiteCoverWastes:w,selectedSiteSpoliageWastes:O,selectedSitePeparationWastes:j,dailyCoverWastes:I,dailySpoliageWastes:R,dailyPeparationWastes:V,hourlyCoverWastes:G,hourlySpoliageWastes:Z,hourlyPeparationWastes:ee,wastePerCoverCoverWastes:ne,wastePerCoverSpoilageWastes:ie,wastePerCoverPrepWastes:pe}},e.children)},ce=t(20),ie=t.n(ce),de=function(e,a){return ie()(e).add(a,"days").format("MMM DD YYYY")},me=function(e){return e.replace(/[^A-Za-z]+/g,"").toLowerCase()},ue=function(){var e=new Date,a=ie()(e).format("M");return a},pe=function(){return(new Date).getFullYear()},ge=function(e){if(e){var a=e.replace(/([a-z])([A-Z])/g,"$1 $2");return a.charAt(0).toUpperCase()+a.slice(1)}},he=function(e,a){return e+a},be=function(){return(new Date).getMonth()},ve=function(e){if(e){var a=parseFloat(e),t=parseInt(a.toFixed(0));return parseInt(t)}return parseInt(e)},ye=function(e){if(e){var a=parseFloat(e),t=parseInt(a.toFixed(0));return parseInt(t)}return parseInt(e)},fe=function(e){if(e){var a=parseFloat(e.toFixed(2));return parseFloat(a)}},Ee=function(e,a){localStorage.setItem(e,JSON.stringify(a))},_e=function(e){var a,t,r=e.map((function(e){var a=ie()(e,"YYYY-MM-DD"),r=[];return r.push(parseInt(a.format("D"))),t=a.format("MMMM").substr(0,3),r})),n=(a=r).length-1;return a[0]+"-"+a[n]+" "+t},we=function(e){var a=Math.max.apply(Math,e);return Math.max.apply(Math,e)+a},Se=function(){var e=new Date,a=String(e.getDate()),t=["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(String(e.getMonth()))],r=e.getFullYear();return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][(new Date).getDay()]+" "+a+" "+t+" "+r},Ne=t(26),Ce=function(e){return n.a.createElement("div",{className:"accordion__heading originalTheme__accordionHeading"},e.children)},Oe=function(e){return n.a.createElement("div",{className:e.open?"accordion__opening ":"displayNone accordion__closing"},e.children)};function We(e){var a=Object(r.useContext)(le),t=a.selectedSiteCoverWastes,s=a.selectedSiteSpoliageWastes,l=a.selectedSitePeparationWastes,o=a.showPounds,c=Object(r.useContext)(ne),i=c.coverWaste,d=c.prepWaste,m=c.spoilageWaste,u=c.siteName,p=0,g=0,h=0;o?(p=ye(2.775*t),g=ye(2.775*s),h=ye(2.775*l)):(p=t>0?t:0,g=s>0?s:0,h=l>0?l:0);var b=p+g+h,v=0,y=0,f=0;o?(v=ye(2.775*i),y=ye(2.775*m),f=ye(2.775*d)):(v=i>0?i:0,y=m>0?m:0,f=d>0?d:0);var E,_,w,S,N=isNaN(v+y+f)?0:v+y+f,C=0,O=0,W=0;return C=isNaN(v/p*100)?100:v/p*100,O=isNaN(y/g*100)?100:y/g*100,W=isNaN(f/h*100)?100:f/h*100,E=v>=p?"rgba(255, 0, 0, 0.9)":0===v?"rgb(163, 181, 44)":"rgb(47, 67, 30)",_=y>=g?"rgba(255, 0, 0, 0.9)":0===y?"rgb(163, 181, 44)":"rgb(47, 67, 30)",w=f>=h?"rgba(255, 0, 0, 0.9)":0===f?"rgb(163, 181, 44)":"rgb(47, 67, 30)",S=e.showDarkTheme?"rgb(255, 231, 227)":"rgb(140, 112, 140)",n.a.createElement("div",{className:"total__wasteReport"},!e.hideReport&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"TOTAL WASTE FROM ",u),n.a.createElement("div",{className:"container"},e.showTotalWasteChart?n.a.createElement("span",{onClick:function(){Ee("showTotalWasteChart",!e.showTotalWasteChart),e.setShowTotalWasteChart(!e.showTotalWasteChart)}},"X"):n.a.createElement("span",{onClick:function(){e.setShowTotalWasteChart(!e.showTotalWasteChart),Ee("showTotalWasteChart",!e.showTotalWasteChart)}}," | | | "))),n.a.createElement(Oe,{open:e.showTotalWasteChart},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"report-subtitle"},"Overview"),n.a.createElement("div",{className:"total__wasteReport__reportHeading"},n.a.createElement("div",{className:"start-date cooperHewittBold"},"START DATE: ",function(e){var a=ie()(e);return a.format("MMM").toUpperCase().substr(0,3)+"-"+a.format("D")}(e.startDate))),n.a.createElement("div",{className:"total__wasteReport__capping"},n.a.createElement("div",{className:"capping--displayFlex"},n.a.createElement("div",{className:"applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"Total Cap"),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(b))),n.a.createElement("b",{className:"capping"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},"Cap"),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"C"),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(p)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"S"),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(g)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"P"),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(h)))),n.a.createElement("div",{className:"total__wasteReport__progressBarWrapper"},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"dashboard__progressBar"},n.a.createElement("div",{className:"dashboard__progressBar__one"},n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue__wrapper"},n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue"},e.showPounds?n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:e.showDarkTheme?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor cooperHewittBold":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor cooperHewittBold"},"\xa3"),n.a.createElement("div",{className:e.showDarkTheme?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor"},N)):n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:e.showDarkTheme?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor"},N),n.a.createElement("div",{className:e.showDarkTheme?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor cooperHewittBold":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor cooperHewittBold"},"Kg"))))),n.a.createElement("div",{className:"dashboard__progressBar__two"},n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"="),n.a.createElement("div",{className:"dashboard__progressBar__size"},v>=p?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement("div",{className:"dashboard__progressBar__wrapper"},n.a.createElement(Ne.a,{value:C,text:v,styles:Object(Ne.b)({textColor:S,pathColor:E,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"C"),"OVER WASTE")))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"+"),n.a.createElement("div",{className:"dashboard__progressBar__size"},y>=g?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement("div",{className:"dashboard__progressBar__wrapper"},n.a.createElement(Ne.a,{value:O,text:y,styles:Object(Ne.b)({textColor:S,pathColor:_,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10})),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"S"),"POILAGE"))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"+"),n.a.createElement("div",{className:"dashboard__progressBar__size"},f>=h?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement("div",{className:"dashboard__progressBar__wrapper"},n.a.createElement(Ne.a,{value:W,text:f,styles:Object(Ne.b)({textColor:S,pathColor:w,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10})),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"P"),"REPARATION")))))))))))}var ke=t(33),Pe=t(30),je=t.n(Pe);t(78),t(85);function Te(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function Ae(){var e=Object(r.useState)(Te()),a=Object(o.a)(e,2),t=a[0],n=a[1];return Object(r.useEffect)((function(){function e(){n(Te())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t}var xe=Object(r.createContext)(),Ie=function(e){var a=Object(r.useState)([]),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)([]),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)([]),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)([]),v=Object(o.a)(b,2),y=v[0],f=v[1];Object(r.useEffect)((function(){e.dailyWaste&&(m(e.dailyWaste.coverWaste),h(e.dailyWaste.prepWaste),f(e.dailyWaste.spoilageWaste),l(e.dailyWaste.totalWaste))}),[e.siteName,e.dailyWaste]);return n.a.createElement(xe.Provider,{value:{coverWaste:d,prepWaste:g,spoilageWaste:y,getIndexesForBackgroundColours:function(e){var a=e.dailyCoverWastes,t=e.dailyPeparationWastes,r=e.dailySpoliageWastes,n=[],s=[],l=[];return void 0!==d&&(d.map((function(e,t){return ye(e)>=a&&n.push(t),""})),g.map((function(e,a){return ye(e)>=t&&l.push(a),""})),y.map((function(e,a){return ye(e)>=r&&s.push(a),""}))),{coverWasteOverTargetIndexArray:n,spoilageWasteOverTargetIndexArray:s,prepWasteOverTargetIndexArray:l}},dailyWasteData:s}},e.children)},De=Object(r.createContext)(),Be=function(e){var a=Object(r.useState)(!1),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=n.a.useState("production"),p=Object(o.a)(u,2),g=p[0],h=p[1],b=n.a.useState([]),v=Object(o.a)(b,2),y=v[0],f=v[1],E=n.a.useState(!1),_=Object(o.a)(E,2),w=_[0],S=_[1],N=n.a.useState([]),C=Object(o.a)(N,2),O=C[0],W=C[1],k=n.a.useState([]),P=Object(o.a)(k,2),j=P[0],T=P[1],A=n.a.useState([]),x=Object(o.a)(A,2),I=x[0],D=x[1],B=n.a.useState([]),M=Object(o.a)(B,2),R=M[0],F=M[1],L=n.a.useState(!0),H=Object(o.a)(L,2),V=H[0],Y=H[1];Object(r.useEffect)((function(){e.hourlyWaste&&(F(e.hourlyWaste),U(e.hourlyWaste))}),[e.siteName,e.hourlyWaste]);var U=function(e){if(e){var a=e.index;m(a);var t=e.date;l(t);var r=e.hourlyWaste?e.hourlyWaste:[];if(r.length>0){var n=r[a];if(n){W(n.data.coverWaste),T(n.data.preparationWaste),D(n.data.spoilageWaste);var s=[];n.data.preparationWaste.map((function(e){var a=ye(e);return s.push(a),""})),f(s),S(!0),h("production")}}}},z=function(e){var a=[];e.map((function(e){var t=ye(e);return a.push(t),""})),f(a)};return n.a.createElement(De.Provider,{value:{index:d,hourlyWasteValues:y,hourlyWasteDate:s,clickOnHourlyBarChart:w,hourlyWasteSelector:g,hourlyCoverWasteData:O,hourlyPreparationWasteData:j,hourlySpoilageWasteData:I,showCoverWasteLabelRed:function(e,a,t,r){if(t){var n=[];return a.map((function(e){return n.push(2.775*e),""})),!!n.map((function(e){return ve(e)>=r})).includes(!0)}return!!a.map((function(a){return ve(a)>=e})).includes(!0)},handleHourlyWasteCategory:function(e){var a=e.target.id;"C"===a?(z(O),h("cover")):"S"===a?(z(I),h("spoliage")):"P"===a&&(z(j),h("production")),console.log("handleHourlyWasteCategory HERE"),Y(!1)},allHourlyWasteData:R,handleHourlyWaste:U,getIndexesForBackgroundColours:function(e,a,t){var r=t.hourlyCoverWastesCap,n=t.hourlyPeparationWastesCap,s=t.hourlySpoliageWastesCap,l=[],o=[],c=[];return O&&(O.map((function(e,a){return ye(e)>=r&&l.push(a),""})),j.map((function(e,a){return ye(e)>=n&&c.push(a),""})),I.map((function(e,a){return ye(e)>=s&&o.push(a),""}))),{coverWasteOverTargetIndexArray:l,spoilageWasteOverTargetIndexArray:o,prepWasteOverTargetIndexArray:c}},showTooltip:V}},e.children)},Me=Object(r.createContext)(),Re=function(e){var a=Object(r.useState)({coversInput:[0,0,0,0,0,0,0],checkBox:[0,0,0,0,0,0,0],Date:"",weekOfYear:""}),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)({salesInput:[0,0,0,0,0,0,0],Date:"",weekOfYear:""}),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)(""),v=Object(o.a)(b,2),y=v[0],f=v[1],E=Object(r.useState)(""),_=Object(o.a)(E,2),w=_[0],S=_[1],N=Object(r.useState)(7),C=Object(o.a)(N,2),O=C[0],W=C[1],k=Object(r.useState)(7),P=Object(o.a)(k,2),j=P[0],T=P[1];Object(r.useEffect)((function(){h(e.thisWeekSalesInput[0]),void 0!==e.thisWeekCoverInputs[0]&&l(e.thisWeekCoverInputs[0]),m(e.selectedSiteValueID),f(e.companyName),S(e.companyId),W(e.allWeekSalesInput),T(e.allWeekCoverInput)}),[e.companyId,e.companyName,e.selectedSiteValueID,e.thisWeekCoverInputs,e.thisWeekSalesInput,e.allWeekSalesInput,e.allWeekCoverInput]);return n.a.createElement(Me.Provider,{value:{thisWeekCoverInputs:s,selectedSiteValueID:d,thisWeekSalesInputs:g,sendDataToDatabase:function(a,t){switch(a){case"COVER INPUTS":V(t).then((function(){e.updateValues("COVER INPUTS")}));break;case"SALES INPUTS":Y(t).then((function(){e.updateValues("SALES INPUTS")}))}},companyName:y,companyID:w,allWeekSalesInput:O,allWeekCoverInput:j,filterMenuItems:function(e,a){var t=O[e],r=j[e];"sales-inputs"===a?h(t):"cover-inputs"===a&&l(r)}}},e.children)};function Fe(e){je.a.defaults.global.defaultFontFamily="CooperHewitt-Book";var a=Object(r.useContext)(Me).thisWeekCoverInputs,t=Object(r.useContext)(le),s=t.dailyCoverWastes,l=t.dailySpoliageWastes,c=t.dailyPeparationWastes,i={dailyCoverWastes:s,dailySpoliageWastes:l,dailyPeparationWastes:c},d={},m=Object(r.useContext)(xe),u=m.coverWaste,p=m.prepWaste,g=m.spoilageWaste,h=m.getIndexesForBackgroundColours,b=m.dailyWasteData,v=Object(r.useContext)(De),y=v.allHourlyWasteData,f=v.handleHourlyWaste,E=v.index,_=Object(r.useState)([]),w=Object(o.a)(_,2),S=w[0],N=w[1],C=Object(r.useState)([]),O=Object(o.a)(C,2),W=O[0],k=O[1],P=Object(r.useState)([]),j=Object(o.a)(P,2),T=j[0],A=j[1],x=Object(r.useState)([]),I=Object(o.a)(x,2),D=I[0],B=I[1],M=Object(r.useState)([]),R=Object(o.a)(M,2),F=R[0],L=R[1],H=Object(r.useState)([]),V=Object(o.a)(H,2),Y=V[0],U=V[1],z=Object(r.useState)([]),G=Object(o.a)(z,2),q=G[0],K=G[1],J=Object(r.useState)([]),Z=Object(o.a)(J,2),X=Z[0],$=Z[1],Q=s||0,ee=l||0,ae=c||0,te=JSON.parse(localStorage.getItem("formatedXaxis"))||[],re=JSON.parse(localStorage.getItem("dailyChartXaxis"))||[],ne=Object(r.useState)([0,0,0,0,0,0,0]),se=Object(o.a)(ne,2),oe=se[0],ce=se[1];Object(r.useEffect)((function(){console.log("thisWeekCoverInputs",a),console.log("thisWeekCoverInputs",a.checkBox),void 0!==a.checkBox&&ce(a.checkBox),N(u),k(p),A(g),B(b);var e=ye(2.775*(Q+ae+ee));L(e);var t=ye(2.775*Q),r=ye(2.775*ae),n=ye(2.775*ee);U(t),K(r),$(n)}),[p,u,g,b,e]);var ie=["rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.4)","rgba(255, 255, 255, 0.4)"];console.log("checkbox",oe),oe.map((function(e,a){1===e&&(ie[a]="rgba(242, 240, 196, 0.4)")})),(E>0||0===E)&&(ie[E]="rgba(106, 217, 123, 0.2)");var de,me=["rgb(140, 112, 140)","rgb(140, 112, 140)","rgb(140, 112, 140)","rgb(140, 112, 140)","rgb(140, 112, 140)","rgb(140, 112, 140)","rgb(140, 112, 140)"],ue=["#ff8c00","#ff8c00","#ff8c00","#ff8c00","#ff8c00","#ff8c00","#ff8c00"],pe=["rgb(133, 165, 101)","rgb(133, 165, 101)","rgb(133, 165, 101)","rgb(133, 165, 101)","rgb(133, 165, 101)","rgb(133, 165, 101)","rgb(133, 165, 101)"];i&&(de=h(i)),de&&(de.coverWasteOverTargetIndexArray.map((function(e){return me[e]="rgba(255, 0, 0, 0.9)",""})),de.spoilageWasteOverTargetIndexArray.map((function(e){return ue[e]="rgba(255, 0, 0, 0.9)",""})),de.prepWasteOverTargetIndexArray.map((function(e){return pe[e]="rgba(255, 0, 0, 0.9)",""})));var ge=_e(re),he=120,be=400,ve=10,fe=12;return Ae().width<=700&&(be=260,he=179,fe=8,ve=4.8),n.a.createElement("div",{className:e.hideReport?"dailyWasteChart displayNone":"dailyWasteChart"},n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"DAILY WASTE"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){return e.handleChangeForCheckedAndAccordion(!e.showDailyChart,"dailyChartSwitch")}},e.showDailyChart?"X":"| | | "))),n.a.createElement(Oe,{open:e.showDailyChart},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem addHeightOfFithyVh":"originalTheme__reportBackgroundColor addPaddingOfHalveRem dailyWasteChart__height"},n.a.createElement("div",{className:"report-subtitle"},e.siteName),n.a.createElement("div",{className:"dailyWasteChart__title--style"},n.a.createElement("div",{className:"dailyWasteChart--dateStyling"},ge),n.a.createElement("div",{className:"dailyWasteChart--titleWrapper"},n.a.createElement("div",null,n.a.createElement("div",{className:"section-title"},"DAILY WASTE",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?"(\xa3)":"(Kg)")),n.a.createElement("div",{className:"dailyWasteChart__instructions"},"Click on the bars for waste in 24hrs"))),n.a.createElement("div",{className:"dailyWasteChart__cappingWrapper"},n.a.createElement("div",{className:"capping__text applyPurpleColor cooperHewittBold capping__flex"},"Total",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?ye(Y+X+q):ye(Q+ee+ae),n.a.createElement("div",{className:"cooperHewittBold capping__headingCappingStyling"},"Capping ="))),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"C"),n.a.createElement("div",{id:1,key:0},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},e.showPounds?ye(Y):ye(Q))),n.a.createElement("div",null,"+"),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"S"),n.a.createElement("div",{id:2,key:1},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},e.showPounds?ye(X):ye(ee))),n.a.createElement("div",null,"+"),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"P"),n.a.createElement("div",{id:3,key:2},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},e.showPounds?ye(q):ye(ae))))),n.a.createElement("div",{className:"dailyWasteChart__wrapperPosition"},n.a.createElement("div",{className:"dailyWasteChart__chartPosition1"},n.a.createElement(ke.a,{data:{labels:["C  S  P","C  S  P","C  S  P","C  S  P","C  S  P","C  S  P","C  S  P"],datasets:[{label:"cover waste",data:e.showPounds?S.map((function(e){return(2.775*e).toFixed(0)})):S,fill:!1,backgroundColor:me.slice(),minBarLength:.3,barPercentage:.3,categoryPercentage:.7},{label:"spoliage waste",data:e.showPounds?T.map((function(e){return(2.775*e).toFixed(0)})):T,fill:!1,backgroundColor:ue.slice(),minBarLength:.3,barPercentage:.3,categoryPercentage:.7},{label:"preparation waste",data:e.showPounds?W.map((function(e){return(2.775*e).toFixed(0)})):W,fill:!1,backgroundColor:pe,minBarLength:.3,barPercentage:.3,categoryPercentage:.7}]},width:be,height:he,options:{responsive:!0,maintainAspectRatio:!0,legend:{display:!1},scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:"rgb(133, 165, 101, 0)"}}],yAxes:[{gridLines:{display:!1},display:!1,ticks:{beginAtZero:!0}}]},plugins:{datalabels:{anchor:"start",align:"bottom",display:!0,backgroundColor:null,borderColor:null,borderRadius:4,borderWidth:1,font:{size:ve,weight:600},offset:4,padding:0,color:function(a){var t=a.dataIndex,r=parseInt(a.dataset.data[t]);if("cover waste"===a.dataset.label){var n=Q;return r>=(e.showPounds?Y:n)?"rgba(255, 0, 0, 0.9)":0===r?"rgba(255, 255, 255, 0)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}if("preparation waste"===a.dataset.label){var s=ae;return r>=(e.showPounds?q:s)?"rgba(255, 0, 0, 0.9)":0===r?"rgba(255, 255, 255, 0)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}if("spoliage waste"===a.dataset.label){var l=ee;return r>=(e.showPounds?X:l)?"rgba(255, 0, 0, 0.9)":0===r?"rgba(255, 255, 255, 0)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}},formatter:function(a,t){if("cover waste"===t.dataset.label){var r=Q;if(a>=(e.showPounds?Y:r))return"".concat(a)}else if("preparation waste"===t.dataset.label){var n=ae;if(a>=(e.showPounds?q:n))return"".concat(a)}else if("spoliage waste"===t.dataset.label){var s=ee;if(a>=(e.showPounds?X:s))return"".concat(a)}}}}}})),n.a.createElement("div",{className:"dailyWasteChart__chartPosition"},n.a.createElement(ke.a,{ref:function(e){return d=e},data:{labels:["mon","tues","wed","thurs","fri","sat","sun"],datasets:[{label:"Total wastes",siteName:e.siteName,dates:re,data:e.showPounds?D.map((function(e){return(2.775*e).toFixed(0)})):D,fill:!0,backgroundColor:ie.slice(),barPercentage:.9,categoryPercentage:1,ticks:{fontColor:"rgba(255,255,255, 0.1)"},hoverBackgroundColor:["rgba(56, 166, 126, 0.5)","rgba(56, 166, 126, 0.5)","rgba(56, 166, 126, 0.5)","rgba(56, 166, 126, 0.5)","rgba(56, 166, 126, 0.5)","rgba(56, 166, 126, 0.5)","rgba(56, 166, 126, 0.5)"]}]},width:be,height:he,options:{responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!1},legend:{display:!1},onClick:function(e,a){var t;a.length&&a[0]._chart.config.data.datasets[0].data.forEach((function(e,r){r===a[0]._index&&(t=r)})),d.chartInstance.update();var r={hourlyWaste:y.hourlyWaste,index:t,date:a[0]._chart.config.data.datasets[0].dates[a[0]._index]};f(r)},scales:{xAxes:[{gridLines:{display:!1},display:!1,ticks:{fontColor:"rgba(255,255,255, 0.1)"}}],yAxes:[{display:!1,gridLines:{display:!1},ticks:{maxTicksLimit:1,max:1}}]},plugins:{datalabels:{color:function(a){var t=a.dataIndex,r=a.dataset.data[t],n=Q+ae+ee;return r>=(e.showPounds?F:n)?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"},anchor:"end",align:"start",clamp:!0,display:!0,borderColor:null,borderRadius:4,borderWidth:1,font:{size:fe,weight:600},offset:4,padding:0,formatter:function(a,t){var r=Q+ae+ee;if(a>=(e.showPounds?F:r)){var n=ye(a);return"".concat("WARNING"," \n      ").concat(n," ")}return a}}}}}),n.a.createElement("div",{className:"dailyWasteChart__dateLabel"},te.map((function(e,a){return n.a.createElement("div",{className:a===E?"applyCooperHewittBold applyGoldColor":"",key:a},e)}))),n.a.createElement("div",null,n.a.createElement("div",{className:"dailyWasteChart__dateLabel__CSP"},n.a.createElement("div",{className:"dailyWasteChart__dateLabel__CSP__coverwastesSquare"}),"COVER",n.a.createElement("div",{className:"dailyWasteChart__dateLabel__CSP__spoliageSquare"}),"SPOILAGE",n.a.createElement("div",{className:"dailyWasteChart__dateLabel__CSP__preparationSquare"}),"PREPARATION")),n.a.createElement("div",{className:"applyGoldColor",style:{display:"flex",justifyContent:"center"}},"The yellow bar represents a special event on the day"))))))}var Le=t(576);function He(e){var a,t,s,l,c=n.a.useState(!0),i=Object(o.a)(c,2),d=i[0],m=i[1],g=Object(r.useContext)(De),h=g.hourlyWasteValues,b=g.hourlyWasteSelector,v=g.hourlyCoverWasteData,y=g.hourlyPreparationWasteData,f=g.hourlySpoilageWasteData,E=g.showCoverWasteLabelRed,_=g.handleHourlyWasteCategory,w=g.hourlyWasteDate,S=g.clickOnHourlyBarChart,N=g.getIndexesForBackgroundColours,C=g.showTooltip,O=Object(r.useContext)(le),W=O.hourlyCoverWastes,k=O.hourlySpoliageWastes,P=O.hourlyPeparationWastes,j=Ae().width,T=129,A=400,x=12,I=Object(r.useState)({coverWaste:!1,spoliageWaste:!1,productionWaste:!0}),D=Object(o.a)(I,2),B=D[0],M=D[1],R=Object(r.useState)([]),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)([]),Y=Object(o.a)(V,2),U=Y[0],z=Y[1],G=Object(r.useState)([]),q=Object(o.a)(G,2),K=q[0],J=q[1],Z=W||0,X=k||0,$=P||0,Q=Object(r.useState)($),ee=Object(o.a)(Q,2),ae=ee[0],te=ee[1],re=Object(r.useState)([]),ne=Object(o.a)(re,2),se=ne[0],oe=ne[1],ce=Object(r.useState)({activeObject:{id:2,val:b,name:"PREPARATION WASTE"},objects:[{id:0,val:"C",name:"COVER WASTE"},{id:1,val:"S",name:"SPOILAGE WASTE"},{id:2,val:"P",name:"PREPARATION WASTE"}]}),de=Object(o.a)(ce,2),me=de[0],ue=de[1],pe=["rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)"],ge={dailyWasteCappingInPounds:L,prepWasteCappingInPounds:U,spoilageWasteCappingInPounds:K},he={hourlyCoverWastesCap:Z,hourlySpoliageWastesCap:X,hourlyPeparationWastesCap:$};(l=N(e.showPounds,ge,he))&&("PREPARATION WASTE"===me.activeObject.name?l.prepWasteOverTargetIndexArray.map((function(e){return pe[e]="rgba(255, 0, 0, 0.9)",""})):"COVER WASTE"===me.activeObject.name?l.coverWasteOverTargetIndexArray.map((function(e){return pe[e]="rgba(255, 0, 0, 0.9)",""})):"SPOILAGE WASTE"===me.activeObject.name&&l.spoilageWasteOverTargetIndexArray.map((function(e){return pe[e]="rgba(255, 0, 0, 0.9)",""}))),Object(r.useEffect)((function(){var a=ye(2.775*W),t=ye(2.775*P),r=ye(2.775*k);H(a),z(t),J(r),fe(b),oe(h),e.showHourlyChart&&C?m(!0):m(!1)}),[$,Z,X,b,h,e]),j<=700&&(A=400,T=200,x=12*.6);var be=function(e){var a=Math.max.apply(Math,e);return Math.max.apply(Math,e)+a}(se),ve=2.775*be;function fe(e){switch(e){case"cover":M({coverWaste:!0,spoliageWaste:!1,productionWaste:!1}),ue(Object(p.a)({},me,{activeObject:me.objects[0]})),te(Z);break;case"production":M({coverWaste:!1,spoliageWaste:!1,productionWaste:!0}),ue(Object(p.a)({},me,{activeObject:me.objects[2]})),te($);break;case"spoliage":M({coverWaste:!1,spoliageWaste:!0,productionWaste:!1}),ue(Object(p.a)({},me,{activeObject:me.objects[1]})),te(X)}}var Ee,_e=E(Z,v,e.showPounds,L),we=E($,y,e.showPounds,U),Se=E(X,f,e.showPounds,K);return Ee=e.showDarkTheme?"rgb(255, 231, 227)":"rgb(133, 165, 101)",n.a.createElement("div",{className:e.hideReport?"HourWasteChart displayNone":"HourWasteChart"},n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"HOURLY WASTE"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){return e.handleChangeForCheckedAndAccordion(!e.showHourlyChart,"hourlyChartSwitch")}},e.showHourlyChart?"X":"| | | "))),n.a.createElement(Oe,{open:e.showHourlyChart},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"HourWasteChart--spacing"},n.a.createElement("div",{className:"report-subtitle"},e.siteName),n.a.createElement("p",null," ",n.a.createElement("b",{className:"HourWasteChart--dateStyling"}," ",function(e){var a=ie()(e,"YYYY-MM-DD");return a.format("dddd").toUpperCase().substr(0,3)+" "+a.format("Do")}(w)," "))),n.a.createElement("div",{className:"HourWasteChart__headingWrapper"},n.a.createElement("div",{className:"section-title center"},"WASTE BY TIME OF DAY",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?"(\xa3)":"(Kg)"))),n.a.createElement("div",{className:"HourWasteChart--spacing--secondRow"},n.a.createElement("div",{className:"HourWasteChart--spacing--secondRow--csp"},S&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:B.coverWaste?"active":"inactive",id:0,onClick:function(){fe("cover")}},n.a.createElement(Le.a,{open:d,onClose:function(){return m(!1)},title:"click on C, S or P waste stream",arrow:!0},n.a.createElement("h2",(a={id:"C",onClick:_,className:"HourWasteChart--CSPlabel"},Object(u.a)(a,"className",B.coverWaste?"reduceOpacity":""),Object(u.a)(a,"className",_e?"showRedColor":""),a),"C"))),n.a.createElement("div",{className:B.spoliageWaste?"active":"inactive",id:1,onClick:function(){fe("spoliage")}},n.a.createElement(Le.a,{open:d,onClose:function(){return m(!1)},arrow:!0},n.a.createElement("h2",(t={id:"S",onClick:_,className:"HourWasteChart--CSPlabel"},Object(u.a)(t,"className",B.spoliageWaste?"reduceOpacity":""),Object(u.a)(t,"className",Se?"showRedColor":""),t),"S"))),n.a.createElement("div",{className:B.productionWaste?"active":"inactive",id:2,onClick:function(){fe("production")}},n.a.createElement(Le.a,{open:d,onClose:function(){return m(!1)},arrow:!0},n.a.createElement("h2",(s={id:"P",onClick:_,className:"HourWasteChart--CSPlabel"},Object(u.a)(s,"className",B.productionWaste?"reduceOpacity":""),Object(u.a)(s,"className",we?"showRedColor":""),s),"P"))))),n.a.createElement("p",{className:"HourWasteChart--CSPheadingSize"},me.activeObject.name),n.a.createElement("div",{className:"capping__hourWasteChartWrapper"},n.a.createElement("b",{className:"capping"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},"Cap"),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft"},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__selectedLabelColor cooperHewittBold":"applyPurpleColor cooperHewittBold"}," C")),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},e.showPounds?L:ye(Z)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor"},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__selectedLabelColor cooperHewittBold":"applyPurpleColor cooperHewittBold"}," S")),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},e.showPounds?K:ye(X)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__selectedLabelColor cooperHewittBold":"applyPurpleColor cooperHewittBold"}," P")),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},e.showPounds?U:ye($))))),n.a.createElement("div",null,n.a.createElement("div",null,n.a.createElement(ke.a,{data:{labels:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23],datasets:[{data:e.showPounds?se.map((function(e){return ye(2.775*e)})):se,fill:!1,backgroundColor:pe,minBarLength:.3,barPercentage:.3,categoryPercentage:.7}]},width:A,height:T,options:{responsive:!0,maintainAspectRatio:!0,scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:Ee,fontSize:x}}],yAxes:[{gridLines:{display:!1},ticks:{maxTicksLimit:4,display:!1,beginAtZero:!0,max:e.showPounds?ve:Math.round(be)}}]},plugins:{datalabels:{display:!0,anchor:"end",align:"end",clamp:!0,backgroundColor:null,borderColor:null,borderRadius:4,borderWidth:1,font:{size:x,weight:900},offset:4,padding:0,color:function(a){var t,r=a.dataIndex,n=a.dataset.data[r];return e.showPounds?(t=parseInt(2.775*ae),parseInt(n)>=t?"rgba(255, 0, 0, 0.9)":"rgba(133, 165, 101, 1)"):parseInt(n)>=parseInt(ae)?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}}}}}))),n.a.createElement("div",{className:"weeklyWaste__message"},"(summer and winter time are not change on the day but on the month)"))))}je.a.defaults.global.defaultFontFamily="CooperHewitt-Book",je.a.defaults.global.legend.display=!1,je.a.defaults.global.hover.intersect=!1,je.a.defaults.global.tooltips.enabled=!1;var Ve=Object(r.createContext)(),Ye=function(e){var a=Object(r.useState)(0),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)(0),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)(""),v=Object(o.a)(b,2),y=v[0],f=v[1];return Object(r.useEffect)((function(){e.siteName&&f(e.siteName),e.weeklyWaste&&(l(e.weeklyWaste[0][0].coverWaste[0]),m(e.weeklyWaste[0][0].preparationWaste[0]),h(e.weeklyWaste[0][0].spoilageWaste[0]))}),[e.weeklyWaste,e.siteName]),n.a.createElement(Ve.Provider,{value:{coverWaste:s,productionWaste:d,spoliageWaste:g,siteName:y}},e.children)};var Ue=function(e){var a=e.showDarkTheme,t=e.showWeeklyChart,s=e.handleChangeForCheckedAndAccordion,l=e.hideReport,o=Object(r.useContext)(le),c=o.weeklyCoverWastes,i=o.weeklySpoliageWastes,d=o.weeklyPeparationWastes,m=o.showPounds,u=Object(r.useContext)(Ve),p=u.coverWaste,g=u.productionWaste,h=u.spoliageWaste,b=u.siteName,v=0,y=0,f=0;m?(v=ye(2.775*p),f=ye(2.775*h),y=ye(2.775*g)):(v=p,f=h,y=g);var E,_,w,S,N=parseInt(v)+parseInt(f)+parseInt(y),C=0,O=0,W=0;m?(C=2.775*c,O=2.775*i,W=2.775*d):(C=c,O=i,W=d),E=isNaN(v/C*100)?100:v/C*100,_=isNaN(f/O*100)?100:f/O*100,w=isNaN(y/W*100)?100:y/W*100;var k,P,j,T,A=ye(C+O+W);S=isNaN(N/A*100)?100:N/A*100,k=N>=A?"rgba(255, 0, 0, 0.9)":0===N?"rgb(163, 181, 44)":"rgb(47, 67, 30)",P=v>=C?"rgba(255, 0, 0, 0.9)":0===v?"rgb(163, 181, 44)":"rgb(47, 67, 30)",j=f>=O?"rgba(255, 0, 0, 0.9)":0===f?"rgb(163, 181, 44)":"rgb(47, 67, 30)",T=y>=W?"rgba(255, 0, 0, 0.9)":0===y?"rgb(163, 181, 44)":"rgb(47, 67, 30)";var x,I=function(e){var a=localStorage.getItem(e);return a?JSON.parse(a):[]}("dailyChartXaxis"),D=_e(I);return x=a?"rgb(255, 231, 227)":"rgb(140, 112, 140)",n.a.createElement("div",{className:l?"dashboard__weeklyWaste displayNone":"dashboard__weeklyWaste"},n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"WEEKLY WASTE"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){return s(!t,"weeklyChartSwitch")}},t?"X":"| | | "))),n.a.createElement(Oe,{open:t},n.a.createElement("div",{className:a?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"addPaddingOfHalveRem"},n.a.createElement("div",{className:"dashboard__overviewSitesReportHeading"},n.a.createElement("div",{className:"report-subtitle"},b)),n.a.createElement("div",{className:"weeklyWaste__headingWrapper"},n.a.createElement("div",{className:"section-title center"},"WEEKLY WASTE",n.a.createElement("div",{className:"applyMarginRightAndLeft"},m?"(\xa3)":"(Kg)"))),n.a.createElement("div",{className:"dashboard__overviewSitesReport__capping",style:{justifyContent:"space-evenly"}},n.a.createElement("div",{className:"capping__weeklyWasteChart leftPadding"},n.a.createElement("div",{className:"capping__text applyPurpleColor cooperHewittBold capping__flex"},"Total",n.a.createElement("div",{className:a?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(C+O+W))),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"capping__text applyPurpleColor cooperHewittBold"},"="),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"C"),n.a.createElement("div",{className:a?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(C)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"S"),n.a.createElement("div",{className:a?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(O)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},"P"),n.a.createElement("div",{className:a?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(W))))),n.a.createElement("div",{className:"dashboard__overviewSitesReportProgressBarWrapper"},n.a.createElement("div",{className:"dashboard__progressBar"},n.a.createElement("div",{className:"dashboard__weeklyWaste__progressBarWrapper"},n.a.createElement("div",{className:"dashboard__progressBar__size"},N>=A?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement("div",{className:"dashboard__progressBar__wrapper"},n.a.createElement(Ne.a,{value:S,text:"".concat(N),styles:Object(Ne.b)({textColor:x,pathColor:k,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("div",{className:"foodWasteTrackingProgress__date"},D))))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"="),n.a.createElement("div",{className:"dashboard__progressBar__size"},v>=C?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement("div",{className:"dashboard__progressBar__wrapper"},n.a.createElement(Ne.a,{value:E,text:"".concat(v),styles:Object(Ne.b)({textColor:x,pathColor:P,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"C"),"OVER WASTE")))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"+"),n.a.createElement("div",{className:"dashboard__progressBar__size"},f>=O?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement(Ne.a,{value:_,text:"".concat(f),styles:Object(Ne.b)({textColor:x,pathColor:j,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"S"),"POILAGE"))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"+"),n.a.createElement("div",{className:"dashboard__progressBar__size"},y>=W?n.a.createElement("div",{className:"dashboard__progressBar__warningText"},"WARNING!"):n.a.createElement("div",{style:{marginTop:"1rem"}}),n.a.createElement(Ne.a,{value:w,text:"".concat(y),styles:Object(Ne.b)({textColor:x,pathColor:T,trailColor:"rgb(163, 181, 44)",textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"P"),"REPARATION"))))),n.a.createElement("div",{className:"weeklyWaste__message"},"(Weekly waste is updated 11pm everyday)")))))},ze=Object(r.createContext)(),Ge=function(e){var a=[],t=[],s=Object(r.useState)(0),l=Object(o.a)(s,2),c=l[0],i=l[1],d=Object(r.useState)(0),m=Object(o.a)(d,2),u=m[0],p=m[1],g=Object(r.useState)(0),h=Object(o.a)(g,2),b=h[0],v=h[1],y=Object(r.useState)(0),f=Object(o.a)(y,2),E=f[0],_=f[1],w=Object(r.useState)(0),S=Object(o.a)(w,2),N=S[0],C=S[1],O=Object(r.useState)(0),W=Object(o.a)(O,2),k=W[0],P=W[1],j=Object(r.useState)(0),T=Object(o.a)(j,2),A=T[0],x=T[1],I=Object(r.useState)(0),D=Object(o.a)(I,2),B=D[0],M=D[1],R=Object(r.useState)(0),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)(0),Y=Object(o.a)(V,2),U=Y[0],z=Y[1],G=Object(r.useState)(0),q=Object(o.a)(G,2),K=q[0],J=q[1],Z=Object(r.useState)(0),X=Object(o.a)(Z,2),$=X[0],Q=X[1],ee=Object(r.useState)(0),ae=Object(o.a)(ee,2),te=ae[0],re=ae[1],ne=Object(r.useState)(0),se=Object(o.a)(ne,2),le=se[0],oe=se[1],ce=Object(r.useState)(0),ie=Object(o.a)(ce,2),de=ie[0],me=ie[1],ue=n.a.useState(!0),pe=Object(o.a)(ue,2),ge=pe[0],he=pe[1],be=[{value:te,colors:[de,"rgb(15, 128, 140)"]},{value:le,colors:[de,"rgb(15, 128, 140)"]}];Object(r.useEffect)((function(){e.weeklyTrend&&(i(e.weeklyTrend[0].coverWaste),p(e.weeklyTrend[0].prepWaste),v(e.weeklyTrend[0].spoilageWaste),_(e.weeklyTrend[0].totalWaste),ve(e.weeklyWasteValuesForCurrentWeekAndLastWeek))}),[e.siteName,e.weeklyWasteTrend,e.weeklyTrend,e.weeklyWasteValuesForCurrentWeekAndLastWeek]);var ve=function(e){if(console.log("weeklyWaste",e),e){C(e.lastWeek[0].data.coverWaste[0]),P(e.lastWeek[0].data.preparationWaste[0]),x(e.lastWeek[0].data.spoilageWaste[0]),M(e.lastWeek[0].data.coverWaste[0]+e.lastWeek[0].data.preparationWaste[0]+e.lastWeek[0].data.spoilageWaste[0]);var a=e.lastWeek[0].data.coverWaste[0]+e.lastWeek[0].data.preparationWaste[0]+e.lastWeek[0].data.spoilageWaste[0],t=e.currentWeek[0][0].coverWaste[0]+e.currentWeek[0][0].preparationWaste[0]+e.currentWeek[0][0].spoilageWaste[0];oe(a),re(t),H(e.currentWeek[0][0].coverWaste[0]),z(e.currentWeek[0][0].preparationWaste[0]),J(e.currentWeek[0][0].spoilageWaste[0]),Q(e.currentWeek[0][0].coverWaste[0]+e.currentWeek[0][0].preparationWaste[0]+e.currentWeek[0][0].spoilageWaste[0]),me(a-t>0?"rgb(188, 242, 107)":"rgba(255, 0, 0, 0.9)")}};return n.a.createElement(ze.Provider,{value:{coverWaste:c,preparationWaste:u,spoilageWaste:b,totalWaste:E,setDateRange:function(){if(a.length>0&&t.length>0)return{lastWeek:t[0].data.Date,thisWeek:a[0].data.Date}},weeklyWasteValuesForCurrentWeekAndLastWeek:be,handleWeeklyTrendValues:function(e){var a=e.target.id;"C"===a?(oe(N),re(L)):"S"===a?(oe(A),re(K)):"P"===a?(oe(k),re(U)):"A"===a&&(oe(B),re($)),he(!1)},showTooltip:ge}},e.children)},qe=t(29),Ke=t(40);function Je(){var e=Object(qe.a)(["\n  width: 100%;\n  height: 5px;\n  background-color: grey;\n"]);return Je=function(){return e},e}function Ze(){var e=Object(qe.a)(["\n  height: ","%;\n  background-image: linear-gradient(\n    to bottom,\n    ",",\n    ","\n  );\n  ",";\n"]);return Ze=function(){return e},e}function Xe(){var e=Object(qe.a)(["\n  font-size: 1.5rem;\n  text-align: center;\n  color: ",";\n"]);return Xe=function(){return e},e}function $e(){var e=Object(qe.a)(["\n  margin-top: 10px;\n  width: 56px;\n  &:hover {\n    opacity: 0.8;\n  }\n  @media (max-width: 420px) {\n    width: 34px;\n  }\n"]);return $e=function(){return e},e}function Qe(){var e=Object(qe.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n"]);return Qe=function(){return e},e}function ea(){var e=Object(qe.a)(["\n  display: flex;\n  justify-content: center;\n  width: 100%;\n  height: 1000%;\n"]);return ea=function(){return e},e}function aa(){var e=Object(qe.a)(["\n  margin: 0px auto;\n  max-width: 500px;\n  height: 200px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]);return aa=function(){return e},e}var ta=Ke.b.div(aa()),ra=Ke.b.div(ea()),na=Ke.b.div(Qe()),sa=Object(Ke.a)($e()),la=Ke.b.span(Xe(),(function(e){return e.color})),oa=Ke.b.div(Ze(),(function(e){return e.height}),(function(e){return e.colors[0]}),(function(e){return e.colors[0]}),sa),ca=Ke.b.div(Je());function ia(e){return n.a.createElement(ta,null,n.a.createElement(ra,null,e.data.map((function(a,t){var r=a.value,s=a.colors,l=r/1e3*100;return n.a.createElement(na,{key:t},n.a.createElement(la,{color:s[1]},e.showPounds?"\xa3"+(2.5*r).toFixed(0):r.toFixed(2)+"kg"),n.a.createElement(oa,{height:l,colors:s}))}))),n.a.createElement(ca,null))}var da=function(e){var a,t,s,l,c=e.siteName,i=e.showPounds,d=e.setShowWeeklyTrendChart,m=e.showWeeklyTrendChart,u=e.showDarkTheme,g=e.hideReport,h=Object(r.useContext)(ze),b=h.setDateRange,v=h.coverWaste,y=h.preparationWaste,f=h.spoilageWaste,E=h.totalWaste,_=h.weeklyWasteValuesForCurrentWeekAndLastWeek,w=h.handleWeeklyTrendValues,S=h.showTooltip,N=n.a.useState(!0),C=Object(o.a)(N,2),O=C[0],W=C[1],k=function(e){if(void 0!==e){var a=ie()(e.lastWeek,"YYYY-MM-DD"),t=ie()(e.thisWeek,"YYYY-MM-DD"),r=a.format("MMMM").substr(0,3),n=t.format("MMMM").substr(0,3),s=new Date(a).getDate(),l=new Date(t),o=new Date(l.getTime()+5184e5).getDate();return"".concat(s," ").concat(r," to ").concat(o," ").concat(n," ")}}(b()),P=v,j=y,T=f;a=P>0?"rgba(255, 0, 0, 0.9)":0===P?"rgb(237, 242, 99)":"rgb(47, 67, 30)",s=j>0?"rgba(255, 0, 0, 0.9)":0===j?"rgb(237, 242, 99)":"rgb(47, 67, 30)",t=T>0?"rgba(255, 0, 0, 0.9)":0===T?"rgb(237, 242, 99)":"rgb(47, 67, 30)",l=u?"rgb(255, 231, 227)":"rgb(140, 112, 140)";var A=Object(r.useState)({activeObject:{id:3,name:"TOTAL WASTE"},objects:[{id:0,val:"C",name:"COVER WASTE"},{id:1,val:"S",name:"SPOILAGE WASTE"},{id:2,val:"P",name:"PREPARATION WASTE"},{id:3,val:"A",name:"TOTAL WASTE"}]}),x=Object(o.a)(A,2),I=x[0],D=x[1],B=Object(r.useState)({coverWaste:!1,spoliageWaste:!1,productionWaste:!1,allWaste:!0}),M=Object(o.a)(B,2),R=M[0],F=M[1];function L(e){switch(e){case"cover":F({coverWaste:!0,spoliageWaste:!1,productionWaste:!1,allWaste:!1}),D(Object(p.a)({},I,{activeObject:I.objects[0]}));break;case"production":F({coverWaste:!1,spoliageWaste:!1,productionWaste:!0,allWaste:!1}),D(Object(p.a)({},I,{activeObject:I.objects[2]}));break;case"spoliage":F({coverWaste:!1,spoliageWaste:!0,productionWaste:!1,allWaste:!1}),D(Object(p.a)({},I,{activeObject:I.objects[1]}));break;case"all":F({coverWaste:!1,spoliageWaste:!1,productionWaste:!1,allWaste:!0}),D(Object(p.a)({},I,{activeObject:I.objects[3]}))}}return Object(r.useEffect)((function(){W(!(!m||!S))}),[m,S]),n.a.createElement("div",{className:"weeklyWasteTrend"},!g&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"WEEKLY WASTE TREND"),n.a.createElement("div",{className:"container"},m?n.a.createElement("span",{onClick:function(){d(!m),Ee("showWeeklyTrendChart",!m)}},"X"):n.a.createElement("span",{onClick:function(){d(!m),Ee("showWeeklyTrendChart",!m)}}," | | | "))),n.a.createElement(Oe,{open:m},n.a.createElement("div",{className:u?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"dashboard__overviewSitesReportHeading"},n.a.createElement("div",{className:"report-subtitle"},c)),n.a.createElement("div",{className:"dashboard__overviewSitesReport__capping",style:{justifyContent:"space-evenly"}}),n.a.createElement("div",{className:"dashboard__overviewSitesReportProgressBarWrapper"},n.a.createElement("div",{className:"dashboard__progressBar"},n.a.createElement("div",{className:"dashboard__progressBar__one"},n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue__wrapper"},n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue"},n.a.createElement("div",{className:"weeklyWasteTrend--poundsKgsAndDateWrapper"},n.a.createElement("div",{className:"weeklyWasteTrend--totalWasteAndKgAndPounds"},n.a.createElement("div",{className:u?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor cooperHewittBold":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor cooperHewittBold"},i?"\xa3":""),n.a.createElement("div",{className:u?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor"},i?(2.775*E).toFixed(0):E),n.a.createElement("div",{className:u?"dashboard__progressBar__totalWasteValue--fontSize darkTheme__numberColor cooperHewittBold":"dashboard__progressBar__totalWasteValue--fontSize applyPurpleColor cooperHewittBold"},i?"":"Kg")),n.a.createElement("div",{className:"weeklyWasteTrend--dataRangeStyle applyCooperHewittBold"},k))),n.a.createElement("div",{className:"dashboard__progressBar__dataRange"})),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"=")),n.a.createElement("div",{className:"dashboard__progressBar__two"},n.a.createElement("div",{className:"dashboard__progressBar__size"},n.a.createElement("div",{className:"dashboard__progressBar__wrapper"},n.a.createElement(Ne.a,{value:0,text:i?(2.775*"".concat(P)).toFixed(0):"".concat(P),styles:Object(Ne.b)({textColor:l,pathColor:a,trailColor:a,textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"C"),"OVER WASTE")))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"+"),n.a.createElement("div",{className:"dashboard__progressBar__size"},n.a.createElement(Ne.a,{value:0,text:i?(2.775*"".concat(T)).toFixed(0):"".concat(T),styles:Object(Ne.b)({textColor:l,pathColor:t,trailColor:t,textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"S"),"POILAGE"))),n.a.createElement("div",{className:"dashboard__progressBar__totalWasteValue--icon"},"+"),n.a.createElement("div",{className:"dashboard__progressBar__size"},n.a.createElement(Ne.a,{value:0,text:i?(2.775*"".concat(j)).toFixed(0):"".concat(j),styles:Object(Ne.b)({textColor:l,pathColor:s,trailColor:s,textSize:"20px",strokeLinecap:"butt"}),strokeWidth:10}),n.a.createElement("div",{className:"dashboard__progressBar__text"},n.a.createElement("div",{className:"dashboard__progressBar__textSize"},n.a.createElement("b",null,"P"),"REPARATION"))))),n.a.createElement("div",{className:"weeklyWaste__message"},"(The difference between this and last week)"),n.a.createElement("div",{className:"weeklyWaste__message cooperHewittBold",style:{fontSize:"20px"}},"THIS WEEK","   ","VS","   ","LAST WEEK"),n.a.createElement(ia,{data:_,showPounds:i}),n.a.createElement("div",{style:{marginTop:"1rem"}},n.a.createElement("div",{className:"monthlyWasteChart__CspLabel",style:{width:"100%"}},n.a.createElement("div",{className:R.coverWaste?"active":"inactive",id:1,onClick:function(){L("cover")}},n.a.createElement(Le.a,{open:O,onClose:function(){return W(!1)},title:"click on C, S, P or All waste stream",arrow:!0},n.a.createElement("h2",{id:"C",onClick:w,className:R.coverWaste?"reduceOpacity":""},"C +"))),n.a.createElement("div",{className:R.spoliageWaste?"active":"inactive",id:1,onClick:function(){L("spoliage")}},n.a.createElement(Le.a,{open:O,onClose:function(){return W(!1)},arrow:!0},n.a.createElement("h2",{id:"S",onClick:w,className:R.spoliageWaste?"reduceOpacity":""},"S +"))),n.a.createElement("div",{className:R.productionWaste?"active":"inactive",id:1,onClick:function(){L("production")}},n.a.createElement(Le.a,{open:O,onClose:function(){return W(!1)},arrow:!0},n.a.createElement("h2",{id:"P",onClick:w,className:R.productionWaste?"reduceOpacity":""},"P ="))),n.a.createElement("div",{className:R.allWaste?"active":"inactive",id:1,onClick:function(){L("all")}},n.a.createElement("h2",{id:"A",onClick:w,className:R.allWaste?"reduceOpacity":""},"ALL")))))))))},ma=Object(r.createContext)(),ua=function(e){var a=n.a.useState(0),t=Object(o.a)(a,2),s=t[0],l=t[1],c=n.a.useState(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=n.a.useState(0),p=Object(o.a)(u,2),g=p[0],h=p[1],b=n.a.useState([0]),v=Object(o.a)(b,2),y=v[0],f=v[1],E=n.a.useState([0]),_=Object(o.a)(E,2),w=_[0],S=_[1],N=n.a.useState([0]),C=Object(o.a)(N,2),O=C[0],W=C[1],k=n.a.useState([0]),P=Object(o.a)(k,2),j=P[0],T=P[1],A=n.a.useState([0]),x=Object(o.a)(A,2),I=x[0],D=x[1],B=n.a.useState([0]),M=Object(o.a)(B,2),R=M[0],F=M[1],L=n.a.useState([0]),H=Object(o.a)(L,2),V=H[0],Y=H[1],U=n.a.useState([0]),z=Object(o.a)(U,2),G=z[0],q=z[1],K=n.a.useState("A"),J=Object(o.a)(K,2),Z=J[0],X=J[1],$=n.a.useState(!0),Q=Object(o.a)($,2),ee=Q[0],ae=Q[1];Object(r.useEffect)((function(){l(e.coverWasteInCurrentMonth),m(e.preparationWasteInCurrentMonth),h(e.spoilageWasteInCurrentMonth),f(e.currentMonthCoverWasteArray),S(e.currentMonthPrepWasteArray),W(e.currentMonthSpoilageWasteArray),T(e.coverMonthlyChanges),D(e.prepMonthlyChanges),F(e.spoilageMonthlyChanges),Y(e.monthlyChanges),q(e.monthlyChanges)}),[e.siteName,e.coverWasteInCurrentMonth,e.preparationWasteInCurrentMonth,e.spoilageWasteInCurrentMonth,e.currentMonthCoverWasteArray,e.currentMonthPrepWasteArray,e.currentMonthSpoilageWasteArray,e.coverMonthlyChanges,e.prepMonthlyChanges,e.spoilageMonthlyChanges,e.monthlyChanges]);return n.a.createElement(ma.Provider,{value:{coverWasteInCurrentMonth:s,preparationWasteInCurrentMonth:d,spoilageWasteInCurrentMonth:g,currentMonthCoverWasteArray:y,currentMonthPrepWasteArray:w,currentMonthSpoilageWasteArray:O,coverMonthlyChanges:j,prepMonthlyChanges:I,spoilageMonthlyChanges:R,monthlyChanges:V,handleMonthlyValues:function(e){var a=e.target.id;"C"===a?(q(j),X("C")):"S"===a?(q(R),X("S")):"P"===a?(q(I),X("P")):"A"===a&&(q(V),X("A")),ae(!1)},displayMonthlyTrends:G,monthlySelectedValue:Z,showTooltip:ee}},e.children)};function pa(e){je.a.defaults.global.defaultFontFamily="CooperHewitt-Book";var a,t=n.a.useState(!0),s=Object(o.a)(t,2),l=s[0],c=s[1],i=Object(r.useContext)(ma),d=i.coverWasteInCurrentMonth,m=i.preparationWasteInCurrentMonth,u=i.spoilageWasteInCurrentMonth,g=i.currentMonthCoverWasteArray,h=i.currentMonthPrepWasteArray,b=i.currentMonthSpoilageWasteArray,v=i.monthlyChanges,y=i.handleMonthlyValues,f=i.displayMonthlyTrends,E=i.monthlySelectedValue,_=i.showTooltip,w=n.a.useState([0]),S=Object(o.a)(w,2),N=S[0],C=S[1],O=n.a.useState([0]),W=Object(o.a)(O,2),k=W[0],P=W[1],j=n.a.useState([0]),T=Object(o.a)(j,2),A=T[0],x=T[1],I=130,D=400,B="13",M="13";Ae().width<=700&&(D=260,I=279,B="8",M="8");var R=Object(r.useState)({activeObject:{id:3,val:e.monthlySelectedValue,name:"TOTAL WASTE"},objects:[{id:0,val:"C",name:"COVER WASTE"},{id:1,val:"S",name:"SPOILAGE WASTE"},{id:2,val:"P",name:"PREPARATION WASTE"},{id:3,val:"A",name:"TOTAL WASTE"}]}),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)({coverWaste:!1,spoliageWaste:!1,productionWaste:!1,allWaste:!0}),Y=Object(o.a)(V,2),U=Y[0],z=Y[1];function G(e){switch(e){case"cover":z({coverWaste:!0,spoliageWaste:!1,productionWaste:!1,allWaste:!1}),H(Object(p.a)({},L,{activeObject:L.objects[0]}));break;case"production":z({coverWaste:!1,spoliageWaste:!1,productionWaste:!0,allWaste:!1}),H(Object(p.a)({},L,{activeObject:L.objects[2]}));break;case"spoliage":z({coverWaste:!1,spoliageWaste:!0,productionWaste:!1,allWaste:!1}),H(Object(p.a)({},L,{activeObject:L.objects[1]}));break;case"all":z({coverWaste:!1,spoliageWaste:!1,productionWaste:!1,allWaste:!0}),H(Object(p.a)({},L,{activeObject:L.objects[3]}))}}Object(r.useEffect)((function(){C(g),P(h),x(b),e.showMonthlyChart&&_?c(!0):c(!1),"C"===E?(z({coverWaste:!0,spoliageWaste:!1,productionWaste:!1,allWaste:!1}),H(Object(p.a)({},L,{activeObject:L.objects[0]}))):"S"===E?(z({coverWaste:!1,spoliageWaste:!0,productionWaste:!1,allWaste:!1}),H(Object(p.a)({},L,{activeObject:L.objects[1]}))):"P"===E?(z({coverWaste:!1,spoliageWaste:!1,productionWaste:!0,allWaste:!1}),H(Object(p.a)({},L,{activeObject:L.objects[2]}))):"A"===E&&z({coverWaste:!1,spoliageWaste:!1,productionWaste:!1,allWaste:!0})}),[g,h,b,E,e.showMonthlyChart]),void 0!==e.siteID&&(a=e.siteID);var q;return q=e.showDarkTheme?"rgb(255, 231, 227)":"rgb(15, 128, 140)",n.a.createElement("div",{className:e.hideReport?"monthlyWasteChart displayNone":"monthlyWasteChart"},n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"MONTHLY WASTE & MONTHLY TREND"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){return e.handleChangeForCheckedAndAccordion(!e.showMonthlyChart,"monthlyChartSwitch")}},e.showMonthlyChart?"X":"| | | "))),n.a.createElement(Oe,{open:e.showMonthlyChart},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"report-subtitle"},e.siteName," "),n.a.createElement("div",{className:"monthlyWasteChart__titleWrapper"},n.a.createElement("div",{className:"section-title"},"MONTHLY WASTE ",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?"(\xa3)":"(Kg)"))),n.a.createElement("div",{className:"MonthlyWasteChart--spacing--secondRow"},n.a.createElement("div",{className:"MonthlyWasteChart--spacing--secondRow--csp"},n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{style:{display:"flex",width:"13%",justifyContent:"space-between"}},n.a.createElement("div",{className:U.coverWaste?"active":"inactive",id:1,onClick:function(){G("cover")}}),n.a.createElement("div",{className:U.spoliageWaste?"active":"inactive",id:1,onClick:function(){G("spoliage")}}),n.a.createElement("div",{className:U.productionWaste?"active":"inactive",id:1,onClick:function(){G("production")}}),n.a.createElement("div",{className:U.allWaste?"active":"inactive",id:1,onClick:function(){G("all")}})),n.a.createElement("div",null,n.a.createElement("div",{className:"monthlyWasteChart__dateLabel__CSP"},n.a.createElement("div",{className:"monthlyWasteChart__dateLabel__CSP__coverwastesSquare"}),"COVER",n.a.createElement("div",{className:"monthlyWasteChart__dateLabel__CSP__spoliageSquare"}),"SPOILAGE",n.a.createElement("div",{className:"monthlyWasteChart__dateLabel__CSP__preparationSquare"}),"PREPARATION"))))),n.a.createElement("div",{className:"monthlyWasteChart--labelTrends--title"},n.a.createElement("div",null,n.a.createElement("div",{className:"cooperHewittBold applyBlueTuckGreen"},"Monthly Trend: ",L.activeObject.name.toLowerCase()))),n.a.createElement("div",{className:"monthlyWasteChart--labelTrends"},e.showPounds?f.map((function(a,t){return n.a.createElement("div",{className:"monthlyWasteChart--labelTrends__spacing",key:t},a>0?n.a.createElement("div",{className:"applyCooperHewittBold monthlyWasteChart--labelTrends__spacing"},"+",(2.775*a).toFixed(0)):n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor cooperHewittBold monthlyWasteChart--labelTrends__spacing":"applyPurpleColor monthlyWasteChart--labelTrends__spacing"},(2.775*a).toFixed(0)))})):f.map((function(a,t){return n.a.createElement("div",{className:"monthlyWasteChart--labelTrends__spacing",key:t},a>0?n.a.createElement("div",{className:"applyCooperHewittBold monthlyWasteChart--labelTrends__spacing"},"+",a):n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor cooperHewittBold monthlyWasteChart--labelTrends__spacing":"applyPurpleColor monthlyWasteChart--labelTrends__spacing"},a))}))),n.a.createElement("div",{className:"monthlyWasteChart--labelTrends--title"},n.a.createElement("div",null,n.a.createElement("div",{className:"cooperHewittBold applyBlueTuckGreen"},"Monthly Waste:"))),n.a.createElement(ke.a,{data:{labels:["","","","","","","","","","","",""],datasets:[{label:"coverWaste",data:e.showPounds?N.map((function(e){return(2.775*e).toFixed(0)})):N,fill:!1,backgroundColor:"rgba(140, 112, 140, 0.5)",minBarLength:.3,barPercentage:.7,categoryPercentage:.7},{label:"spoilage",data:e.showPounds?A.map((function(e){return(2.775*e).toFixed(0)})):A,fill:!1,backgroundColor:"rgb(212, 190, 0)",minBarLength:.3,barPercentage:.7,categoryPercentage:.7},{label:"preparation",data:e.showPounds?k.map((function(e){return(2.775*e).toFixed(0)})):k,fill:!1,backgroundColor:"rgba(133, 165, 101, 0.5)",minBarLength:.3,barPercentage:.7,categoryPercentage:.7}]},width:D,height:I,options:{responsive:!0,maintainAspectRatio:!0,scales:{xAxes:[{stacked:!0,gridLines:{display:!1},ticks:{fontColor:"rgb(15, 128, 140)"},display:!1}],yAxes:[{stacked:!0,display:!1,gridLines:{display:!1}}]},plugins:{datalabels:{display:!0,anchor:"top",align:"middle",color:q,font:{size:9,weight:"bold"}}}}}),n.a.createElement("div",{className:"monthlyWasteChart--axisLabel"},["JAN","FEB","MAR","APR","MAY","JUNE","JULY","AUG","SEP","OCT","NOV","DEC"].map((function(e,a){return n.a.createElement("div",{key:a},e)}))),n.a.createElement("div",{className:"monthlyWasteChart__currentMonth applyBlueTuckGreen CSPFullLabelNameFontsize cooperHewittBold"},n.a.createElement("div",{className:"applyMarginRightAndLeft cooperHewittBold applyGoldColor"},"("+function(){var e=new Date,a=String(e.getDate());return["January","February","March","April","May","June","July","August","September","October","November","December"][parseInt(String(e.getMonth()))].toUpperCase().substr(0,3)+"-"+a}()+")"),n.a.createElement("div",{className:"applyMarginRightAndLeft cooperHewittBold"},"Current Month Food Waste"),"C",n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor applyMarginRightAndLeft cooperHewittBold":"applyPurpleColor applyMarginRightAndLeft cooperHewittBold"},e.showPounds?(2.755*d).toFixed(0):ye(d)),n.a.createElement("div",{className:"applyMarginRightAndLeft cooperHewittBold"},"+"),"S",n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor applyMarginRightAndLeft cooperHewittBold":"applyPurpleColor applyMarginRightAndLeft cooperHewittBold"},e.showPounds?(2.755*u).toFixed(0):ye(u)),n.a.createElement("div",{className:"applyMarginRightAndLeft cooperHewittBold"},"+"),"P",n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor applyMarginRightAndLeft cooperHewittBold":"applyPurpleColor applyMarginRightAndLeft cooperHewittBold"},e.showPounds?(2.755*m).toFixed(0):ye(m)),n.a.createElement("div",{className:"applyMarginRightAndLeft cooperHewittBold"},"="),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor applyMarginRightAndLeft cooperHewittBold":"applyPurpleColor applyMarginRightAndLeft cooperHewittBold"}," ",e.showPounds?"\xa3"+(2.775*(ye(d)+ye(u)+ye(m))).toFixed(0):ye(d)+ye(u)+ye(m)+"Kg")),n.a.createElement("div",{className:"monthlyWasteChart__headingSection--spacing"},n.a.createElement("div",{className:"monthlyWasteChart__CspLabel"},n.a.createElement("div",{className:U.coverWaste?"active":"inactive",id:1,onClick:function(){G("cover")}},n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},title:"click on C, S or P waste stream",arrow:!0},n.a.createElement("h2",{id:"C",onClick:y,className:U.coverWaste?"reduceOpacity":""},"C"))),n.a.createElement("div",{className:U.spoliageWaste?"active":"inactive",id:1,onClick:function(){G("spoliage")}},n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},arrow:!0},n.a.createElement("h2",{id:"S",onClick:y,className:U.spoliageWaste?"reduceOpacity":""},"S"))),n.a.createElement("div",{className:U.productionWaste?"active":"inactive",id:1,onClick:function(){G("production")}},n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},arrow:!0},n.a.createElement("h2",{id:"P",onClick:y,className:U.productionWaste?"reduceOpacity":""},"P"))),n.a.createElement("div",{className:U.allWaste?"active":"inactive",id:1,onClick:function(){G("all")}},n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},arrow:!0},n.a.createElement("h2",{id:"A",onClick:y,className:U.allWaste?"reduceOpacity":""},"ALL")))),n.a.createElement("div",{className:"section-title"},"MONTHLY TREND"),n.a.createElement("div",{className:"section-title"}),n.a.createElement("div",{className:"section-title"},n.a.createElement("div",{className:"applyMarginRightAndLeft"},"Total Change"),n.a.createElement("div",{className:"applyPurpleColor"},e.showPounds?(2.775*v.reduce(he)).toFixed(0):v.reduce(he).toFixed(0)))),n.a.createElement("div",{className:"monthlyWasteChart__lineChart",style:{position:"relative"}},n.a.createElement(ke.a,{data:function(t){return{labels:["JAN","FEB","MAR","APR","MAY","JUNE","JULY","AUG","SEPT","OCT","NOV","DEC"],datasets:[{label:"Total wastes",siteId:a,data:e.showPounds?f.map((function(e){return(2.775*e).toFixed(0)})):f.map((function(e){return e.toFixed(0)})),backgroundColor:void 0,barPercentage:.7,categoryPercentage:.9,lineTension:0}]}},width:D,height:I,options:{responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!1},legend:{display:!1},scales:{xAxes:[{display:!0,gridLines:{display:!1},ticks:{fontColor:"rgb(15, 128, 140)",fontSize:M}}],yAxes:[{display:!1,gridLines:{}}]},plugins:{datalabels:{display:!0,anchor:"bottom",align:"bottom",color:function(a){var t=a.dataIndex;return a.dataset.data[t]>0?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"},font:{size:B,weight:900},formatter:function(e,a){return e>0?"+ ".concat(e):e}}}}})))))}var ga=Object(r.createContext)(),ha=function(e){var a=n.a.useState(""),t=Object(o.a)(a,2),s=t[0],l=t[1],c=n.a.useState([]),i=Object(o.a)(c,2),d=i[0],m=i[1],u=n.a.useState([]),g=Object(o.a)(u,2),h=g[0],b=g[1],v=n.a.useState([]),y=Object(o.a)(v,2),f=y[0],E=y[1],_=n.a.useState([]),w=Object(o.a)(_,2),S=w[0],N=w[1],C=n.a.useState([]),O=Object(o.a)(C,2),W=O[0],k=O[1],P=n.a.useState([]),j=Object(o.a)(P,2),T=j[0],A=j[1],x=n.a.useState([]),I=Object(o.a)(x,2),D=I[0],B=I[1],M=n.a.useState([]),R=Object(o.a)(M,2),F=R[0],L=R[1],H=n.a.useState([]),V=Object(o.a)(H,2),Y=V[0],U=V[1],z=n.a.useState([]),G=Object(o.a)(z,2),q=G[0],K=G[1],J=n.a.useState([]),Z=Object(o.a)(J,2),X=Z[0],$=Z[1],Q=n.a.useState([]),ee=Object(o.a)(Q,2),ae=ee[0],te=ee[1],re=n.a.useState([]),ne=Object(o.a)(re,2),se=ne[0],le=ne[1],oe=n.a.useState([]),ce=Object(o.a)(oe,2),ie=ce[0],de=ce[1],me=n.a.useState([]),ue=Object(o.a)(me,2),pe=ue[0],ge=ue[1],he=Object(r.useState)({monthlyForcasts:!0,weeklyForcasts:!1,dailyForcasts:!1,yearlyForcasts:!1}),be=Object(o.a)(he,2),ve=be[0],ye=be[1],fe=Object(r.useState)({activeObject:{id:0,val:"monthlyFrocasts",name:"Monthly"},objects:[{id:0,val:"monthlyFrocasts",name:"Monthly"},{id:1,val:"weeklyFrocasts",name:"Weekly"},{id:2,val:"dailyFrocasts",name:"Daily"},{id:3,val:"yearlyFrocasts",name:"Yearly"}]}),Ee=Object(o.a)(fe,2),_e=Ee[0],we=Ee[1];Object(r.useEffect)((function(){Se(e.aiPredictionsData)}),[e.aiPredictionsData]);var Se=function(e){ye({monthlyForcasts:!0,weeklyForcasts:!1,dailyForcasts:!1,yearlyForcasts:!1}),e.map((function(e){return m(e.aiPrediction.yearlyForcastsBasedOnCurrentMonth.coverWaste),b(e.aiPrediction.yearlyForcastsBasedOnCurrentMonth.preparationWaste),E(e.aiPrediction.yearlyForcastsBasedOnCurrentMonth.spoilageWaste),N(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.coverWaste),k(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.preparationWaste),A(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.spoilageWaste),B(e.aiPrediction.weeklylyForcastsBasedOnCurrentMonth.coverWaste),L(e.aiPrediction.weeklylyForcastsBasedOnCurrentMonth.preparationWaste),U(e.aiPrediction.weeklylyForcastsBasedOnCurrentMonth.spoilageWaste),K(e.aiPrediction.dailyForcastsBasedOnCurrentMonth.coverWaste),$(e.aiPrediction.dailyForcastsBasedOnCurrentMonth.preparationWaste),te(e.aiPrediction.dailyForcastsBasedOnCurrentMonth.spoilageWaste),le(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.coverWaste),de(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.preparationWaste),ge(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.spoilageWaste),""}));var a=["January","February","March","April","May","June","July","August","September","October","November","December"][(new Date).getMonth()].toUpperCase();l(a)};return n.a.createElement(ga.Provider,{value:{aiPredictionsDisplayValueForCoverWaste:se,aiPredictionsDisplayValueForPrepWaste:ie,aiPredictionsDisplayValueForSpoilageWaste:pe,aiPredictionsActiveState:ve,aiPredictionsToggleActive:function(e){switch(e){case"monthlyForcasts":ye({monthlyForcasts:!0,weeklyForcasts:!1,dailyForcasts:!1,yearlyForcasts:!1}),we(Object(p.a)({},_e,{activeObject:_e.objects[0]})),le(S),de(W),ge(T);break;case"weeklyForcasts":ye({monthlyForcasts:!1,weeklyForcasts:!0,dailyForcasts:!1,yearlyForcasts:!1}),we(Object(p.a)({},_e,{activeObject:_e.objects[1]})),le(D),de(F),ge(Y);break;case"dailyForcasts":ye({monthlyForcasts:!1,weeklyForcasts:!1,dailyForcasts:!0,yearlyForcasts:!1}),we(Object(p.a)({},_e,{activeObject:_e.objects[2]})),le(q),de(X),ge(ae);break;case"yearlyForcasts":ye({monthlyForcasts:!1,weeklyForcasts:!1,dailyForcasts:!1,yearlyForcasts:!0}),we(Object(p.a)({},_e,{activeObject:_e.objects[3]})),le(d),de(h),ge(f)}},month:s}},e.children)},ba=["JAN","FEB","MAR","APR","MAY","JUNE","JULY","AUG","SEP","OCT","NOV","DEC"],va=65,ya=400,fa=10,Ea=5,_a=20,wa=function(e,a){return{labels:ba,datasets:[{label:"Ai Prediction",data:a.showPounds?e.map((function(e){return(2.775*e).toFixed(0)})):e,backgroundColor:"rgba(153, 177, 165, 0)",barPercentage:.7,categoryPercentage:.9,lineTension:0,borderColor:"rgba(140, 112, 140, 0.5)",pointRadius:Ea,pointBackgroundColor:"rgba(140, 112, 140, 0.5)"}]}},Sa=function(e,a){return{labels:ba,datasets:[{label:"Ai Prediction",data:a.showPounds?e.map((function(e){return(2.775*e).toFixed(0)})):e,backgroundColor:"rgba(153, 177, 165, 0)",barPercentage:.7,categoryPercentage:.9,lineTension:0,borderColor:"#ff8c00",pointRadius:Ea,pointBackgroundColor:"#ff8c00"}]}},Na=function(e,a){return{labels:ba,datasets:[{label:"Ai Prediction",data:a.showPounds?e.map((function(e){return(2.775*e).toFixed(0)})):e,backgroundColor:"rgba(153, 177, 165, 0)",barPercentage:.7,categoryPercentage:.9,lineTension:0,borderColor:"rgba(133, 165, 101, 0.5)",pointRadius:Ea,pointBackgroundColor:"rgba(133, 165, 101, 0.5)"}]}};function Ca(e){var a=Object(r.useContext)(ga),t=a.aiPredictionsDisplayValueForCoverWaste,s=a.aiPredictionsDisplayValueForPrepWaste,l=a.aiPredictionsDisplayValueForSpoilageWaste,c=a.aiPredictionsActiveState,i=a.aiPredictionsToggleActive,d=a.month,m=n.a.useState([]),u=Object(o.a)(m,2),p=u[0],g=u[1],h=n.a.useState([]),b=Object(o.a)(h,2),v=b[0],y=b[1],f=n.a.useState([]),E=Object(o.a)(f,2),_=E[0],w=E[1];return Object(r.useEffect)((function(){var e=0===s?[]:s,a=0===l?[]:l;g(0===t?[]:t),y(e),w(a)}),[t,s,l]),Ae().width<=700&&(ya=260,va=65,fa=8,Ea=3,_a=20),n.a.createElement(n.a.Fragment,null,!e.hideReport&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"AI PREDICTIONS"),n.a.createElement("div",{className:"container"},e.aiPredictions?n.a.createElement("span",{onClick:function(){e.setAiPredictions(!e.aiPredictions),Ee("showAiPredictions",!e.aiPredictions)}},"X"):n.a.createElement("span",{onClick:function(){e.setAiPredictions(!e.aiPredictions),Ee("showAiPredictions",!e.aiPredictions)}}," | | | "))),n.a.createElement(Oe,{open:e.aiPredictions},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"dashboard__aiPredictionsReportHeading"},n.a.createElement("div",{className:"section-title"},"AI PREDICTIONS",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?"(\xa3)":"(Kg)"))),n.a.createElement("div",{className:"dashboard__aiPredictionsReport__headingWrapper"},n.a.createElement("div",{className:"dashboard__aiPredictionsReport__subHeading marginRight"},"WASTE PREDICTION FOR"),n.a.createElement("div",{className:"dashboard__aiPredictionsReport__timePeriodMenu"},n.a.createElement("h2",{className:c.yearlyForcasts?"active":"inactive",id:0,onClick:function(){i("yearlyForcasts")}},"Yr"),n.a.createElement("h2",{className:c.monthlyForcasts?"active":"inactive",id:1,onClick:function(){i("monthlyForcasts")}},"Mth"),n.a.createElement("h2",{className:c.weeklyForcasts?"active":"inactive",id:2,onClick:function(){i("weeklyForcasts")}},"Wk"),n.a.createElement("h2",{className:c.dailyForcasts?"active":"inactive",id:3,onClick:function(){i("dailyForcasts")}},"Dy")),n.a.createElement("div",{className:"marginRight applyPurpleColor cooperHewittBold"},"IN ",d)),n.a.createElement("div",{className:"dashboard__aiPredictionsReportWrapper"},n.a.createElement("div",{className:"dashboard__aiPredictionsReport__height"},n.a.createElement(ke.b,{data:wa(p,e),width:ya,height:va,options:{layout:{padding:{left:_a,right:_a,top:30,bottom:30}},responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!1},legend:{display:!1},scales:{xAxes:[{display:!1,gridLines:{display:!1},ticks:{fontColor:"rgb(15, 128, 140)"}}],yAxes:[{display:!1,gridLines:{},ticks:{maxTicksLimit:1,beginAtZero:!0}}]},plugins:{datalabels:{display:!0,anchor:"top",align:"top",font:{size:fa,weight:600},color:function(a){var t=a.dataIndex,r=a.dataset.data[t];return e.showPounds?r>2.775*p[t-1]?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)":r>p[t-1]?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}}}}})),n.a.createElement("div",{className:"dashboard__aiPredictionsReport__height"},n.a.createElement(ke.b,{data:Sa(_,e),width:ya,height:va,options:{layout:{padding:{left:_a,right:_a,top:30,bottom:30}},responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!1},legend:{display:!1},scales:{xAxes:[{display:!1,gridLines:{display:!1},ticks:{fontColor:"rgb(15, 128, 140)"}}],yAxes:[{display:!1,gridLines:{},ticks:{maxTicksLimit:1,beginAtZero:!0}}]},plugins:{datalabels:{display:!0,anchor:"top",align:"top",font:{size:fa,weight:600},color:function(a){var t=a.dataIndex,r=a.dataset.data[t];return e.showPounds?r>2.775*_[t-1]?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)":r>_[t-1]?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}}}}})),n.a.createElement("div",{className:"dashboard__aiPredictionsReport__height"},n.a.createElement(ke.b,{data:Na(v,e),width:ya,height:va,options:{layout:{padding:{left:_a,right:_a,top:30,bottom:30}},responsive:!0,maintainAspectRatio:!0,tooltips:{enabled:!1},legend:{display:!1},scales:{xAxes:[{display:!1,gridLines:{display:!1},ticks:{fontColor:"rgb(15, 128, 140)"}}],yAxes:[{display:!1,gridLines:{},ticks:{maxTicksLimit:1,beginAtZero:!0}}]},plugins:{datalabels:{display:!0,anchor:"top",align:"top",font:{size:fa,weight:600},color:function(a){var t=a.dataIndex,r=a.dataset.data[t];return e.showPounds?r>2.775*v[t-1]?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)":r>v[t-1]?"rgba(255, 0, 0, 0.9)":e.showDarkTheme?"rgb(255, 231, 227)":"rgba(133, 165, 101, 1)"}}}}})),n.a.createElement("div",{className:"dashboard__aiPredictionsReport__axisLabel"},ba.map((function(e,a){return n.a.createElement("div",{key:a},e)}))),n.a.createElement("div",null,n.a.createElement("div",{className:"dashboard__aiPredictionsReport__dateLabel__CSP"},n.a.createElement("div",{className:"dashboard__aiPredictionsReport__dateLabel__CSP__coverwastesSquare"}),"COVER",n.a.createElement("div",{className:"dashboard__aiPredictionsReport__dateLabel__CSP__spoliageSquare"}),"SPOILAGE",n.a.createElement("div",{className:"dashboard__aiPredictionsReport__dateLabel__CSP__preparationSquare"}),"PREPARATION"),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__message"},"(Updated every Sunday)"))))))))}var Oa=t(249),Wa=t.n(Oa),ka=t(250),Pa=t.n(ka),ja=t(251),Ta=t.n(ja),Aa=Object(r.createContext)(),xa=function(e){var a=n.a.useState({targets:0,monthlyCoverWasteTarget:0,monthlyPrepWasteTarget:0,monthlySpoilageWasteTarget:0,mealsSavings:0,co2Reduction:0,moneySavings:0,totalMonthlyForecasts:0,totalShortFall:0,coverWasteShortFall:0,prepWasteShortFall:0,spoilageWasteShortFall:0,targetIsRealistic:0,percentaged:0}),t=Object(o.a)(a,2),s=t[0],l=t[1],c=n.a.useState(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=n.a.useState(!1),p=Object(o.a)(u,2),g=p[0],h=p[1],b=["Yearly","Weekly","Daily","Monthly"],v=n.a.useState(null),y=Object(o.a)(v,2),f=y[0],E=y[1],_=n.a.useState(0),w=Object(o.a)(_,2),S=w[0],N=w[1],C=Object(r.useState)({monthlyTargets:!0,weeklyTargets:!1,dailyTargets:!1,yearlyTargets:!1}),O=Object(o.a)(C,2),W=O[0],k=O[1],P=n.a.useState([0]),j=Object(o.a)(P,2),T=j[0],A=j[1],x=n.a.useState([0]),I=Object(o.a)(x,2),D=I[0],B=I[1],M=n.a.useState([0]),R=Object(o.a)(M,2),F=R[0],L=R[1],H=n.a.useState([0]),V=Object(o.a)(H,2),Y=V[0],U=V[1],z=n.a.useState([0]),G=Object(o.a)(z,2),q=G[0],K=G[1],J=n.a.useState([0]),Z=Object(o.a)(J,2),X=Z[0],$=Z[1],Q=n.a.useState([0]),ee=Object(o.a)(Q,2),ae=ee[0],te=ee[1],re=n.a.useState([0]),ne=Object(o.a)(re,2),se=ne[0],le=ne[1],oe=n.a.useState([0]),ce=Object(o.a)(oe,2),ie=ce[0],de=ce[1],me=n.a.useState([0]),ue=Object(o.a)(me,2),pe=ue[0],ge=ue[1],he=n.a.useState([0]),ve=Object(o.a)(he,2),fe=ve[0],Ee=ve[1],_e=n.a.useState([0]),we=Object(o.a)(_e,2),Se=we[0],Ne=we[1];Object(r.useEffect)((function(){if(k({monthlyTargets:!0,weeklyTargets:!1,dailyTargets:!1,yearlyTargets:!1}),e.recommendedTargets.length>0&&e.aiPredictionsData.length>0){var a,t,r,n;e.recommendedTargets.map((function(e){var t=e.recommendedTargets.targets.percents;return a=parseInt(t)/100,""})),N(a),e.aiPredictionsData.map((function(e){return t=e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.coverWaste,r=e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.preparationWaste,n=e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.spoilageWaste,A(e.aiPrediction.dailyForcastsBasedOnCurrentMonth.coverWaste),B(e.aiPrediction.dailyForcastsBasedOnCurrentMonth.preparationWaste),L(e.aiPrediction.dailyForcastsBasedOnCurrentMonth.spoilageWaste),U(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.coverWaste),K(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.preparationWaste),$(e.aiPrediction.monthlyForcastsBasedOnCurrentMonth.spoilageWaste),te(e.aiPrediction.weeklylyForcastsBasedOnCurrentMonth.coverWaste),le(e.aiPrediction.weeklylyForcastsBasedOnCurrentMonth.preparationWaste),de(e.aiPrediction.weeklylyForcastsBasedOnCurrentMonth.spoilageWaste),ge(e.aiPrediction.yearlyForcastsBasedOnCurrentMonth.coverWaste),Ee(e.aiPrediction.yearlyForcastsBasedOnCurrentMonth.preparationWaste),Ne(e.aiPrediction.yearlyForcastsBasedOnCurrentMonth.spoilageWaste),""}));var s=Ce(t,r,n,a);l(s);var o=be()-1,c=e.currentMonthCoverWasteArray[o],i=e.currentMonthPrepWasteArray[o],d=e.currentMonthSpoilageWasteArray[o];m(c+i+d),h(a>.3),E(b[3])}}),[e.aiPredictionsData,e.recommendedTargets,e.currentMonthCoverWasteArray,e.currentMonthPrepWasteArray,e.currentMonthSpoilageWasteArray]);var Ce=function(a,t,r,n){var s=a.length-1,l=isNaN(n)?0:n,o=a[s]?a[s]:0,c=t[s]?t[s]:0,i=r[s]?r[s]:0,d=o+c+i,m=parseInt(d*l),u=d-m,p=o-o*l,g=c-c*l,h=i-i*l,b=ye(p+g+h),v=ye(p-o),y=ye(g-c),f=ye(h-i),E=ye(v+y+f),_=parseFloat(e.carbonMunicipalValue);return{targets:u,monthlyCoverWasteTarget:p,monthlyPrepWasteTarget:g,monthlySpoilageWasteTarget:h,mealsSavings:ye(m/.36),co2Reduction:ye(m*_),moneySavings:ye(2.775*m),percentaged:l,totalMonthlyForecasts:d,totalShortFall:E,coverWasteShortFall:v,prepWasteShortFall:y,spoilageWasteShortFall:f,targetIsRealistic:!(b-d<0)}};return n.a.createElement(Aa.Provider,{value:{targetsAndImpact:s,prevMonthWaste:d,showPercentagedWarning:g,label:f,toggleActive:function(e){switch(e){case"monthlyTargets":k({monthlyTargets:!0,weeklyTargets:!1,dailyTargets:!1,yearlyTargets:!1});var a=Ce(Y,q,X,S);l(a),E(b[3]);break;case"weeklyTargets":k({monthlyTargets:!1,weeklyTargets:!0,dailyTargets:!1,yearlyTargets:!1});var t=Ce(ae,se,ie,S);l(t),E(b[1]);break;case"dailyTargets":k({monthlyTargets:!1,weeklyTargets:!1,dailyTargets:!0,yearlyTargets:!1});var r=Ce(T,D,F,S);l(r),E(b[2]);break;case"yearlyTargets":k({monthlyTargets:!1,weeklyTargets:!1,dailyTargets:!1,yearlyTargets:!0});var n=Ce(pe,fe,Se,S);l(n),E(b[0])}},activeState:W}},e.children)},Ia=function(){var e=["January","February","March","April","May","June","July","August","September","October","November","December"],a=(new Date).getMonth();return{currentMonth:e[a],previousMonth:e[0===a?11:a-1]}}();function Da(e){var a=e.setFoodWasteTargetSavings,t=e.foodWasteTargetSavings,s=e.showDarkTheme,l=e.hideReport,o=Object(r.useContext)(Aa),c=o.targetsAndImpact,i=o.prevMonthWaste,d=o.showPercentagedWarning,m=o.label,u=o.activeState,p=o.toggleActive;return n.a.createElement(n.a.Fragment,null,!l&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"FOOD WASTE TARGET"),n.a.createElement("div",{className:"container"},t?n.a.createElement("span",{onClick:function(){a(!t),Ee("showFoodWasteTargetSavings",!t)}},"X"):n.a.createElement("span",{onClick:function(){a(!t),Ee("showFoodWasteTargetSavings",!t)}}," | | | "))),n.a.createElement(Oe,{open:t},n.a.createElement("div",{className:s?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"dashboard__targetsMenu"},n.a.createElement("div",{className:"foodWasteTrackingProgress__timePeriodHeading"},"TIME PERIOD"),n.a.createElement("h2",{className:u.yearlyTargets?"active":"inactive",id:0,onClick:function(){p("yearlyTargets")}},"Yr"),n.a.createElement("h2",{className:u.monthlyTargets?"active":"inactive",id:1,onClick:function(){p("monthlyTargets")}},"Mth"),n.a.createElement("h2",{className:u.weeklyTargets?"active":"inactive",id:2,onClick:function(){p("weeklyTargets")}},"Wk"),n.a.createElement("h2",{className:u.dailyTargets?"active":"inactive",id:3,onClick:function(){p("dailyTargets")}},"Dy")),n.a.createElement("div",{className:"dashboard__foodWasteTrackingProgressBarWrapper"},n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__progressBar__wrapper"},n.a.createElement("div",{className:"foodWasteTrackingProgress__waste foodWasteTrackingProgress__waste--marginBottom"},n.a.createElement("div",{className:"foodWasteTrackingProgress__subheading foodWasteTrackingProgress__flexBasis__month"},n.a.createElement("div",{className:"cooperHewittBold applyPurpleColor"},Ia.previousMonth)),n.a.createElement("div",{className:"cooperHewittBold applyBlueTuckGreen foodWasteTrackingProgress__wasteValues foodWasteTrackingProgress__flexBasis__label"},"Total"),n.a.createElement("div",{className:s?"darkTheme__numberColor foodWasteTrackingProgress__wasteValues cooperHewittBold foodWasteTrackingProgress__flexBasis__kgOrPounds":"foodWasteTrackingProgress__wasteValues cooperHewittBold applyBlueTuckGreen foodWasteTrackingProgress__flexBasis__kgOrPounds"},i," Kg CSP")))),n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__progressBar__wrapper"},n.a.createElement("div",{className:"foodWasteTrackingProgress__targets"},n.a.createElement("div",{className:"foodWasteTrackingProgress__subheading cooperHewittBold applyPurpleColor foodWasteTrackingProgress__flexBasis__month"},Ia.currentMonth),n.a.createElement("div",{className:"foodWasteTrackingProgress__wasteValues cooperHewittBold applyBlueTuckGreen foodWasteTrackingProgress__flexBasis__label"},"Target"),n.a.createElement("div",{className:s?"darkTheme__numberColor foodWasteTrackingProgress__wasteValues cooperHewittBold foodWasteTrackingProgress__flexBasis__kgOrPounds":"foodWasteTrackingProgress__wasteValues cooperHewittBold applyBlueTuckGreen foodWasteTrackingProgress__flexBasis__kgOrPounds"},c.targets," kg CSP")))),n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__progressBar__wrapper"},n.a.createElement("div",{className:"foodWasteTrackingProgress__flexBasis__month"}),n.a.createElement("div",{className:s?"darkTheme__numberColor foodWasteTrackingProgress__styling cooperHewittBold foodWasteTrackingProgress__flexBasis__percentaged":"foodWasteTrackingProgress__styling cooperHewittBold applyBlueTuckGreen foodWasteTrackingProgress__flexBasis__percentaged"},100*c.percentaged," % reduction"),n.a.createElement("div",{className:s?"darkTheme__numberColor foodWasteTrackingProgress__styling cooperHewittBold displayFlex":"foodWasteTrackingProgress__styling cooperHewittBold applyBlueTuckGreen displayFlex"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},"( C")," ",ye(c.monthlyCoverWasteTarget)," kg +",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},"S")," ",ye(c.monthlySpoilageWasteTarget)," kg +",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},"P")," ",ye(c.monthlyPrepWasteTarget)," kg)"))),n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__flexBasis__month"}),n.a.createElement("div",{className:"showRedColor foodWasteTrackingProgress__warningFontSize cooperHewittBold"},d?"Targets may not be achievable as AI predictions are ".concat(100*c.percentaged," % than what is expected"):"")),n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__progressBar__wrapper"},n.a.createElement("div",{className:"foodWasteTrackingProgress__targets"},n.a.createElement("div",{className:"foodWasteTrackingProgress__subheading cooperHewittBold applyPurpleColor foodWasteTrackingProgress__flexBasis__month"},"AI predicted"),n.a.createElement("div",{className:s?"darkTheme__numberColor foodWasteTrackingProgress__wasteValues cooperHewittBold foodWasteTrackingProgress__flexBasis__kgOrPounds":"foodWasteTrackingProgress__wasteValues cooperHewittBold applyBlueTuckGreen foodWasteTrackingProgress__flexBasis__kgOrPounds"},c.totalMonthlyForecasts," Kg"),n.a.createElement("div",{className:s?"darkTheme__numberColor foodWasteTrackingProgress__styling cooperHewittBold displayFlex":"foodWasteTrackingProgress__styling cooperHewittBold applyBlueTuckGreen displayFlex"},n.a.createElement("div",{className:s?"darkTheme__numberColor cooperHewittBold":"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},c.totalShortFall," kg ="),n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},"( C")," ",ye(c.coverWasteShortFall)," kg + ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},"S")," ",ye(c.spoilageWasteShortFall)," kg + ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},"P")," ",ye(c.prepWasteShortFall)," kg)")))),n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__flexBasis__month"}),n.a.createElement("div",{className:"showRedColor foodWasteTrackingProgress__warningFontSize cooperHewittBold"},c.targetIsRealistic?"":"Targets are not actionable, please reduce waste behaviour!")),n.a.createElement("div",{className:"foodWasteTrackingProgress__section"},n.a.createElement("div",{className:"foodWasteTrackingProgress__impact"},n.a.createElement("div",{className:"foodWasteTrackingProgress__styling cooperHewittBold applyPurpleColor"},m," Target Savings"),n.a.createElement("div",{className:"foodWasteTrackingProgress__savingTargets"},n.a.createElement("div",{className:"foodWasteTrackingProgress__styling cooperHewittBold "},n.a.createElement("div",{className:"foodWasteTrackingProgress__impact__wrapper"},n.a.createElement("img",{className:"foodWasteTrackingProgress__logo applyMarginRightAndLeft",src:Wa.a,alt:"logo"}),n.a.createElement("div",{className:"foodWasteTrackingProgress__impact__text cooperHewittBold"},n.a.createElement("div",{className:s?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(c.mealsSavings)," Meals")))),n.a.createElement("div",{className:"foodWasteTrackingProgress__styling cooperHewittBold "},n.a.createElement("div",{className:"foodWasteTrackingProgress__impact__wrapper"},n.a.createElement("img",{className:"foodWasteTrackingProgress__logo applyMarginRightAndLeft",src:Pa.a,alt:"logo"}),n.a.createElement("div",{className:"foodWasteTrackingProgress__impact__text cooperHewittBold"},n.a.createElement("div",{className:s?"darkTheme__numberColor":"applyBlueTuckGreen"},ye(c.co2Reduction)," Kg of C02")))),n.a.createElement("div",{className:"foodWasteTrackingProgress__styling cooperHewittBold "},n.a.createElement("div",{className:"foodWasteTrackingProgress__impact__wrapper"},n.a.createElement("img",{className:"foodWasteTrackingProgress__logo applyMarginRightAndLeft",src:Ta.a,alt:"logo"}),n.a.createElement("div",{className:"foodWasteTrackingProgress__impact__text cooperHewittBold"},n.a.createElement("div",{className:s?"darkTheme__numberColor":"applyBlueTuckGreen"},"\xa3 ",ye(c.moneySavings)))))))))))))}var Ba=Object(r.createContext)(),Ma=function(e){var a=JSON.parse(localStorage.getItem("yearlyArray"))||[],t=JSON.parse(localStorage.getItem("monthlyArr"))||[],s=Object(r.useState)(a),l=Object(o.a)(s,2),c=l[0],i=l[1],d=Object(r.useState)(t),m=Object(o.a)(d,2),u=m[0],p=m[1],g=Object(r.useState)(0),h=Object(o.a)(g,2),b=h[0],v=h[1],y=Object(r.useState)({coverSelector:!1,spoilageSelector:!1,preparationSelector:!1,allSelector:!0}),f=Object(o.a)(y,2),E=f[0],_=f[1],w=Object(r.useState)(0),S=Object(o.a)(w,2),N=S[0],C=S[1],O=Object(r.useState)(0),W=Object(o.a)(O,2),k=W[0],P=W[1],j=Object(r.useState)(0),T=Object(o.a)(j,2),A=T[0],x=T[1],I=Object(r.useState)(0),D=Object(o.a)(I,2),B=D[0],M=D[1],R=Object(r.useState)(0),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)([]),Y=Object(o.a)(V,2),U=Y[0],z=Y[1],G=Object(r.useState)([]),q=Object(o.a)(G,2),K=q[0],J=q[1],Z=Object(r.useState)([]),X=Object(o.a)(Z,2),$=X[0],Q=X[1],ee=Object(r.useState)([]),ae=Object(o.a)(ee,2),te=ae[0],re=ae[1],ne=Object(r.useState)(0),se=Object(o.a)(ne,2),le=se[0],oe=se[1],ce=Object(r.useState)(0),ie=Object(o.a)(ce,2),de=ie[0],me=ie[1],ue=Object(r.useState)(0),pe=Object(o.a)(ue,2),ge=pe[0],he=pe[1],be=Object(r.useState)([]),ve=Object(o.a)(be,2),ye=ve[0],fe=ve[1],Ee=Object(r.useState)(null),_e=Object(o.a)(Ee,2),we=_e[0],Se=_e[1],Ne=Object(r.useState)(0),Ce=Object(o.a)(Ne,2),Oe=Ce[0],We=Ce[1],ke=Object(r.useState)(),Pe=Object(o.a)(ke,2),je=Pe[0],Te=Pe[1],Ae=Object(r.useState)([]),xe=Object(o.a)(Ae,2),Ie=xe[0],De=(xe[1],Object(r.useState)([])),Be=Object(o.a)(De,2),Me=Be[0],Re=(Be[1],Object(r.useState)([])),Fe=Object(o.a)(Re,2),Le=(Fe[0],Fe[1]),He=Object(r.useState)([]),Ve=Object(o.a)(He,2),Ye=Ve[0],Ue=Ve[1],ze=Object(r.useState)([]),Ge=Object(o.a)(ze,2),qe=Ge[0],Ke=Ge[1],Je=Object(r.useState)([]),Ze=Object(o.a)(Je,2),Xe=Ze[0],$e=Ze[1],Qe=Object(r.useState)([]),ea=Object(o.a)(Qe,2),aa=ea[0],ta=ea[1],ra=Object(r.useState)([]),na=Object(o.a)(ra,2),sa=na[0],la=na[1],oa=Object(r.useState)([]),ca=Object(o.a)(oa,2),ia=ca[0],da=ca[1],ma=Object(r.useState)([]),ua=Object(o.a)(ma,2),pa=ua[0],ga=ua[1],ha=Object(r.useState)([]),ba=Object(o.a)(ha,2),va=ba[0],ya=ba[1],fa=n.a.useState(!0),Ea=Object(o.a)(fa,2),_a=Ea[0],wa=Ea[1];Object(r.useEffect)((function(){if(console.log("props",e),_({coverSelector:!1,spoilageSelector:!1,preparationSelector:!1,allSelector:!0}),e.wastePerCover.totalDailyWasteDataArray){$e(Sa(e.wastePerCover.coverInputDataArray)),ta(Sa(e.wastePerCover.coverWasteDataArray)),la(Sa(e.wastePerCover.preparationWasteDataArray)),da(Sa(e.wastePerCover.spoilageWasteDataArray));var a=Sa(e.wastePerCover.totalDailyWasteDataArray);ga(a),ya(a),i(e.yearlyArray),p(e.monthlyArray),C(e.wastePerCover.totalCW),P(e.wastePerCover.totalPW),x(e.wastePerCover.totalSW),M(e.wastePerCover.totalWaste),H(e.wastePerCover.xAxis),he(e.wastePerCover.monthsName),fe(e.wastePerCover.wastePerCoverForAllWaste),me(e.wastePerCover.percentageOfInputsAreZeros);var t=e.wastePerCover.wastePerCoverForAllWaste,r=Sa(t),n=Sa(e.wastePerCover.xAxis,"xaxis");Ue(r),Ke(n),z(r);var s=Sa(e.wastePerCover.wastePerCoverForPreparationWaste);Q(s);var l=Sa(e.wastePerCover.wastePerCoverForCoverWaste);J(l);var o=Sa(e.wastePerCover.wastePerCoverForSpoilageWaste);re(o),Le(e.wastePerCover.xAxis),oe(e.wastePerCover.totalCoverInputs),Te(e.wastePerCover.siteName)}Se(e.searchError),We(e.selectedYear)}),[e.wastePerCover,e.searchError,e.monthlyArray,e.yearlyArray]);var Sa=function(e,a){Array.prototype.insert=function(e,a){this.splice(e,0,a)};var t=e;if(void 0!==e)for(var r=7;r<=e.length;r+=8){var n="xaxis"===a?"":null;t.insert(r,n)}return t};return n.a.createElement(Ba.Provider,{value:{activeState:E,toggleActive:function(e){switch(e){case"coverSelector":_({coverSelector:!0,spoilageSelector:!1,preparationSelector:!1,allSelector:!1}),Ue(K),ya(aa);break;case"spoilageSelector":_({coverSelector:!1,spoilageSelector:!0,preparationSelector:!1,allSelector:!1}),Ue(te),ya(ia);break;case"preparationSelector":_({coverSelector:!1,spoilageSelector:!1,preparationSelector:!0,allSelector:!1}),Ue($),ya(sa);break;case"allSelector":_({coverSelector:!1,spoilageSelector:!1,preparationSelector:!1,allSelector:!0}),Ue(U),ya(pa)}wa(!1)},yearlyArray:c,montlyArray:u,count:b,totalCW:N,totalPW:k,totalSW:A,totalWaste:B,xAxis:L,display:ye,totalCoverInputs:le,percentageOfInputsAreZeros:de,monthName:ge,handleSearch:function(){var a=u.filter((function(e){return e.show})),t=c.filter((function(e){return e.show})),r={monthlyIndex:a[0].index,yearlyIndex:t[0].year};e.handleSearch(r,"wastePerCover")},searchError:we,selectedYear:Oe,siteName:je,dates:Ie,handleYearly:function(e){var a,t=c.length-1;c.find((function(e){!0===e.show&&(a=c.indexOf(e))})),"NEXT"===e&&a!==t?c.map((function(e){var t=c.indexOf(e);e.show=t===a+1})):"PREV"===e&&0!==a&&c.map((function(e){var t=c.indexOf(e);e.show=t===a-1})),i(c),v((function(e){return e+1}))},handleMonthly:function(e){var a;u.find((function(e){!0===e.show&&(a=e.index)})),"NEXT"===e&&12!==a?u.map((function(e){e.index<=12&&(e.index===a+1?e.show=!0:e.show=!1)})):"PREV"===e&&1!==a&&u.map((function(e){e.index<=12&&(e.index===a-1?e.show=!0:e.show=!1)})),p(u),v((function(e){return e+1}))},datesLabel:Me,foodWaste:Ye,foodWasteXaxis:qe,wasteSteamValue:va,coverInputDataArray:Xe,showTooltip:_a}},e.children)},Ra=function(e){var a=0;if(0!==e){var t,r=(t=e.toString().split("."))[1].slice(0,2);return a=t[0]+"."+r}return a},Fa=function(e){return e%1===0},La=function(e){var a=[],t=ie()(e),r=ie()(e).add(6,"days");return a.push(parseInt(t.format("D"))),a.push(parseInt(r.format("D"))),t.format("MMMM").substr(0,3)+" "+a[0]+"-"+a[1]},Ha=function(){var e=ie()().format("MM-DD-YYYY");return ie()(e,"MMDDYYYY").isoWeek()},Va=function(e,a,t,r){var n=a[t][0].value,s=a[t][1].value,l=a[t][2].value,o=[];return r.allSelector?e.map((function(e,a){return e>=n+s+l&&o.push(a),""})):r.coverSelector?e.map((function(e,a){return e>=n&&o.push(a),""})):r.spoilageSelector?e.map((function(e,a){return e>=s&&o.push(a),""})):r.preparationSelector&&e.map((function(e,a){return e>=l&&o.push(a),""})),{targetIndexArray:o}};function Ya(e){return n.a.createElement("b",{className:"capping"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},"Cap"),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"}," C")),n.a.createElement("div",{className:"applyBlueTuckGreen"},(e.showPounds,e.coverWastes)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"}," S")),n.a.createElement("div",{className:"applyBlueTuckGreen"},(e.showPounds,e.spoilageWastes)),n.a.createElement("div",{className:"capping__text applyMarginRightAndLeft applyPurpleColor cooperHewittBold"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"}," P")),n.a.createElement("div",{className:"applyBlueTuckGreen"},(e.showPounds,e.prepWastes)))}var Ua=500,za=1100;function Ga(e){var a,t=n.a.useState(!0),s=Object(o.a)(t,2),l=s[0],c=s[1],i=Object(r.useContext)(Ba),d=i.activeState,m=i.toggleActive,u=i.yearlyArray,p=i.montlyArray,g=i.handleSearch,h=i.count,b=i.totalCW,v=i.totalPW,y=i.totalSW,f=i.totalWaste,E=i.display,_=i.totalCoverInputs,w=i.percentageOfInputsAreZeros,S=i.monthName,N=i.searchError,C=i.selectedYear,O=i.siteName,W=i.wasteSteamValue,k=i.coverInputDataArray,P=(i.handleYearly,i.handleMonthly),j=i.datesLabel,T=i.foodWaste,A=i.foodWasteXaxis,x=i.showTooltip,I=Object(r.useContext)(le),D=I.allCappingValue,B=I.wastePerCoverCoverWastes,M=I.wastePerCoverSpoilageWastes,R=I.wastePerCoverPrepWastes,F=Object(r.useState)([]),L=Object(o.a)(F,2),H=L[0],V=L[1],Y=Object(r.useState)([]),U=Object(o.a)(Y,2),z=(U[0],U[1]),G=Object(r.useState)([]),q=Object(o.a)(G,2),K=q[0],J=q[1],Z=Object(r.useState)(0),X=Object(o.a)(Z,2),$=X[0],Q=X[1],ee=Object(r.useState)(0),ae=Object(o.a)(ee,2),te=ae[0],re=ae[1],ne=Object(r.useState)(0),se=Object(o.a)(ne,2),oe=se[0],ce=se[1],ie=Object(r.useState)(0),de=Object(o.a)(ie,2),me=de[0],ue=de[1],pe=Object(r.useState)(!1),ge=Object(o.a)(pe,2),he=(ge[0],ge[1]),be=Object(r.useState)(0),ve=Object(o.a)(be,2),ye=ve[0],fe=ve[1],_e=Object(r.useState)([]),Se=Object(o.a)(_e,2),Ne=Se[0],We=Se[1],Pe=Object(r.useState)([]),je=Object(o.a)(Pe,2),Te=je[0],xe=je[1],Ie=Object(r.useState)(1),De=Object(o.a)(Ie,2),Be=De[0],Me=De[1],Re=["rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)"];if((a=Va(T,D,"wastePerCoverCappingValues",d))&&a.targetIndexArray.map((function(e){return Re[e]="rgba(255, 0, 0, 0.9)",""})),Object(r.useEffect)((function(){xe(W),We(k),J(T),V(p),z(u),Q(b),re(v),ce(y),ue(f);var a=we(E);Me(a),he(N),fe(C),e.wastePerCover&&x?c(!0):c(!1)}),[p,u,h,E,N,C,W,k,j,T,A,e.wastePerCover]),e.showPounds){if(E){var Fe=E.map((function(e){return 2.775*e}));Be=we(Fe)}}else Be=we(E);var He=Ae().width;return He<=700?(za=260,Ua=65):He>=1600&&(Ua=424,za=893),n.a.createElement(n.a.Fragment,null,!e.hideReport&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"WASTE per COVER"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){e.setWastePerCover(!e.wastePerCover),Ee("showWastePerCover",!e.wastePerCover)}},e.wastePerCover?"X ":"| | | "))),n.a.createElement(Oe,{open:e.wastePerCover},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"graph__row addSpaceBetween"},n.a.createElement("div",{className:"report-subtitle"},O),n.a.createElement("div",{className:"graph__heading"},"WASTE PER COVER",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?"(\xa3)":"(Kg)"," /Person in ",S," ",ye))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__labelWrapper"},n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},ye)," ",n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},S)," ",n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},"Total Waste"),n.a.createElement("div",{className:"applyMarginRightAndLeft graph__label"},"C"),n.a.createElement("div",{id:1,key:0},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},$)),n.a.createElement("div",null,"+"),n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},"S"),n.a.createElement("div",{id:2,key:1},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},oe)),n.a.createElement("div",null,"+"),n.a.createElement("div",{className:"applyMarginRightAndLeft graph__label"},"P"),n.a.createElement("div",{id:3,key:2},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},te," = ",me)))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__labelWrapper"},n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},ye," ",S," Total Monthly Covers"),n.a.createElement("div",{className:"applyBlueTuckGreen"},_))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__labelWrapper"},n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},"Do we have Monthly Cover Inputs data in ",S," ",ye,"? ",w>50?"NO":"YES"))),n.a.createElement("div",{className:"dashboard__wrapperForSelector"},n.a.createElement("div",{className:"dashboard__selector"},n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},title:"click on C, S, P or All waste stream",arrow:!0},n.a.createElement("h2",{className:d.coverSelector?"active":"inactive",id:0,onClick:function(){m("coverSelector")}},"C")),n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},arrow:!0},n.a.createElement("h2",{className:d.spoilageSelector?"active":"inactive",id:1,onClick:function(){m("spoilageSelector")}},"S")),n.a.createElement(Le.a,{open:l,onClose:function(){return c(!1)},arrow:!0},n.a.createElement("h2",{className:d.preparationSelector?"active":"inactive",id:2,onClick:function(){m("preparationSelector")}},"P")),n.a.createElement("h2",{className:d.allSelector?"active":"inactive",id:3,onClick:function(){m("allSelector")}},"ALL"))),n.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.a.createElement(Ya,{coverWastes:B,spoilageWastes:M,prepWastes:R,showPounds:e.showPounds})),n.a.createElement("div",{className:"dashboard__wrapperForGraph"},n.a.createElement("div",{style:{width:"100%",overflow:"auto"}},n.a.createElement(ke.a,{data:{labels:A,wasteSteamsValue:Te,inputData:Ne,datasets:[{label:"array 1",data:e.showPounds?K.map((function(e){if(e)return(2.775*e).toFixed(1)})):K,backgroundColor:Re,categoryPercentage:1,barPercentage:.5}]},width:za,height:Ua,options:{responsive:!0,maintainAspectRatio:!0,layout:{padding:{left:25,right:25,top:10,bottom:10}},scales:{xAxes:[{display:!0,gridLines:{display:!1},ticks:{autoSkip:!1,fontSize:7}}],yAxes:[{gridLines:{display:!1},ticks:{maxTicksLimit:4,display:!1,beginAtZero:!0,max:Be}}]},plugins:{datalabels:{display:!0,color:"rgb(47, 64, 30)",anchor:"end",align:"end",clamp:!0,font:{size:5,weight:900},offset:4}},tooltips:{enabled:!0,callbacks:{title:function(e,a){return""},label:function(e,a){var t=a.inputData[e.index],r=Fa(a.wasteSteamsValue[e.index])?a.wasteSteamsValue[e.index]:Ra(a.wasteSteamsValue[e.index]);return a.datasets[e.datasetIndex].data[e.index]+"("+r+"/"+t+")"}}}}}))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"dateLabel__wrapper"},n.a.createElement("div",{className:"dateLabel__coverwastesSquare"}),"COVER",n.a.createElement("div",{className:"dateLabel__spoliageSquare"}),"SPOILAGE",n.a.createElement("div",{className:"dateLabel__preparationSquare"}),"PREPARATION",n.a.createElement("div",{className:"dateLabel__allWasteSquare"}),"ALL")),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__selector-spacing"},n.a.createElement("div",{className:"graph__title"},"MONTH:"),H.map((function(e,a){return n.a.createElement("div",{className:e.show?"active applyMarginRightAndLeft applyPurpleColor":"displayNone",key:a},e.month)})),n.a.createElement("h2",{className:"applyMarginRightAndLeft clickable",onClick:function(){P("NEXT","wastePerCover")}},"NEXT"),n.a.createElement("h2",{className:"clickable",onClick:function(){P("PREV","wastePerCover")}},"PREV")),n.a.createElement("div",{className:"graph__title clickable applyPurpleColor",onClick:function(){g()}},"SEARCH")),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__message"},"(Starts on the first Monday of the Month)"))))))}var qa=Object(r.createContext)(),Ka=function(e){var a=JSON.parse(localStorage.getItem("yearlyArray"))||[],t=JSON.parse(localStorage.getItem("monthlyArr"))||[],s=Object(r.useState)(a),l=Object(o.a)(s,2),c=l[0],i=l[1],d=Object(r.useState)(t),m=Object(o.a)(d,2),u=m[0],p=m[1],g=Object(r.useState)(0),h=Object(o.a)(g,2),b=h[0],v=h[1],y=Object(r.useState)({coverSelector:!1,spoilageSelector:!1,preparationSelector:!1,allSelector:!0}),f=Object(o.a)(y,2),E=f[0],_=f[1],w=Object(r.useState)(0),S=Object(o.a)(w,2),N=S[0],C=S[1],O=Object(r.useState)(0),W=Object(o.a)(O,2),k=W[0],P=W[1],j=Object(r.useState)(0),T=Object(o.a)(j,2),A=T[0],x=T[1],I=Object(r.useState)(0),D=Object(o.a)(I,2),B=D[0],M=D[1],R=Object(r.useState)(0),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)([]),Y=Object(o.a)(V,2),U=Y[0],z=Y[1],G=Object(r.useState)([]),q=Object(o.a)(G,2),K=q[0],J=q[1],Z=Object(r.useState)([]),X=Object(o.a)(Z,2),$=X[0],Q=X[1],ee=Object(r.useState)([]),ae=Object(o.a)(ee,2),te=ae[0],re=ae[1],ne=Object(r.useState)(0),se=Object(o.a)(ne,2),le=se[0],oe=se[1],ce=Object(r.useState)(0),ie=Object(o.a)(ce,2),de=ie[0],me=ie[1],ue=Object(r.useState)(0),pe=Object(o.a)(ue,2),ge=pe[0],he=pe[1],be=Object(r.useState)([]),ve=Object(o.a)(be,2),ye=ve[0],fe=ve[1],Ee=n.a.useState(null),_e=Object(o.a)(Ee,2),we=_e[0],Se=_e[1],Ne=n.a.useState(0),Ce=Object(o.a)(Ne,2),Oe=Ce[0],We=Ce[1],ke=n.a.useState(),Pe=Object(o.a)(ke,2),je=Pe[0],Te=Pe[1],Ae=Object(r.useState)([]),xe=Object(o.a)(Ae,2),Ie=xe[0],De=(xe[1],Object(r.useState)([])),Be=Object(o.a)(De,2),Me=(Be[0],Be[1]),Re=Object(r.useState)([]),Fe=Object(o.a)(Re,2),Le=Fe[0],He=(Fe[1],Object(r.useState)([1,2,3,4,5,6,7,8,9,10])),Ve=Object(o.a)(He,2),Ye=Ve[0],Ue=Ve[1],ze=Object(r.useState)([]),Ge=Object(o.a)(ze,2),qe=Ge[0],Ke=Ge[1],Je=Object(r.useState)([]),Ze=Object(o.a)(Je,2),Xe=Ze[0],$e=Ze[1],Qe=Object(r.useState)([]),ea=Object(o.a)(Qe,2),aa=ea[0],ta=ea[1],ra=Object(r.useState)([]),na=Object(o.a)(ra,2),sa=na[0],la=na[1],oa=Object(r.useState)([]),ca=Object(o.a)(oa,2),ia=ca[0],da=ca[1],ma=Object(r.useState)([]),ua=Object(o.a)(ma,2),pa=ua[0],ga=ua[1],ha=Object(r.useState)([]),ba=Object(o.a)(ha,2),va=ba[0],ya=ba[1],fa=n.a.useState(!0),Ea=Object(o.a)(fa,2),_a=Ea[0],wa=Ea[1];Object(r.useEffect)((function(){if(_({coverSelector:!1,spoilageSelector:!1,preparationSelector:!1,allSelector:!0}),console.log("here props",e),e.wastePerSales.wastePerSalesForAllWaste){$e(Sa(e.wastePerSales.salesInputDataArray)),ta(Sa(e.wastePerSales.salesWasteDataArray)),la(Sa(e.wastePerSales.preparationWasteDataArray)),da(Sa(e.wastePerSales.spoilageWasteDataArray));var a=Sa(e.wastePerSales.totalDailyWasteDataArray);ga(a),ya(a),i(e.yearlyArray),p(e.monthlyArray);var t=e.wastePerSales.wastePerSalesForAllWaste;console.log("props",e),console.log("waste",t);var r=Sa(t);console.log("foodWaste",r),Ue(r);var n=Sa(e.wastePerSales.xAxis,"xaxis");Ke(n);var s=Sa(e.wastePerSales.wastePerSalesForSpoilageWaste),l=Sa(e.wastePerSales.wastePerSalesForPreparationWaste),o=Sa(e.wastePerSales.wastePerSalesForCoverWaste);z(r),J(o),Q(l),re(s),Me(e.wastePerSales.xAxis),C(e.wastePerSales.totalCW),P(e.wastePerSales.totalPW),x(e.wastePerSales.totalSW),M(e.wastePerSales.totalWaste),H(e.wastePerSales.xAxis),he(e.wastePerSales.monthsName),oe(e.wastePerSales.totalSalesInput),fe(e.wastePerSales.wastePerSalesForAllWaste),me(e.wastePerSales.percentageOfInputsAreZeros),Te(e.wastePerSales.siteName)}Se(e.searchErrorForWastePerSales),We(e.selectedYearForWastePerSales)}),[e.wastePerSales,e.searchError,e.monthlyArray,e.yearlyArray,e.siteName]);var Sa=function(e,a){Array.prototype.insert=function(e,a){this.splice(e,0,a)};var t=e;if(void 0!==e)for(var r=7;r<=e.length;r+=8){var n="xaxis"===a?"":null;t.insert(r,n)}return t};return n.a.createElement(qa.Provider,{value:{activeState:E,toggleActive:function(e){switch(e){case"coverSelector":_({coverSelector:!0,spoilageSelector:!1,preparationSelector:!1,allSelector:!1}),Ue(K),ya(aa);break;case"spoilageSelector":_({coverSelector:!1,spoilageSelector:!0,preparationSelector:!1,allSelector:!1}),Ue(te),ya(ia);break;case"preparationSelector":_({coverSelector:!1,spoilageSelector:!1,preparationSelector:!0,allSelector:!1}),Ue($),ya(sa);break;case"allSelector":_({coverSelector:!1,spoilageSelector:!1,preparationSelector:!1,allSelector:!0}),Ue(U),ya(pa)}wa(!1)},yearlyArray:c,montlyArray:u,handleYearly:function(e){var a,t=c.length-1;c.find((function(e){return!0===e.show&&(a=c.indexOf(e)),""})),"NEXT"===e&&a!==t?c.map((function(e){return c.indexOf(e)===a+1?(e.show=!0,""):(e.show=!1,"")})):"PREV"===e&&0!==a&&c.map((function(e){return c.indexOf(e)===a-1?(e.show=!0,""):(e.show=!1,"")})),i(c),v((function(e){return e+1}))},handleMonthly:function(e,a){var t;u.find((function(e){return!0===e.show&&(t=e.index),""})),"NEXT"===e&&12!==t?u.map((function(e){return e.index<=12&&(e.index===t+1?e.show=!0:e.show=!1),""})):"PREV"===e&&1!==t&&u.map((function(e){return e.index<=12&&(e.index===t-1?e.show=!0:e.show=!1),""})),p(u),v((function(e){return e+1}))},count:b,totalCW:N,totalPW:k,totalSW:A,totalWaste:B,xAxis:L,display:ye,totalSalesInputs:le,percentageOfInputsAreZeros:de,monthName:ge,selectedYear:Oe,handleSearch:function(){var a=u.filter((function(e){return e.show})),t=c.filter((function(e){return e.show})),r={monthlyIndex:a[0].index,yearlyIndex:t[0].year};e.handleSearch(r,"wastePerSales")},searchError:we,siteName:je,dates:Ie,datesLabel:Le,foodWaste:Ye,foodWasteXaxis:qe,wasteSteamValue:va,salesInputDataArray:Xe,showTooltip:_a}},e.children)},Ja=500,Za=220;function Xa(e){var a=Object(r.useContext)(le),t=a.allCappingValue,s=a.wastePerSalesCoverWastes,l=a.wastePerSalesSpoilageWastes,c=a.wastePerSalesPrepWastes,i=n.a.useState(!0),d=Object(o.a)(i,2),m=d[0],u=d[1],p=Object(r.useContext)(qa),g=p.totalCW,h=p.count,b=p.totalPW,v=p.totalSW,y=p.totalWaste,f=p.monthName,E=p.selectedYear,_=p.totalSalesInputs,w=p.percentageOfInputsAreZeros,S=p.display,N=p.toggleActive,C=p.activeState,O=p.montlyArray,W=p.yearlyArray,k=p.handleSearch,P=p.searchError,j=p.siteName,T=p.handleMonthly,A=p.wasteSteamValue,x=p.salesInputDataArray,I=p.datesLabel,D=p.foodWaste,B=p.foodWasteXaxis,M=p.showTooltip,R=n.a.useState([]),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)(0),Y=Object(o.a)(V,2),U=Y[0],z=Y[1],G=Object(r.useState)(0),q=Object(o.a)(G,2),K=q[0],J=q[1],Z=Object(r.useState)(0),X=Object(o.a)(Z,2),$=X[0],Q=X[1],ee=Object(r.useState)(0),ae=Object(o.a)(ee,2),te=ae[0],re=ae[1],ne=Object(r.useState)(!1),se=Object(o.a)(ne,2),oe=(se[0],se[1]),ce=n.a.useState(0),ie=Object(o.a)(ce,2),de=ie[0],me=ie[1],ue=n.a.useState(1),pe=Object(o.a)(ue,2),ge=pe[0],he=pe[1],be=Object(r.useState)([]),ve=Object(o.a)(be,2),ye=ve[0],fe=ve[1],_e=Object(r.useState)([]),Se=Object(o.a)(_e,2),Ne=Se[0],We=Se[1];if(Object(r.useEffect)((function(){We(A),fe(x),H(D),z(g),J(b),Q(v),re(y);var a=we(S);he(a),oe(P),me(E),e.wastePerSales&&M?u(!0):u(!1)}),[O,W,h,S,P,E,A,x,I,D,B,e.wastePerSales]),e.showPounds){if(S){var Pe=S.map((function(e){return 2.775*e}));ge=we(Pe)}}else ge=we(S);var je,Te=Ae().width;Te<=700?(Ja=260,Za=65):Te>=1600&&(Ja=700,Za=250);var xe=["rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)","rgb(178, 191, 80)"];return console.log("foodWaste",D),console.log("allCappingValue",t),je=Va(D,t,"wastePerSalesCappingValues",C),console.log("indexes",je),je&&je.targetIndexArray.map((function(e){return xe[e]="rgba(255, 0, 0, 0.9)",""})),n.a.createElement(n.a.Fragment,null,!e.hideReport&&n.a.createElement(n.a.Fragment,null,n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"WASTE per SALES"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){e.setWastePerSales(!e.wastePerSales),Ee("showWastePerSales",!e.wastePerSales)}},e.wastePerSales?"X ":"| | | "))),n.a.createElement(Oe,{open:e.wastePerSales},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"graph__row addSpaceBetween"},n.a.createElement("div",{className:"report-subtitle"},j),n.a.createElement("div",{className:"graph__heading"},"WASTE PER SALES",n.a.createElement("div",{className:"applyMarginRightAndLeft"},e.showPounds?"(\xa3)":"(Kg)"," /Person in ",f," ",de))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__labelWrapper"},n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},de)," ",n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},f)," ",n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},"Total Waste"),n.a.createElement("div",{className:"applyMarginRightAndLeft graph__label"},"C"),n.a.createElement("div",{id:1,key:0},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},U)),n.a.createElement("div",null,"+"),n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},"S"),n.a.createElement("div",{id:2,key:1},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},$)),n.a.createElement("div",null,"+"),n.a.createElement("div",{className:"applyMarginRightAndLeft graph__label"},"P"),n.a.createElement("div",{id:3,key:2},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},K," = ",te)))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__labelWrapper"},n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},de," ",f," Total Monthly Sales"),n.a.createElement("div",{className:"applyBlueTuckGreen"},_))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__labelWrapper"},n.a.createElement("div",{className:"graph__label applyMarginRightAndLeft"},"Do we have Monthly Sales Inputs data in ",f," ",de,"? ",w>50?"NO":"YES"))),n.a.createElement("div",{className:"dashboard__wrapperForSelector"},n.a.createElement("div",{className:"dashboard__selector"},n.a.createElement(Le.a,{open:m,onClose:function(){return u(!1)},title:"click on C, S, P or All waste stream",arrow:!0},n.a.createElement("h2",{className:C.coverSelector?"active":"inactive",id:0,onClick:function(){N("coverSelector")}},"C")),n.a.createElement(Le.a,{open:m,onClose:function(){return u(!1)},arrow:!0},n.a.createElement("h2",{className:C.spoilageSelector?"active":"inactive",id:1,onClick:function(){N("spoilageSelector")}},"S")),n.a.createElement(Le.a,{open:m,onClose:function(){return u(!1)},arrow:!0},n.a.createElement("h2",{className:C.preparationSelector?"active":"inactive",id:2,onClick:function(){N("preparationSelector")}},"P")),n.a.createElement("h2",{className:C.allSelector?"active":"inactive",id:3,onClick:function(){N("allSelector")}},"ALL"))),n.a.createElement("div",{style:{display:"flex",justifyContent:"center"}},n.a.createElement(Ya,{coverWastes:s,spoilageWastes:l,prepWastes:c,showPounds:e.showPounds})),n.a.createElement("div",{className:"dashboard__wrapperForGraph"},n.a.createElement("div",{style:{width:"100%",overflow:"auto"}},n.a.createElement(ke.a,{data:{labels:B,wasteSteamsValue:Ne,inputData:ye,datasets:[{label:"array 1",data:e.showPounds?L.map((function(e){if(e)return(2.775*e).toFixed(2)})):L,backgroundColor:xe,categoryPercentage:1,barPercentage:.5}]},width:Ja,height:Za,options:{responsive:!0,maintainAspectRatio:!0,layout:{padding:{left:25,right:25,top:10,bottom:10}},scales:{xAxes:[{display:!0,gridLines:{display:!1},ticks:{autoSkip:!1,fontSize:7}}],yAxes:[{gridLines:{display:!1},ticks:{maxTicksLimit:4,display:!1,beginAtZero:!0,max:ge}}]},plugins:{datalabels:{display:!0,color:"rgb(47, 64, 30)",anchor:"end",align:"end",clamp:!0,backgroundColor:null,borderColor:null,borderRadius:4,borderWidth:1,font:{size:5,weight:900},offset:4}},tooltips:{enabled:!0,callbacks:{title:function(e,a){return""},label:function(e,a){var t=a.inputData[e.index],r=Fa(a.wasteSteamsValue[e.index])?a.wasteSteamsValue[e.index]:Ra(a.wasteSteamsValue[e.index]);return a.datasets[e.datasetIndex].data[e.index]+"("+r+"/"+t+")"}}}}}))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"dateLabel__wrapper"},n.a.createElement("div",{className:"dateLabel__coverwastesSquare"}),"COVER",n.a.createElement("div",{className:"dateLabel__spoliageSquare"}),"SPOILAGE",n.a.createElement("div",{className:"dateLabel__preparationSquare"}),"PREPARATION",n.a.createElement("div",{className:"dateLabel__allWasteSquare"}),"ALL")),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__selector-spacing"},n.a.createElement("div",{className:"graph__title"},"MONTH:"),O.map((function(e,a){return n.a.createElement("div",{className:e.show?"active applyMarginRightAndLeft applyPurpleColor":"displayNone",key:a},e.month)})),n.a.createElement("h2",{className:"applyMarginRightAndLeft clickable",onClick:function(){T("NEXT")}},"NEXT"),n.a.createElement("h2",{className:"clickable",onClick:function(){T("PREV")}},"PREV")),n.a.createElement("div",{className:"graph__title clickable applyPurpleColor",onClick:function(){k()}},"SEARCH")),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__message"},"(Starts on the first Monday of the Month)"))))))}var $a=Object(r.createContext)(),Qa=function(e){var a=Object(r.useState)([]),t=Object(o.a)(a,2),s=t[0],l=t[1],c=n.a.useState(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=n.a.useState(pe()),p=Object(o.a)(u,2),g=p[0],h=p[1],b=n.a.useState(),v=Object(o.a)(b,2),y=v[0],f=v[1],E=n.a.useState(e.startDate),_=Object(o.a)(E,2),w=_[0],S=_[1];return Object(r.useEffect)((function(){e.companyId&&e.siteName&&function(e,a,t,r,n){return new Promise((function(s,l){x.a.get("wastes","/getWasteOnADayOfTheWeek",{queryStringParameters:{id:e,company:a,site:t,day:r,year:n}}).then((function(e){s(e)})).catch((function(e){l(e)}))}))}(e.companyId,e.companyName,e.siteName,d,g).then((function(a){console.log("data",a),l(a.responseData.wasteOnADayOfTheWeek[0]),f(e.siteName.replace(/[^A-Za-z]+/g,"")),S(e.startDate)}))}),[e.siteName,d,g]),n.a.createElement($a.Provider,{value:{year:g,day:d,setYear:h,setDay:m,siteName:y,wasteOnAdayOfTheWeekData:s,startDate:w}},e.children)},et=t(252),at=t.n(et),tt=t(253),rt=t.n(tt);function nt(){var e=Object(qe.a)(["\n  width: 100%;\n  height: 5px;\n  background-color: grey;\n"]);return nt=function(){return e},e}function st(){var e=Object(qe.a)(["\n  height: ","%;\n  background-color: ",";\n  ",";\n"]);return st=function(){return e},e}function lt(){var e=Object(qe.a)(["\n  /* width: 23px; */\n  width: 30px;\n  font-size: 0.7rem;\n  text-align: center;\n  color: ",";\n"]);return lt=function(){return e},e}function ot(){var e=Object(qe.a)(["\n  margin-top: 10px;\n  /* width: 0.3rem; */\n  width: 0.5rem;\n  &:hover {\n    opacity: 0.8;\n  }\n  @media (max-width: 992px) {\n    width: 0.7rem;\n  }\n  @media (max-width: 768px) {\n    width: 0.3rem;\n  }\n"]);return ot=function(){return e},e}function ct(){var e=Object(qe.a)(["\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n  align-items: center;\n  ","\n"]);return ct=function(){return e},e}function it(){var e=Object(qe.a)(["\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: 220px;\n  overflow: auto;\n\n"]);return it=function(){return e},e}function dt(){var e=Object(qe.a)(["\n  margin: 0px auto;\n  max-width: 500px;\n  height: 500px;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-end;\n"]);return dt=function(){return e},e}Ke.b.div(dt());var mt=Ke.b.div(it()),ut=Ke.b.div(ct(),(function(e){return e.isGap&&"\n    margin-right: 1rem;\n  "})),pt=Object(Ke.a)(ot()),gt=Ke.b.span(lt(),(function(e){return e.color})),ht=Ke.b.div(st(),(function(e){return e.height}),(function(e){return e.color}),pt);Ke.b.div(nt());function bt(e){var a=n.a.useState(!0),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useContext)($a),i=c.year,d=c.day,m=c.setYear,u=c.setDay,p=c.wasteOnAdayOfTheWeekData,g=c.siteName,h=c.startDate,b=Object(r.useState)([]),v=Object(o.a)(b,2),y=v[0],f=v[1];Object(r.useEffect)((function(){var a;p.weeks&&f((a=[],p.weeks.map((function(e){for(var t=1;t<=e;t++)t===e?a.push(1):a.push(0);return""})),a)),e.showWasteOnAdayOfTheWeek?l(!0):l(!1)}),[p,e]);var E=Object(r.useContext)(le).showPounds,_=Object(r.useContext)(le),w=_.dailyCoverWastes,S=_.dailySpoliageWastes,N=_.dailyPeparationWastes,C=0,O=0,W=0;E?(C=ye(2.775*w),O=ye(2.775*S),W=ye(2.775*N)):(C=w>0?w:0,O=S>0?S:0,W=N>0?N:0);var k=n.a.useState("cover"),P=Object(o.a)(k,2),j=P[0],T=P[1],A=n.a.useState(w),x=Object(o.a)(A,2),I=x[0],D=x[1],B=["JAN","FEB","MAR","APR","MAY","JUNE","JULY","AUG","SEP","OCT","NOV","DEC"];return n.a.createElement("div",{className:e.hideReport?"dailyWasteChart displayNone":"dailyWasteChart"},n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"WASTE ON A DAY OF THE WEEK"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){e.setShowWasteOnAdayOfTheWeek(!e.showWasteOnAdayOfTheWeek),Ee("wasteOnAdayOfTheWeek",!e.showWasteOnAdayOfTheWeek)}},e.showWasteOnAdayOfTheWeek?"X ":"| | | "))),n.a.createElement(Oe,{open:e.showWasteOnAdayOfTheWeek},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__reportBackgroundColor addPaddingOfHalveRem":"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement("div",{className:"my-2 graph__row space-between"},n.a.createElement("div",{className:"report-subtitle"},null===g||void 0===g?void 0:g.toLowerCase()),n.a.createElement("div",{className:"graph__heading"},n.a.createElement("div",{className:"year-ele"},"YEAR: ",i),n.a.createElement("img",{className:"arr-btn year-ele",src:at.a,onClick:function(){var e=parseInt(h.split("-")[0]);console.log("startyear: ",e,i,e>i),e<i&&m(i-1)},alt:"prev arrow"}),n.a.createElement("img",{className:"arr-btn year-ele",src:rt.a,onClick:function(){(new Date).getFullYear()>i&&m(i+1)},alt:"next arrow"})),n.a.createElement("b",{className:"capping"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold year-ele"},"Cap"),n.a.createElement("div",{className:"capping__text  year-ele"},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__selectedLabelColor cooperHewittBold":"applyPurpleColor cooperHewittBold"}," ","C")),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},C),n.a.createElement("div",{className:"capping__text  year-ele applyPurpleColor"},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__selectedLabelColor cooperHewittBold":"applyPurpleColor cooperHewittBold"}," ","S")),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},O),n.a.createElement("div",{className:"capping__text  year-ele applyPurpleColor cooperHewittBold"},n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__selectedLabelColor cooperHewittBold":"applyPurpleColor cooperHewittBold"}," ","P")),n.a.createElement("div",{className:e.showDarkTheme?"darkTheme__numberColor":"applyBlueTuckGreen"},W))),n.a.createElement("div",{className:"space-between-center inactive week-box"},n.a.createElement("div",{className:"applyBlueTuckGreen font-bold"},"Waste on a:"),n.a.createElement("div",{className:"weekly__selector"},["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((function(e,a){return n.a.createElement("div",{className:d===(a+1)%7?"week-active font-bold":"week-inactive",key:a,onClick:function(){u((a+1)%7)}},e)}))),n.a.createElement("div",{className:"applyBlueTuckGreen font-bold"},"Each Week")),n.a.createElement("div",{className:"mt-1 dashboard__wrapperForSelector"},n.a.createElement("div",{className:"dashboard__selector"},n.a.createElement(Le.a,{open:s,onClose:function(){return l(!1)},title:"click on C, S, P or All waste stream",arrow:!0},n.a.createElement("h2",{className:"cover"===j?"active":"inactive",id:0,onClick:function(){T("cover"),D(w)}},"C")),n.a.createElement(Le.a,{open:s,onClose:function(){return l(!1)},arrow:!0},n.a.createElement("h2",{className:"spoilage"===j?"active":"inactive",id:1,onClick:function(){T("spoilage"),D(S)}},"S")),n.a.createElement(Le.a,{open:s,onClose:function(){return l(!1)},arrow:!0},n.a.createElement("h2",{className:"preparation"===j?"active":"inactive",id:2,onClick:function(){T("preparation"),D(N)}},"P")),n.a.createElement(Le.a,{open:s,onClose:function(){return l(!1)},arrow:!0},n.a.createElement("h2",{className:"all"===j?"active":"inactive",id:3,onClick:function(){T("all"),D(w+S+N)}},"ALL"))),n.a.createElement("div",{className:"font-bold"},j.charAt(0).toUpperCase()+j.slice(1)," waste shown")),n.a.createElement("div",{className:"graph__row"},n.a.createElement(mt,null,p&&p[j+"Waste"]&&p[j+"Waste"].map((function(e,a){return n.a.createElement(ut,{key:a,isGap:y[a]},n.a.createElement(gt,{color:"rgba(34, 73, 33)"},E?Math.round(2.775*e):e),n.a.createElement(ht,{height:1.3*e,color:E?0===I?Math.round(2.775*e)>=Math.round(2.775*w)?"#e72226":"#a2a42b":Math.round(2.775*e)>=Math.round(2.775*I)?"#e72226":"#a2a42b":0===I?Math.round(e)>=Math.round(w)?"#e72226":"#a2a42b":Math.round(e)>=Math.round(I)?"#e72226":"#a2a42b"}),1===y[a+2]?n.a.createElement(gt,{color:"#0f808c",style:{marginTop:"5px"}},B[function(e){var a=0,t=e;return p.weeks.map((function(e){return(t-=e)>=0&&a++,""})),a}(a)]):n.a.createElement("div",{style:{width:"23px",marginTop:"19px"}}))})))))))}function vt(e){return n.a.createElement("div",{className:"DailySalesVsWasteReport__heading"},n.a.createElement("div",{className:"DailySalesVsWasteReport__label"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},e.site),n.a.createElement("div",{className:"section-title"},e.title),n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},e.date)))}function yt(e){je.a.defaults.global.defaultFontFamily="CooperHewitt-Book";var a=130,t=400;return Ae().width<=700&&(t=260,a=279),Object(r.useEffect)((function(){}),[e.chartData]),n.a.createElement(ke.a,{data:{labels:["1","2","3","4","5","6","7"],datasets:e.chartData},width:t,height:a,options:{responsive:!0,maintainAspectRatio:!0,legend:{display:!0},scales:{xAxes:[{stacked:!0,gridLines:{display:!1},ticks:{fontColor:"rgb(15, 128, 140)"},display:!1}],yAxes:[{stacked:!0,display:!1,gridLines:{display:!1}}]},plugins:{datalabels:{display:!1,anchor:"top",align:"middle",font:{size:9,weight:"bold"}}}}})}var ft=Object(r.createContext)(),Et=function(e){var a=Object(r.useState)([]),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)(""),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)(""),v=Object(o.a)(b,2),y=v[0],f=v[1],E=Object(r.useState)([]),_=Object(o.a)(E,2),w=_[0],S=_[1],N=Object(r.useState)([]),C=Object(o.a)(N,2),O=C[0],W=C[1],k=Object(r.useState)([]),P=Object(o.a)(k,2),j=P[0],T=P[1],A=Object(r.useState)(0),I=Object(o.a)(A,2),D=I[0],B=I[1],M=Object(r.useState)([]),R=Object(o.a)(M,2),F=R[0],L=R[1],H=Object(r.useState)(1),V=Object(o.a)(H,2),Y=V[0],U=V[1];Object(r.useEffect)((function(){if(e.companyId&&e.companyName&&e.siteName){var a=(new Date).getDay(),t=0===a?6:a-1;q(e.companyId,e.companyName,e.siteName,t),function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getTopCausesOfWaste",{queryStringParameters:{companyName:a,id:e,siteID:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))}(e.companyId,e.companyName,e.siteName).then((function(e){S(e.newMenuWaste),z(e.newMenuWaste)}))}}),[e.siteName,e.companyId,e.companyName,e.updateGraph]);var z=function(e){var a=e.map((function(e){return e.menuItems.filter((function(e){return""!==e.itemName}))})).filter((function(e){return 0!==e.length})),t=[];a.map((function(e){return e.map((function(e){return t.push(e.itemName.toLowerCase()),""})),""}));var r=G(t),n=[],s=["rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)","rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)","rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)","rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)","rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)","rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)","rgb(133, 165, 101)","rgb(15, 128, 140)","rgb(140, 112, 140)","rgb(47, 67, 30)","rgb(56, 166, 126)","rgb(106, 217, 123)","rgb(188, 242, 107)","rgb(47, 64, 30)","rgb(68, 89, 46)","rgb(178, 191, 80)"];r.map((function(e,a){var t={label:e,data:[0,0,0,0,0,0,0],fill:!1,backgroundColor:s[a],minBarLength:.3,barPercentage:.7,categoryPercentage:.7};return n.push(t),""})),e.map((function(e,a){return e.menuItems.map((function(e){return n.map((function(t){return t.label===e.itemName.toLowerCase()?(t.data[a]=e.totalWastePerItem,""):""})),""})),""}));var l,o=(new Date).getDay();l=0===o?6:o-1;var c=n.filter((function(e){return e.data[l]>0}));B(l),W(c),T(n)},G=function(e){var a=new Set(e);return Object(ae.a)(a)},q=function(e,a,t,r){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getMenuInput",{queryStringParameters:{companyName:a,companyNumber:e,siteID:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(n){console.log("index",r);var s=r;m(t),h(e),f(a);var o=(Date.prototype.getWeek=function(){var e=new Date(this.valueOf()),a=(this.getDay()+6)%7;e.setDate(e.getDate()-a+3);var t=e.valueOf();return e.setMonth(0,1),4!==e.getDay()&&e.setMonth(0,1+(4-e.getDay()+7)%7),1+Math.ceil((t-e)/6048e5)},(new Date).getWeek());n.map((function(e){var a=e.menuWaste.filter((function(e){return e.weekOfYear===o.toString()})),t=a.map((function(e){return e.Date}));U(t[0]),L(a);var r=a.map((function(e){return e.menuWasteWeek[s]})),n=K(r[0]);return l(n),""}))})).catch((function(e){console.log("err",e)}))},K=function(e){return e.filter((function(e,a){return""!==e.menuItem&&"menu item"!==e.menuItem}))};return n.a.createElement(ft.Provider,{value:{dailyMenuInputs:s,siteName:d,companyName:y,id:g,filterOutEmptyObjects:K,chartData:O,dataFromDB:w,filterDataByDate:function(e){var a=j.filter((function(a){return a.data[e]>0}));W(a),B(e)},index:D,filterMenuItems:function(e){var a=F.map((function(a){return a.menuWasteWeek[e]})),t=K(a[0]);return l(t),""},firstDayOfTheWeek:Y,updateDailySalesVsWasteInput:function(e,a,t,r){q(e,a,t,r)}}},e.children)};function _t(e){var a=Object(r.useContext)(ft),t=a.siteName,s=a.companyName,l=a.id,c=a.chartData,i=a.dataFromDB,d=a.filterDataByDate,m=a.index,u=Object(r.useState)([]),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)([]),v=Object(o.a)(b,2),y=v[0],f=v[1];return Object(r.useEffect)((function(){h(e.weeklyDailyRange),f(e.weeklyDailyLabels)}),[t,s,l,e,c]),n.a.createElement("div",{className:e.hideReport?"dailyWasteChart displayNone":"dailyWasteChart"},n.a.createElement(Ce,null,n.a.createElement("div",{className:"section-title"},"DAILY SALES VS WASTE REPORT"),n.a.createElement("div",{className:"container"},n.a.createElement("span",{onClick:function(){e.setShowDailySalesVsWasteReport(!e.showDailySalesVsWasteReport),Ee("dailySalesVsWasteReport",!e.showDailySalesVsWasteReport)}},e.showDailySalesVsWasteReport?"X ":"| | | "))),n.a.createElement(Oe,{open:e.showDailySalesVsWasteReport},n.a.createElement("div",{className:"originalTheme__reportBackgroundColor addPaddingOfHalveRem"},n.a.createElement(vt,{site:me(t),title:"Daily Sales Vs Waste",date:g}),n.a.createElement("div",{className:"applyBlueTuckGreen cooperHewittBold"},n.a.createElement("h4",null,"Daily Waste")),n.a.createElement("div",{style:{flexDirection:"row",justifyContent:"space-between",display:"flex",padding:"10px",fontSize:"10px",color:"rgb(140, 112, 140)"}},i.map((function(e){return n.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},n.a.createElement("div",{style:{display:"flex"}},"C "," "," ",e.coverWasteMaxDailyValue),n.a.createElement("div",null,"S "," "," ",e.spoilageWasteMaxDailyValue),n.a.createElement("div",null,"P "," "," ",e.preparationWasteMaxDailyValue),n.a.createElement("div",null,"ALL "," "," ",ye(e.coverWasteMaxDailyValue+e.spoilageWasteMaxDailyValue+e.preparationWasteMaxDailyValue)))}))),n.a.createElement("div",{className:"applyBlueTuckGreen cooperHewittBold"},n.a.createElement("h4",null,"Menu Sales")),n.a.createElement(yt,{chartData:c}),n.a.createElement("div",{className:"dailyWasteChart__dateLabel"},y.map((function(e,a){return n.a.createElement("div",{className:m===a?"applyGoldColor":"",key:a,onClick:function(){d(a)}},e)}))),n.a.createElement("div",{className:"graph__row"},n.a.createElement("div",{className:"graph__message"},"Click on the date to see data from that day")))))}var wt=function(){var e=JSON.parse(localStorage.getItem("showTotalWasteChart"))||!1,a=Object(r.useState)(e),t=Object(o.a)(a,2),n=t[0],s=t[1],l=JSON.parse(localStorage.getItem("showFoodWasteTargetSavings"))||!1,c=Object(r.useState)(l),i=Object(o.a)(c,2),d=i[0],m=i[1],g=JSON.parse(localStorage.getItem("showAiPredictions"))||!1,h=Object(r.useState)(g),b=Object(o.a)(h,2),v=b[0],y=b[1],f=JSON.parse(localStorage.getItem("showWastePerCover"))||!1,E=Object(r.useState)(f),_=Object(o.a)(E,2),w=_[0],S=_[1],N=JSON.parse(localStorage.getItem("showWastePerSales"))||!1,C=Object(r.useState)(N),O=Object(o.a)(C,2),W=O[0],k=O[1],P=JSON.parse(localStorage.getItem("showWeeklyTrendChart"))||!1,j=Object(r.useState)(P),T=Object(o.a)(j,2),A=T[0],x=T[1],I=JSON.parse(localStorage.getItem("hourlyChartSwitch"))||!1,D=Object(r.useState)(I),B=Object(o.a)(D,2),M=B[0],R=B[1],F=JSON.parse(localStorage.getItem("dailyChartSwitch"))||!1,L=Object(r.useState)(F),H=Object(o.a)(L,2),V=H[0],Y=H[1],U=JSON.parse(localStorage.getItem("weeklyChartSwitch"))||!1,z=Object(r.useState)(U),G=Object(o.a)(z,2),q=G[0],K=G[1],J=JSON.parse(localStorage.getItem("monthlyChartSwitch"))||!1,Z=Object(r.useState)(J),X=Object(o.a)(Z,2),$=X[0],Q=X[1],ee=JSON.parse(localStorage.getItem("wasteOnAdayOfTheWeek"))||!1,ae=Object(r.useState)(ee),te=Object(o.a)(ae,2),re=te[0],ne=te[1],se=JSON.parse(localStorage.getItem("dailySalesVsWasteReport"))||!1,le=Object(r.useState)(se),oe=Object(o.a)(le,2),ce=oe[0],ie=oe[1],de=JSON.parse(localStorage.getItem("switches"))||{hourlyChartSwitch:!1,dailyChartSwitch:!1,weeklyChartSwitch:!1,monthlyChartSwitch:!1,wastePerSalesSwitch:!1,wastePerCoverSwitch:!1,aiPredictionSwitch:!1,foodWasteTargetSwitch:!1,totalSiteWasteSwitch:!1,weeklyWasteTrendSwitch:!1,wasteOnAdayOfTheWeekSwitch:!1,dailySalesVsWasteReportSwitch:!1},me=Object(r.useState)(de),ue=Object(o.a)(me,2),pe=ue[0],ge=ue[1];return{showHourlyChart:M,showDailyChart:V,showWeeklyChart:q,showMonthlyChart:$,setShowHourlyChart:R,setShowDailyChart:Y,setShowWeeklyChart:K,setShowMonthlyChart:Q,showTotalWasteChart:n,setShowTotalWasteChart:s,foodWasteTargetSavings:d,setFoodWasteTargetSavings:m,aiPredictions:v,setAiPredictions:y,wastePerCover:w,setWastePerCover:S,wastePerSales:W,setWastePerSales:k,showWeeklyTrendChart:A,setShowWeeklyTrendChart:x,showWasteOnAdayOfTheWeek:re,setShowWasteOnAdayOfTheWeek:ne,showDailySalesVsWasteReport:ce,setShowDailySalesVsWasteReport:ie,checked:pe,handleChange:function(e){ge(Object(p.a)({},pe,Object(u.a)({},e.target.name,e.target.checked))),Ee("switches",Object(p.a)({},pe,Object(u.a)({},e.target.name,e.target.checked)))},handleChangeForCheckedAndAccordion:function(e,a){"hourlyChartSwitch"===a?(R(e),Ee("hourlyChartSwitch",e)):"dailyChartSwitch"===a?(Y(e),Ee("dailyChartSwitch",e)):"weeklyChartSwitch"===a?(K(e),Ee("weeklyChartSwitch",e)):"monthlyChartSwitch"===a&&(Q(e),Ee("monthlyChartSwitch",e))}}},St=t(569),Nt=t(570);function Ct(e){var a=n.a.useState(0),t=Object(o.a)(a,2),r=t[0],s=t[1],l=n.a.useState(4),c=Object(o.a)(l,2),i=c[0],d=c[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("header",{className:"dashboard__reportMenu"},n.a.createElement("div",{className:"controller-wrapper"},n.a.createElement("div",{className:"dashboard__reportMenu--positioning"},n.a.createElement(n.a.Fragment,null,"user"!==e.userType&&n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold"},"Settings"),"user"!==e.userType&&n.a.createElement("div",{className:"dashboard__controlledLabel"},n.a.createElement(h.b,{to:"/settings"},"Set Targets")),"user"!==e.userType&&n.a.createElement("div",{className:"dashboard__controlledLabel"},n.a.createElement(h.b,{to:"/capping"},"Add Capping")),"user"!==e.userType&&"admin"!==e.userType?n.a.createElement("div",{className:"dashboard__controlledLabel"},n.a.createElement(h.b,{to:"/signup"},"Add Team member")):null,"greenkodeUser"===e.userType&&n.a.createElement("div",{className:"dashboard__controlledLabel"},n.a.createElement(h.b,{to:"/signupsuperadmin"},"Sign Up Super Admin")),n.a.createElement("div",{className:"dashboard__controlledLabel"},n.a.createElement(h.b,{to:"/InputsList"},"Add Inputs")),n.a.createElement("div",{className:"dashboard__controlledLabel"},n.a.createElement(h.b,{to:"/setDisplays"},"Show Or Hide Reports")),n.a.createElement("div",{onClick:function(){localStorage.clear(),sessionStorage.clear(),window.location.reload(!0)},style:{marginTop:"1rem"}},n.a.createElement("a",{href:""},"Reset Dashboard")))),n.a.createElement("div",{className:"dashboard__reportMenu--positioning marginTop"},n.a.createElement("div",{className:"dashboard__overviewSitesReportTable report-subtitle"},n.a.createElement(G.a,{className:"dashboard__paper"},n.a.createElement(z.a,{className:"dashboard__tableContainer"},n.a.createElement(q.a,{stickyHeader:!0,"aria-label":"sticky table",className:"dashboard__table"},n.a.createElement(K.a,null,n.a.createElement(J.a,null,n.a.createElement(Z.a,{className:"dashboard__tableCell"}),n.a.createElement(Z.a,{className:"dashboard__tableCell"},n.a.createElement("div",{className:"report-subtitle applyMarginRightAndLeft"},"Total CSP Waste")),n.a.createElement(Z.a,{className:"dashboard__tableCell"},n.a.createElement("div",{className:"report-subtitle applyMarginRightAndLeft"},"Monthly CSP Trend")))),n.a.createElement(X.a,null,e.allsites.slice(r*i,r*i+i).map((function(a,t){return n.a.createElement(J.a,{key:t},n.a.createElement(Z.a,{className:"dashboard__tableCell--style"},n.a.createElement("div",{className:"dashboard__radio"},n.a.createElement(St.a,{checked:e.selectedSiteValueID===a.siteName,onChange:e.handleSiteIDchange,value:a.siteName,color:"default",inputProps:{"aria-label":"D"}}),n.a.createElement("div",{className:"dashboard__siteName--color"}," ",a.siteName.replace(/[^A-Za-z]+/g,"").toLowerCase()))),n.a.createElement(Z.a,{className:"dashboard__tableCell--style"},e.showPounds?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"dashboard__tableCell__icon applyMarginRightAndLeft applyCooperHewittBold"},"\xa3"),parseInt((2.775*a.totalWaste).toFixed(0))):n.a.createElement(n.a.Fragment,null,parseInt(a.totalWaste.toFixed(0)),n.a.createElement("span",{className:"dashboard__tableCell__icon applyMarginRightAndLeft applyCooperHewittBold"},"Kg"))),n.a.createElement(Z.a,{className:"dashboard__tableCell--style"},e.showPounds?n.a.createElement(n.a.Fragment,null,parseInt((2.775*a.trends).toFixed(0))):n.a.createElement(n.a.Fragment,null,parseInt(a.trends.toFixed(0)),n.a.createElement("span",{className:"dashboard__tableCell__icon applyMarginRightAndLeft applyCooperHewittBold"},"Kg"))))}))))),n.a.createElement(Nt.a,{rowsPerPageOptions:[2],component:"div",count:e.allsites.length,rowsPerPage:i,page:r,onChangePage:function(e,a){s(a)},onChangeRowsPerPage:function(e){d(+e.target.value),s(0)}})))))))}var Ot=t(42);function Wt(e){var a=wt(),t=a.showHourlyChart,s=a.showDailyChart,l=a.showWeeklyChart,c=a.showMonthlyChart,i=a.setShowHourlyChart,d=a.setShowDailyChart,m=a.setShowWeeklyChart,g=a.setShowMonthlyChart,h=a.showTotalWasteChart,b=a.setShowTotalWasteChart,v=a.foodWasteTargetSavings,y=a.setFoodWasteTargetSavings,f=a.aiPredictions,E=a.setAiPredictions,_=a.wastePerCover,w=a.setWastePerCover,S=a.wastePerSales,N=a.setWastePerSales,C=a.showWeeklyTrendChart,O=a.setShowWeeklyTrendChart,W=a.checked,k=a.handleChangeForCheckedAndAccordion,P=a.showWasteOnAdayOfTheWeek,j=a.setShowWasteOnAdayOfTheWeek,T=a.showDailySalesVsWasteReport,A=a.setShowDailySalesVsWasteReport,x=Object(r.useContext)(te),I=x.handleSiteChange,D=x.selectedValue,B=x.siteName,M=x.companyName,R=x.sitesID,F=x.sites,L=x.startDate,H=x.showPounds,V=x.userType,Y=x.userDetail,U=x.handleSiteIDchange,$=x.selectedSiteValueID,Q=x.companyID,ee=x.weeklyDailyLabels,re=x.weeklyDailyRange,ne={rightColumn:{name:"right-hand-side",items:[{id:"0",type:"companyInfor"},{id:"1",type:"hourlyWaste"},{id:"2",type:"dailyWaste"},{id:"3",type:"weeklyWaste"},{id:"4",type:"weeklyWasteTrend"},{id:"5",type:"monthlyWaste"},{id:"6",type:"totalWaste"},{id:"7",type:"foodWasteTargetSavings"},{id:"8",type:"aiPredictions"},{id:"9",type:"wastePerCover"},{id:"10",type:"salesPerCover"},{id:"11",type:"wasteOnAdayOfTheWeek"},{id:"12",type:"dailySalesVsWaste"}]},leftColumn:{name:"left-hand-side",items:[]}},se=JSON.parse(localStorage.getItem("twoColumns"))||ne,le=Object(r.useState)(se),oe=Object(o.a)(le,2),ce=oe[0],ie=oe[1],de=n.a.useState(0),me=Object(o.a)(de,2),ue=me[0],pe=me[1],he=n.a.useState(4),be=Object(o.a)(he,2),ve=be[0],ye=be[1],fe=function(e,a){pe(a)},_e=function(e){ye(+e.target.value),pe(0)};return n.a.createElement(Ot.a,{onDragEnd:function(e){return function(e,a,t){if(e.destination){var r=e.source,n=e.destination;if(r.droppableId!==n.droppableId){var s,l,c=a[r.droppableId],i=a[n.droppableId],d=Object(ae.a)(c.items),m=Object(ae.a)(i.items),g=d.splice(r.index,1),h=Object(o.a)(g,1)[0];m.splice(n.index,0,h),t(Object(p.a)({},a,(s={},Object(u.a)(s,r.droppableId,Object(p.a)({},c,{items:d})),Object(u.a)(s,n.droppableId,Object(p.a)({},i,{items:m})),s))),Ee("twoColumns",Object(p.a)({},a,(l={},Object(u.a)(l,r.droppableId,Object(p.a)({},c,{items:d})),Object(u.a)(l,n.droppableId,Object(p.a)({},i,{items:m})),l)))}else{var b=a[r.droppableId],v=Object(ae.a)(b.items),y=v.splice(r.index,1),f=Object(o.a)(y,1)[0];v.splice(n.index,0,f),t(Object(p.a)({},a,Object(u.a)({},r.droppableId,Object(p.a)({},b,{items:v})))),Ee("twoColumns",Object(p.a)({},a,Object(u.a)({},r.droppableId,Object(p.a)({},b,{items:v}))))}}}(e,ce,ie)}},n.a.createElement("div",{className:"dashboard"},Object.entries(ce).map((function(e,a){var r,p=Object(o.a)(e,2),x=p[0],I=p[1];return n.a.createElement(Ot.c,(r={droppableId:"dashboard"},Object(u.a)(r,"droppableId",x),Object(u.a)(r,"key",a),r),(function(e){return n.a.createElement("main",Object.assign({className:"dashboard__reportsWrapper"},e.droppableProps,{ref:e.innerRef}),I.items.map((function(e,a){var r=e.id,o=e.type;return n.a.createElement("div",{key:a},"companyInfor"===o&&n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"dashboard__overviewSites--positioning showOnMobile"},n.a.createElement("div",{className:"dashboard__date__user dashboard__userInformationWrapper cooperHewittBold"},n.a.createElement("div",{className:"dashboard__userDateNameAndUserType cooperHewittBold"},Se(),n.a.createElement("div",{className:"dashboard__date__user__type cooperHewittBold"},Y.typeOfUser),n.a.createElement("div",{className:"dashboard__date__user__name cooperHewittBold"},"Welcome back"," ",Y.fullName)),n.a.createElement("div",{className:"dashboard__companyName"},ge(Y.companyname)))),n.a.createElement("div",{className:"dashboard__overviewSitesReportTable report-subtitle showOnMobile"},n.a.createElement("div",{className:"report-subtitle"},"Sites"),n.a.createElement(G.a,{className:"dashboard__paper"},n.a.createElement(z.a,{className:"dashboard__tableContainer"},n.a.createElement(q.a,{stickyHeader:!0,"aria-label":"sticky table",className:"dashboard__table"},n.a.createElement(K.a,null,n.a.createElement(J.a,null,n.a.createElement(Z.a,{className:"dashboard__tableCell"}),n.a.createElement(Z.a,{className:"dashboard__tableCell"},n.a.createElement("div",{className:"report-subtitle"},"TOTAL CSP WASTE")),n.a.createElement(Z.a,{className:"dashboard__tableCell"},n.a.createElement("div",{className:"report-subtitle"},"MONTHLY CSP TREND")))),n.a.createElement(X.a,null,F.slice(ue*ve,ue*ve+ve).map((function(e,a){return n.a.createElement(J.a,{key:a},n.a.createElement(Z.a,{className:"dashboard__tableCell--style"},n.a.createElement("div",{className:"dashboard__radio"},n.a.createElement(St.a,{checked:$===e.siteName,onChange:U,value:e.siteName,color:"default",inputProps:{"aria-label":"D"}}),n.a.createElement("div",{className:"dashboard__siteName--color"}," ",e.siteName.replace(/[^A-Za-z]+/g,"").toLowerCase()))),n.a.createElement(Z.a,{className:"dashboard__tableCell--style"},H?n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"dashboard__tableCell__icon applyMarginRightAndLeft applyCooperHewittBold"},"\xa3"),parseInt((2.775*e.totalWaste).toFixed(0))):n.a.createElement(n.a.Fragment,null,parseInt(e.totalWaste.toFixed(0)),n.a.createElement("span",{className:"dashboard__tableCell__icon applyMarginRightAndLeft applyCooperHewittBold"},"Kg"))),n.a.createElement(Z.a,{className:"dashboard__tableCell--style"},H?n.a.createElement(n.a.Fragment,null,parseInt((2.775*e.trends).toFixed(0))):n.a.createElement(n.a.Fragment,null,parseInt(e.trends.toFixed(0)),n.a.createElement("span",{className:"dashboard__tableCell__icon applyMarginRightAndLeft applyCooperHewittBold"},"Kg"))))}))))),n.a.createElement(Nt.a,{rowsPerPageOptions:[2],component:"div",count:F.length,rowsPerPage:ve,page:ue,onChangePage:fe,onChangeRowsPerPage:_e})))),"totalWaste"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(We,{startDate:L,showPounds:H,showTotalWasteChart:h,setShowTotalWasteChart:b,hideReport:W.totalSiteWasteSwitch}))})),"hourlyWaste"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(He,{siteName:B,showPounds:H,showHourlyChart:t,setShowHourlyChart:i,handleChangeForCheckedAndAccordion:k,hideReport:W.hourlyChartSwitch}))})),"dailyWaste"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(Fe,{siteName:B,showPounds:H,showDailyChart:s,setShowDailyChart:d,handleChangeForCheckedAndAccordion:k,hideReport:W.dailyChartSwitch}))})),"weeklyWaste"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement("div",{className:"dashboard__weeklyWasteReportWrapper"},n.a.createElement(Ue,{showPounds:H,showWeeklyChart:l,setShowWeeklyChart:m,handleChangeForCheckedAndAccordion:k,hideReport:W.weeklyChartSwitch})))})),"weeklyWasteTrend"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement("div",{className:"weeklyWasteTrend__reportWrapper"},n.a.createElement(da,{siteName:B,showPounds:H,showWeeklyTrendChart:C,setShowWeeklyTrendChart:O,handleChangeForCheckedAndAccordion:k,hideReport:W.weeklyWasteTrendSwitch})))})),"monthlyWaste"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(pa,{siteName:B,showPounds:H,showMonthlyChart:c,setShowMonthlyChart:g,handleChangeForCheckedAndAccordion:k,hideReport:W.monthlyChartSwitch}))})),"aiPredictions"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("div",Object.assign({className:"dashboard__aiPredictionsReport marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(Ca,{aiPredictions:f,setAiPredictions:E,showPounds:H,hideReport:W.aiPredictionSwitch}))})),"foodWasteTargetSavings"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("div",Object.assign({className:"dashboard__foodWasteTrackingProgress marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(Da,{foodWasteTargetSavings:v,setFoodWasteTargetSavings:y,hideReport:W.foodWasteTargetSwitch}))})),"wastePerCover"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("div",Object.assign({className:"dashboard__draggableReport marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(Ga,{wastePerCover:_,setWastePerCover:w,showPounds:H,hideReport:W.wastePerCoverSwitch,siteName:B}))})),"salesPerCover"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("div",Object.assign({className:"dashboard__draggableReport marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(Xa,{wastePerSales:S,setWastePerSales:N,showPounds:H,hideReport:W.wastePerSalesSwitch,siteName:B}))})),"wasteOnAdayOfTheWeek"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(bt,{siteName:B,showPounds:H,showWasteOnAdayOfTheWeek:P,setShowWasteOnAdayOfTheWeek:j,hideReport:W.wasteOnAdayOfTheWeekSwitch}))})),"dailySalesVsWaste"===o&&n.a.createElement(Ot.b,{draggableId:r,index:a},(function(e){return n.a.createElement("section",Object.assign({className:"dashboard__report marginBottomBy1rem"},e.draggableProps,e.dragHandleProps,{ref:e.innerRef}),n.a.createElement(_t,{siteName:B,showPounds:H,showDailySalesVsWasteReport:T,setShowDailySalesVsWasteReport:A,hideReport:W.dailySalesVsWasteReportSwitch,weeklyDailyLabels:ee,weeklyDailyRange:re}))})))})),e.placeholder)}))})),n.a.createElement(Ct,{checked:W,showHourlyChart:t,setShowHourlyChart:i,sitesID:R,handleSiteChange:I,selectedValue:D,allsites:F,showPounds:H,companyName:M,userType:V,handleSiteIDchange:U,selectedSiteValueID:$,companyID:Q})))}function kt(e){var a=Object(r.useState)([]),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)([]),i=Object(o.a)(c,2),d=i[0],m=i[1];return Object(r.useEffect)((function(){l(e.match.params.companyName),m(e.match.params.id)}),[e.match.params.id]),console.log("companyName",s),console.log("companyId",d),n.a.createElement("div",null,n.a.createElement("h1",null,"Public live feed"))}function Pt(e){return Object(r.useEffect)((function(){}),[]),console.log("props.match.params.id",e.match.params.id),n.a.createElement("div",null,n.a.createElement("h1",null,"Kitchen live feed"))}var jt=t(139);function Tt(e){var a=e.component,t=e.appProps,r=Object(jt.a)(e,["component","appProps"]);return n.a.createElement(c.b,Object.assign({},r,{render:function(e){return t.isAuthenticated?n.a.createElement(a,Object.assign({},e,t)):n.a.createElement(c.a,{to:"/"})}}))}function At(e){var a=e.component,t=e.appProps,r=Object(jt.a)(e,["component","appProps"]);return n.a.createElement(c.b,Object.assign({},r,{render:function(e){return t.isAuthenticated?"greenkodeUser"===t.userType?n.a.createElement(c.a,{to:"/CompanySelector"}):n.a.createElement(c.a,{to:"/dashboard"}):n.a.createElement(a,Object.assign({},e,t))}}))}var xt=t(565),It=t(564),Dt=t(577),Bt=[{value:0,label:"none"},{value:.1,label:"10%"},{value:.2,label:"20%"},{value:.3,label:"30%"},{value:.4,label:"40%"},{value:.5,label:"50%"}],Mt=Object(k.a)((function(e){return{root:{"& .MuiTextField-root":{margin:e.spacing(1),width:"25ch",height:"10vh"}}}}));function Rt(e){var a=Mt();if(0===e.steps)return n.a.createElement("form",{className:a.root,noValidate:!0,autoComplete:"off"},n.a.createElement("div",null,n.a.createElement(Dt.a,{select:!0,label:"% Savings",value:e.savingPercentage,name:"savings",onChange:e.handleChange,SelectProps:{native:!0},helperText:"Please select your % savings"},Bt.map((function(e){return n.a.createElement("option",{key:e.value,value:e.value},e.label)})))))}var Ft="50%",Lt=Object(k.a)((function(e){return{root:{width:Ft,fontSize:"10"},button:{marginRight:e.spacing(1)},instructions:{marginTop:e.spacing(1),marginBottom:e.spacing(1)}}}));function Ht(e){Ae().width<=700&&(Ft="100%");var a=Lt(),t=n.a.useState(0),r=Object(o.a)(t,2),s=r[0],l=r[1],c=["What sector do you work in"];return n.a.createElement("div",{className:a.root},n.a.createElement("div",null,s===c.length?n.a.createElement("div",{className:"completedForm"},n.a.createElement(It.a,{className:a.instructions},n.a.createElement("div",{className:"target__calculatorResults--styling"},n.a.createElement("div",null,"Please see results below"))),n.a.createElement(xt.a,{onClick:function(){l(0)},className:a.button},"Reset")):n.a.createElement("div",null,n.a.createElement(It.a,{className:a.instructions},function(e){switch(e){case 0:return"Find out how much you could save by setting a target - the results will show you \xa3 and carbon savings";default:return"Unknown step"}}(s)),n.a.createElement(Rt,{steps:s,handleChange:function(a){var t=a.target,r=t.value,n=t.name;e.handleChange(n,r)},poundsKGconverter:e.poundsKGconverter,savingPercentage:e.savingPercentage}),n.a.createElement("div",null,n.a.createElement(xt.a,{disabled:0===s,onClick:function(){l((function(e){return e-1})),e.checkActiveStep(s)},className:a.button},"Back"),n.a.createElement(xt.a,{variant:"contained",color:"primary",onClick:function(){l((function(e){return e+1})),e.checkActiveStep(s)},className:a.button},s===c.length-1?"SAVE":"Next")))))}function Vt(e){var a=Object(r.useContext)(ma),t=a.currentMonthCoverWasteArray,s=a.currentMonthPrepWasteArray,l=a.currentMonthSpoilageWasteArray,c=Object(r.useState)(0),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)(0),p=Object(o.a)(u,2),g=p[0],h=p[1],b=Object(r.useState)(0),v=Object(o.a)(b,2),y=v[0],f=v[1],E=Object(r.useState)(0),_=Object(o.a)(E,2),w=_[0],S=_[1],N=Object(r.useState)(0),C=Object(o.a)(N,2),O=C[0],W=C[1],k=Object(r.useState)(0),P=Object(o.a)(k,2),j=P[0],T=P[1],A=Object(r.useState)(0),I=Object(o.a)(A,2),D=I[0],B=I[1],M=Object(r.useState)(0),R=Object(o.a)(M,2),F=R[0],L=R[1],H=Object(r.useState)(0),V=Object(o.a)(H,2),Y=V[0],U=V[1],z=Object(r.useState)(0),G=Object(o.a)(z,2),q=G[0],K=G[1],J=Object(r.useState)(0),Z=Object(o.a)(J,2),X=Z[0],$=Z[1],Q=n.a.useState(2.775),ee=Object(o.a)(Q,2),ae=ee[0],te=ee[1],re=n.a.useState(JSON.parse(localStorage.getItem("targets"))||0),ne=Object(o.a)(re,2),se=ne[0],le=ne[1],oe=Object(r.useState)(null),ce=Object(o.a)(oe,2),ie=ce[0],de=ce[1],me=Object(r.useState)(null),ue=Object(o.a)(me,2),pe=ue[0],ge=ue[1];Object(r.useEffect)((function(){e.recommendedTargets.map((function(e){return m(e.recommendedTargets.targets.percentSavingsInAday),h(e.recommendedTargets.targets.percentSavingsInAweek),f(e.recommendedTargets.targets.percentSavingsInAmonth),S(e.recommendedTargets.targets.percentSavingsInAyear),U(e.recommendedTargets.targets.coverBreakDown),K(e.recommendedTargets.targets.prepBreakDown),$(e.recommendedTargets.targets.spoilageBreakDown),ge(e.recommendedTargets.targets.recommendTarget),L(e.recommendedTargets.targets.totalPercentagedSavingsTotal),B(e.recommendedTargets.targets.totalCSPforPreviousMonth),W(e.recommendedTargets.targets.yearlyKilosOfCO2saved),T(e.recommendedTargets.targets.yearlyMealsSaved),""}))}),[e.companyID,e.companyName,e.selectedSiteValueID,e.recommendedTargets]);var he=function(a){var r,n,o,c=be(),i=5,d=0,u=0,p=0,g=0;(i=0===c?11:c-1)<11?(d=t[i],u=s[i],p=l[i],g=parseInt(d+u+p)):(r=e.companyID,n=e.companyName,o=e.selectedSiteValueID,new Promise((function(e,a){x.a.get("wastes","/getLastYearMonthlyWaste",{queryStringParameters:{companyName:n,companyNumber:r,siteID:o}}).then((function(a){e(a)})).catch((function(e){a(e)}))}))).then((function(e){d=e[0].monthlyValue.monthly.coverWaste[11],u=e[0].monthlyValue.monthly.preparationWaste[11],p=e[0].monthlyValue.monthly.spoilageWaste[11],g=parseInt(d+u+p)})),console.log("previous coverWaste",d),console.log("previous preparationWaste",u),console.log("previous spoilageWaste",p),console.log("previous totalCSPforPreviousMonth",g),console.log("this is the percentaged selected on the form percentaged",a),B(g);var b=ye(d*parseFloat(a)),v=ye(u*parseFloat(a)),y=ye(p*parseFloat(a));console.log("The calculation is monthly cover waste x percentages of savings",b),console.log("The calculation is monthly prep waste x percentages of savings",v),console.log("The calculation is monthly spoilage waste x percentages of savings",y),L(b+v+y),console.log("Add all calculations up to get total CSP percentages saving",b+v+y),U(d-b),K(u-v),$(p-y);var E=parseInt((b+v+y)*ae),_=parseInt(12*E),w=parseInt(E/4),N=parseInt(E/30);f(E),S(_),h(w),m(N);var C=(b+v+y)*parseFloat(e.carbonMunicipalValue),O=(b+v+y)/.36,k=parseFloat(b+v+y),P=parseInt(d-b),j=parseInt(p-y),A=parseInt(u-v),I=parseInt(12*C),D=parseInt(12*O);W(I),T(D);var M=parseInt(g-k),R=(k/g*100).toFixed(0);ge(M);var F={percentSavingsInAday:N,percentSavingsInAweek:w,percentSavingsInAmonth:E,percentSavingsInAyear:_,yearlyKilosOfCO2saved:I,yearlyMealsSaved:D,percents:R,recommendTarget:M,totalCSPforPreviousMonth:g,totalPercentagedSavingsTotal:k,coverBreakDown:P,spoilageBreakDown:j,prepBreakDown:A};console.log("values",F),de(F)},ve=function(){var a={targets:ie,companyname:e.companyName,siteID:e.selectedSiteValueID,companyId:e.companyID};console.log("data",a),function(e){return new Promise((function(a,t){x.a.put("wastes","/updateRecommendedTargets",{body:e}).then((function(e){a(e)})).catch((function(e){console.log("error",e),t(e)}))}))}(a).then((function(){console.log("props",e),e.updateValues("TARGETS")}))};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"dashboard settings"},n.a.createElement("div",{className:"settings--wrapper"},n.a.createElement("div",{className:"settings--title"},"CALCULATE FOOD WASTE SAVINGS"),n.a.createElement("div",{className:"settings--subHeading"},"See the potential impact on your bottom line"),n.a.createElement(Ht,{handleChange:function(e,a){"sectors"===e?te(a):"savings"===e&&(le(a),he(a))},checkActiveStep:function(e){0===e&&null!==ie&&ve()},poundsKGconverter:ae,savingPercentage:se}),n.a.createElement("div",{className:"settings--current--targets"},n.a.createElement("div",{className:"settings--wrapper"},n.a.createElement("div",{className:"settings--title"},"RECOMMENDED TARGETS FOR CSP WASTE"),n.a.createElement("div",{className:"settings--subHeading marginBottom"},"Yearly, monthly, weekly and daily targets"),n.a.createElement("div",{className:"target__calculatorResults--styling"},n.a.createElement("div",{className:"displayFlex"},"Potential savings could be \xa3 ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},ye(d))," daily"),n.a.createElement("div",{className:"displayFlex"},"Potential savings could be \xa3 ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},ye(g))," in a week"),n.a.createElement("div",{className:"displayFlex"},"Potential savings could be \xa3 ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},ye(y))," in a month"),n.a.createElement("div",{className:"displayFlex"},"Potential savings could be \xa3 ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},ye(w))," in a year"),n.a.createElement("br",null),n.a.createElement("div",{className:"displayFlex"},"Equivalent of ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},O)," KG of CO2 saved in a year"),n.a.createElement("div",{className:"displayFlex"},"Equivalent of ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},j)," number of meals saved in a year"),n.a.createElement("br",null),n.a.createElement("div",{className:"displayFlex settings__recommendedTargets"},n.a.createElement("div",{className:"settings__recommendedTargets__text"},"Recommended target of",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"}," ",isNaN(F/D)?0:ye(F/D*100)," "),"% MONTHLY CSP WASTE :"),n.a.createElement("div",{className:"displayFlex"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},pe)," ","KG",n.a.createElement("br",null),n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},fe(D))," ","- ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},fe(F))," (percentaged savings)"," ")),n.a.createElement("br",null),n.a.createElement("div",{className:"displayFlex"},n.a.createElement("div",{className:"settings__recommendedTargets__exampleBreakDown"},"Example breakdown"," ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},fe(Y)),"(cover)",n.a.createElement("div",null,"+")," ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},fe(X)),"(spoilage)",n.a.createElement("div",null,"+")," ",n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold applyMarginRightAndLeft"},fe(q)),"(preparation)"))))))))}function Yt(e){var a=Object(r.useContext)(le).allCappingValue,t=Object(r.useState)([{id:0,value:0,label:"totalCoverWastes",type:"C"},{id:1,value:0,label:"totalSpoilageWastes",type:"S"},{id:2,value:0,label:"totalPreparationWastes",type:"P"}]),s=Object(o.a)(t,2),l=s[0],c=s[1],i=Object(r.useState)([{id:0,value:0,label:"monthlyCoverWastes",type:"C"},{id:1,value:0,label:"monthlySpoilageWastes",type:"S"},{id:2,value:0,label:"monthlyPreparationWastes",type:"P"}]),d=Object(o.a)(i,2),m=d[0],u=d[1],p=Object(r.useState)([{id:0,value:0,label:"weeklyCoverWastes",type:"C"},{id:1,value:0,label:"weeklySpoilageWastes",type:"S"},{id:2,value:0,label:"weeklyPreparationWastes",type:"P"}]),g=Object(o.a)(p,2),h=g[0],b=g[1],v=Object(r.useState)([{id:0,value:0,label:"dailyCoverWastes",type:"C"},{id:1,value:0,label:"dailySpoilageWastes",type:"S"},{id:2,value:0,label:"dailyPreparationWastes",type:"P"}]),y=Object(o.a)(v,2),f=y[0],E=y[1],_=Object(r.useState)([{id:0,value:0,label:"hourlyCoverWastes",type:"C"},{id:1,value:0,label:"hourlySpoilageWastes",type:"S"},{id:2,value:0,label:"hourlyPreparationWastes",type:"P"}]),w=Object(o.a)(_,2),S=w[0],N=w[1],C=Object(r.useState)([{id:0,value:0,label:"wastePerCoverCoverWastes",type:"C"},{id:1,value:0,label:"wastePerCoverSpoilageWastes",type:"S"},{id:2,value:0,label:"wastePerCoverPreparationWastes",type:"P"}]),O=Object(o.a)(C,2),W=O[0],k=O[1],P=Object(r.useState)([{id:0,value:0,label:"wastePerSalesCoverWastes",type:"C"},{id:1,value:0,label:"wastePerSalesSpoilageWastes",type:"S"},{id:2,value:0,label:"wastePerSalesPreparationWastes",type:"P"}]),j=Object(o.a)(P,2),T=j[0],A=j[1],I=Object(r.useState)(""),D=Object(o.a)(I,2),B=D[0],M=D[1],R=Object(r.useState)(""),F=Object(o.a)(R,2),L=F[0],H=F[1],V=Object(r.useState)(""),Y=Object(o.a)(V,2),U=Y[0],G=Y[1],J=Object(r.useState)(!1),Z=Object(o.a)(J,2),$=Z[0],Q=Z[1];Object(r.useEffect)((function(){M(e.companyName),H(e.companyID),G(e.selectedSiteValueID),a&&(k(a.wastePerCoverCappingValues),A(a.wastePerSalesCappingValues),c(a.totalCappingValues),u(a.monthlyCappingValues),b(a.weeklyCappingValues),E(a.dailyCappingValues),N(a.hourlyCappingValues))}),[e]);var ee=function(e){var a=e.target,t=a.name,r=a.value,n=a.id;switch(console.log("name",t),console.log("value",r),console.log("id",n),t){case"totalCoverWastes":var s=ve(r);l[n].value=isNaN(s)?0:s;break;case"totalSpoilageWastes":var o=ve(r);l[n].value=isNaN(o)?0:o;break;case"totalPreparationWastes":var c=ve(r);l[n].value=isNaN(c)?0:c;break;case"monthlyCoverWastes":var i=ve(r);m[n].value=isNaN(i)?0:i;break;case"monthlySpoilageWastes":var d=ve(r);m[n].value=isNaN(d)?0:d;break;case"monthlyPreparationWastes":var u=ve(r);m[n].value=isNaN(u)?0:u;break;case"weeklyCoverWastes":var p=ve(r);h[n].value=isNaN(p)?0:p;break;case"weeklySpoilageWastes":var g=ve(r);h[n].value=isNaN(g)?0:g;break;case"weeklyPreparationWastes":var b=ve(r);h[n].value=isNaN(b)?0:b;break;case"dailyCoverWastes":var v=ve(r);f[n].value=isNaN(v)?0:v;break;case"dailySpoilageWastes":var y=ve(r);f[n].value=isNaN(y)?0:y;break;case"dailyPreparationWastes":var E=ve(r);f[n].value=isNaN(E)?0:E;break;case"hourlyCoverWastes":var _=ve(r);S[n].value=isNaN(_)?0:_;break;case"hourlySpoilageWastes":var w=ve(r);S[n].value=isNaN(w)?0:w;break;case"hourlyPreparationWastes":var N=ve(r);S[n].value=isNaN(N)?0:N;break;case"wastePerCoverCoverWastes":case"wastePerCoverSpoilageWastes":case"wastePerCoverPreparationWastes":W[n].value=isNaN(r)?0:parseFloat(r);break;case"wastePerSalesCoverWastes":case"wastePerSalesSpoilageWastes":case"wastePerSalesPreparationWastes":T[n].value=isNaN(r)?0:parseFloat(r)}};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"capping-wrapper"},n.a.createElement("h2",null,U.replace(/[^A-Za-z]+/g,"").toUpperCase()," Capping (in KG)"),n.a.createElement("form",{onSubmit:function(a){a.preventDefault(),Q(!0),function(e){return new Promise((function(a,t){x.a.put("wastes","/updateCapping",{body:e}).then((function(e){a(e)})).catch((function(e){console.log("error",e),t(e)}))}))}({totalCappingValues:l,monthlyCappingValues:m,weeklyCappingValues:h,dailyCappingValues:f,hourlyCappingValues:S,wastePerCoverCappingValues:W,wastePerSalesCappingValues:T,companyName:B,companyId:L,siteId:U}).then((function(){e.callGetCappingAPI(L,B,U),Q(!1)}))}},n.a.createElement(z.a,{className:"dashboard__tableContainer"},n.a.createElement(q.a,{stickyHeader:!0,"aria-label":"sticky table"},n.a.createElement(K.a,null,n.a.createElement("tr",null,n.a.createElement("th",{className:"userInput__tableCell cooperHewittBold"},"Capping CSP"," "),n.a.createElement("th",{className:"userInput__tableCell"},n.a.createElement("b",{className:"applyPurpleColor"},"C"),"over Waste"," "),n.a.createElement("th",{className:"userInput__tableCell"},n.a.createElement("b",{className:"applyPurpleColor"},"S"),"poilage Waste"),n.a.createElement("th",{className:"userInput__tableCell"},n.a.createElement("b",{className:"applyPurpleColor"},"P"),"reparation"," "," Waste"))),n.a.createElement(X.a,null,n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Total Waste"),l.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling applyMarginRightAndLeft inputBox",InputProps:{disableUnderline:!0},placeholder:e.value.toFixed(2),type:"number",id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-","NaN"].includes(e.key)&&e.preventDefault()}}))}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Monthly Waste ",n.a.createElement("span",null,"(SMS Alerts Available)")," "),m.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling applyMarginRightAndLeft inputBox",placeholder:e.value.toFixed(2),InputProps:{disableUnderline:!0},type:"number",id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}))}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Weekly Waste ",n.a.createElement("span",null,"(SMS Alerts Available)")),h.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling inputBox",placeholder:e.value.toFixed(2),InputProps:{disableUnderline:!0},type:"number",id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}))}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Daily Waste ",n.a.createElement("span",null,"(SMS Alerts Available)")),f.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling inputBox",placeholder:e.value.toFixed(2),InputProps:{disableUnderline:!0},type:"number",id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}))}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Hourly Waste"),S.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling inputBox",placeholder:e.value.toFixed(2),InputProps:{disableUnderline:!0},type:"number",id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}))}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Waste Per Cover (SMS Alerts Available)"),W.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling applyMarginRightAndLeft inputBox",InputProps:{disableUnderline:!0},placeholder:e.value.toFixed(2),id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-","NaN"].includes(e.key)&&e.preventDefault()}}))}))),n.a.createElement("tr",null,n.a.createElement("td",{className:"userInput__tableCell cooperHewittBold"},"Waste Per Sales"),T.map((function(e,a){return n.a.createElement("td",{className:"userInput__tableCell userInput__input cooperHewittBold"},e.type,n.a.createElement("input",{className:"capping__itemStyling applyMarginRightAndLeft inputBox",InputProps:{disableUnderline:!0},placeholder:e.value.toFixed(2),id:a,name:e.label,onChange:ee,onKeyDown:function(e){return["e","E","+","-","NaN"].includes(e.key)&&e.preventDefault()}}))})))))),n.a.createElement("button",{className:"marginTop"},$?"resubmit":"Save Cap"))),n.a.createElement("div",{className:"capping-info"},n.a.createElement("div",null,n.a.createElement("span",{className:"applyPurpleColor cooperHewittBold"},"Daily waste values")," are checked against the daily capping values every day at ",n.a.createElement("span",{className:"applyPurpleColor cooperHewittBold"},"3 pm"),"."),n.a.createElement("div",null,n.a.createElement("span",{className:"applyPurpleColor cooperHewittBold"},"Weekly waste values")," are checked against the weekly capping values every week at ",n.a.createElement("span",{className:"applyPurpleColor cooperHewittBold"},"12 pm")," on a Monday."),n.a.createElement("div",null,n.a.createElement("span",{className:"applyPurpleColor cooperHewittBold"},"Monthly waste values")," are checked against the monthly capping values on the 1st of the Month at ",n.a.createElement("span",{className:"applyPurpleColor cooperHewittBold"},"3 pm"),".")))}var Ut=t(489),zt=t(256),Gt=t.n(zt),qt=(t(479),t(255)),Kt=t.n(qt);function Jt(e){return n.a.createElement("div",{className:"paginationWrapper"},n.a.createElement(Kt.a,{previousLabel:"Previous",nextLabel:"Next",pageCount:e.pageCount,onPageChange:e.onPageChange,containerClassName:"paginationBttns",previousLinkClassName:"previousBttn",nextLinkClassName:"nextBttn",disabledClassName:"paginationDisabled",activeClassName:"paginationActive",initialPage:e.index}))}function Zt(e){var a=Object(r.useContext)(ft),t=a.dailyMenuInputs,s=a.siteName,l=a.companyName,c=a.id,i=a.filterOutEmptyObjects,d=a.filterMenuItems,m=a.firstDayOfTheWeek,u=a.updateDailySalesVsWasteInput,p=a.index,g=Object(r.useState)([]),h=Object(o.a)(g,2),b=h[0],v=h[1],y=Object(r.useState)([]),f=Object(o.a)(y,2),E=f[0],_=f[1],w=Object(r.useState)([]),S=Object(o.a)(w,2),N=S[0],C=S[1],O=Object(r.useState)(!1),W=Object(o.a)(O,2),k=W[0],P=W[1],j=Object(r.useState)(0),T=Object(o.a)(j,2),A=T[0],I=T[1];Object(r.useEffect)((function(){v(t);var e=me(s);if(_(e),0===N.length){var a=ie()().format("MMM DD YYYY");C(a)}P(!1)}),[e,t]);var D=function(a){a.preventDefault();var t=function(e){return ie()(e).format("YYYY-MM-DD")}(N),r=b.map((function(e){return Object.assign(e,{date:t})})),n=i(r);(function(e,a,t,r){var n={siteName:a,companyName:t,id:r};return new Promise((function(a,t){x.a.put("wastes","/addMenuInput",{body:{menuItems:e,companyInformation:n}}).then((function(e){console.log("addmenu items",e),a(e)})).catch((function(e){console.log("error",e),t(e)}))}))})(0===n.length?[{menuItem:"",sales:0,wastePerCent:0,weightPerItem:0,date:t}]:n,s,l,c).then((function(){console.log("pageNumber",A),u(e.companyID,e.companyName,e.selectedSiteValueID,A)})).then((function(){var e=de(m,A);C(e)})),P(!0)},B=function(e,a){var t=b.map((function(t,r){return e===r&&(t[a.target.name]=a.target.value),t}));v(t)};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"DailySalesVsWasteReport applyBlueTuckGreen"},n.a.createElement("div",{className:"DailySalesVsWasteReport__spacing"},n.a.createElement("div",{className:"DailySalesVsWasteReport__heading"},n.a.createElement("div",{className:"DailySalesVsWasteReport__label"},n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},E),n.a.createElement("div",{className:"section-title"},"Top Daily Sales"),n.a.createElement("div",{className:"applyPurpleColor cooperHewittBold"},N)),n.a.createElement("div",null,n.a.createElement(Ut.a,{onClick:function(){b.length<=20&&v([].concat(Object(ae.a)(b),[{weightPerItem:0,menuItem:"menu item",sales:0,wastePerCent:0}]))}},n.a.createElement(Gt.a,null)))),n.a.createElement("div",{className:"DailySalesVsWasteReport__tableLayout"},n.a.createElement("div",null,"Top 10 or 20 sales"),n.a.createElement("div",null,"Sales"),n.a.createElement("div",null,"Weight Kg"),n.a.createElement("div",null,"Waste %"),n.a.createElement("div",null,"(Weight)"),n.a.createElement("div",null,"Waste per sales"),n.a.createElement("div",{style:{marginLeft:"2rem"}})),n.a.createElement("div",{className:"DailySalesVsWasteReport__tableLayout"},n.a.createElement("form",{style:{width:"100%"}},b.map((function(e,a){return n.a.createElement("div",{className:"DailySalesVsWasteReport__inputLayout"},n.a.createElement("div",{style:{display:"flex"}},n.a.createElement("input",{placeholder:e.menuItem,name:"menuItem",onChange:function(e){return B(a,e)},type:"text",onKeyDown:function(e){return["1","2","3","4","5","6","7","8","9","10"].includes(e.key)&&e.preventDefault()}}),n.a.createElement("input",{placeholder:e.sales,name:"sales",onChange:function(e){return B(a,e)},type:"number",onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),n.a.createElement("input",{placeholder:e.weightPerItem,name:"weightPerItem",onChange:function(e){return B(a,e)},type:"number",onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),n.a.createElement("input",{placeholder:e.wastePerCent,name:"wastePerCent",onChange:function(e){return B(a,e)},type:"number",onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}})),n.a.createElement("div",{className:"DailySalesVsWasteReport__autoCalculator"},"( ",function(e,a,t){var r=""===a||void 0===a?0:a,n=""===t||void 0===t?0:t;return(parseFloat(""===e||void 0===e?0:e)*parseFloat(r)*parseFloat(n)/100).toFixed(2)}(e.sales,e.weightPerItem,e.wastePerCent)," ) Kg"),n.a.createElement("div",{className:"DailySalesVsWasteReport__autoCalculator"}," ",function(e,a,t){var r=""===e||void 0===e?0:e,n=""===a||void 0===a?0:a,s=""===t||void 0===t?0:t,l=parseFloat(r)*parseFloat(n)*parseFloat(s)/100;return 0===l&&0===parseFloat(r)?0:(l/parseFloat(r)).toFixed(2)}(e.sales,e.weightPerItem,e.wastePerCent)," "),n.a.createElement("div",{style:{marginLeft:"2rem",fontFamily:"CooperHewitt-Bold",cursor:"pointer"},onClick:function(){return function(e,a){var t=Object(ae.a)(b);t.splice(a,1),v(t)}(0,a)}},"Delete"))})),n.a.createElement("div",{className:"DailySalesVsWasteReport__buttonLayout"},n.a.createElement("button",{onClick:function(e){return D(e)}},k?"Submitted":"Submit")))))),n.a.createElement(Jt,{index:p,onPageChange:function(e){var a=e.selected;I(a),d(a);var t=de(m,a);console.log("newDate",t),C(t)},pageCount:7}))}function Xt(e){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"inputs__list__container"},n.a.createElement("div",{className:"inputs__link-wrapper"},n.a.createElement(h.b,{className:"inputs__link-wrapper-center",to:"/dailySalesVsWasteInputs"},"Add Menu Items"),n.a.createElement(h.b,{className:"inputs__link-wrapper-center",to:"/salesInputs"},"Add Sales Inputs"),n.a.createElement(h.b,{className:"inputs__link-wrapper-center",to:"/coverInputs"},"Add Cover Inputs"))))}var $t=t(566);function Qt(){var e=wt(),a=e.handleChange,t=e.checked,r=Object(k.a)({switchBase:{color:"grey","&$checked":{color:"#81358A"},"&$checked + $track":{backgroundColor:"#81358A"}},checked:{},track:{}})();return n.a.createElement("div",{className:"displaySettings"},n.a.createElement("div",{className:"switchesWrapper"},n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold marginBottomAndTopBy1rem"},"Hourly, Daily, Weekly and Monthly Graphs"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"hourlyChartSwitch",checked:t.hourlyChartSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Hourly Waste Report"))),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"dailyChartSwitch",checked:t.dailyChartSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Daily Waste Report"))),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"wasteOnAdayOfTheWeekSwitch",checked:t.wasteOnAdayOfTheWeekSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Waste On A Day Of The Week"))),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"weeklyChartSwitch",checked:t.weeklyChartSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Weekly Waste Report"))),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"monthlyChartSwitch",checked:t.monthlyChartSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Monthly Waste Report")))),n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold marginBottomAndTopBy1rem"},"Correlated Graphs"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"wastePerSalesSwitch",checked:t.wastePerSalesSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Waste per Sales Report")))),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"wastePerCoverSwitch",checked:t.wastePerCoverSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Waste per Cover Report")))),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"dailySalesVsWasteReportSwitch",checked:t.dailySalesVsWasteReportSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Daily Sales Vs Waste Report")))),n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold marginBottomAndTopBy1rem"},"Food Waste Forecast"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"aiPredictionSwitch",checked:t.aiPredictionSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Ai Prediction Report")))),n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold marginBottomAndTopBy1rem"},"Food Waste Targets"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"foodWasteTargetSwitch",checked:t.foodWasteTargetSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Food Waste Target Report")))),n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold marginBottomAndTopBy1rem"},"Total Food Waste"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"totalSiteWasteSwitch",checked:t.totalSiteWasteSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Total Site Waste Report")))),n.a.createElement("h3",{className:"dashboard__reportMenu--fontSize applyPurpleColor cooperHewittBold marginBottomAndTopBy1rem"},"Food Waste Trends"),n.a.createElement("div",{className:"radio"},n.a.createElement("label",{className:"menuTitle--fontSize"},n.a.createElement("div",null,n.a.createElement($t.a,{focusVisibleClassName:r.focusVisible,disableRipple:!0,size:"small",onChange:a,name:"weeklyWasteTrendSwitch",checked:t.weeklyWasteTrendSwitch,classes:{switchBase:r.switchBase,track:r.track,checked:r.checked}}),n.a.createElement("p",{className:"cooperHewittBold"},"Hide Weekly Waste Trend Report"))))))}var er=t(567);function ar(e){var a=Object(r.useContext)(Me),t=a.thisWeekCoverInputs,s=a.allWeekCoverInput,l=a.selectedSiteValueID,c=a.sendDataToDatabase,i=a.companyName,d=a.companyID,m=a.filterMenuItems,u=Object(W.a)().handleSubmit,p=Object(r.useState)([{day:"Monday",value:0,require:!1,checkBox:!1},{day:"Tuesday",value:0,require:!1,checkBox:!1},{day:"Wednesday",value:0,require:!1,checkBox:!1},{day:"Thursday",value:0,require:!1,checkBox:!1},{day:"Friday",value:0,require:!1,checkBox:!1},{day:"Saturday",value:0,require:!1,checkBox:!1},{day:"Sunday",value:0,require:!1,checkBox:!1}]),g=Object(o.a)(p,2),h=g[0],b=g[1],v=Object(r.useState)(!1),y=Object(o.a)(v,2),f=y[0],E=y[1],_=Object(r.useState)(7),w=Object(o.a)(_,2),S=w[0],N=w[1],C=Object(r.useState)(7),O=Object(o.a)(C,2),k=O[0],P=O[1],j=Object(r.useState)(7),T=Object(o.a)(j,2),A=T[0],x=T[1],I=Object(r.useState)(7),D=Object(o.a)(I,2),B=D[0],M=D[1];Object(r.useEffect)((function(){if(void 0!==t){x(t.Date),M(t.weekOfYear);var e=La(t.Date);P(e),N(s.length);var a=[];t.coversInput.map((function(e,t){return h[t].value=e,h[t].checkBox=!1,a.push(h[t]),""})),void 0!==t.checkBox&&t.checkBox.map((function(e,t){return a[t].checkBox=1===e,""})),b(a)}var r,n=(new Date).getDay();r=0===n?7:n;for(var l=0;l<r;l++)0===h[l].value?(h[l].require=!0,b(Object(ae.a)(h))):(h[l].require=!1,b(Object(ae.a)(h)));E(f)}),[t]);var R=function(e){var a=[];return h.map((function(t){return t.day===e.target.name?(t.value=e.target.value,a.push(t)):a.push(t),""})),b(a),""},F=function(e){var a=[];return h.map((function(t){if(t.day===e.target.name){var r=!t.checkBox;t.checkBox=r,a.push(t)}else a.push(t);return""})),b(a),""};return n.a.createElement("div",{className:"inputs__container"},n.a.createElement("div",{className:"inputs__row"},n.a.createElement("div",{className:"inputs__column"},n.a.createElement("div",{className:"inputs__wrapperForLabels"},n.a.createElement("div",{className:"report-subtitle"},l.replace(/[^A-Za-z]+/g,"").toLowerCase()),n.a.createElement("div",{className:"section-title"},"Input No. of Covers"),n.a.createElement("div",{className:"applyBlueTuckGreen cooperHewittBold"},"WEEK ",k)),n.a.createElement("div",{className:"inputs__wrapper"},n.a.createElement("div",{className:"inputs__labels"},h.map((function(e,a){return n.a.createElement("div",{className:"applyBlueTuckGreen applyCooperHewittBold marginTop",key:a},e.day)}))),n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("h3",{className:"applyBlueTuckGreen applyCooperHewittBold"},"People /  Events"),n.a.createElement("form",{onSubmit:u((function(){E(!0);var a=h.map((function(e){return parseInt(e.value)})),t=h.map((function(e){return e.checkBox?1:0}));c("COVER INPUTS",{companyId:d,companyName:i,siteName:l,covers:a,checkBox:t,firstDateOfTheWeek:A,weekOfYear:B}),e.history.push("/dashboard")}))},h.map((function(e,a){return n.a.createElement("div",{className:"form-group",key:a},n.a.createElement("input",{className:"form-control",type:"number",id:a,name:e.day,onChange:R,value:e.value,required:e.require,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}),n.a.createElement(er.a,{checked:e.checkBox,value:e.checkBox,onChange:F,name:e.day}))})),n.a.createElement("div",{className:"button__wrapper"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},f?"Submitted":"Submit")))))),n.a.createElement(Jt,{index:Ha(),onPageChange:function(e){var a=e.selected;m(a,"cover-inputs")},pageCount:S})))}function tr(e){var a=Object(r.useContext)(Me),t=a.selectedSiteValueID,s=a.thisWeekSalesInputs,l=a.sendDataToDatabase,c=a.companyName,i=a.companyID,d=a.allWeekSalesInput,m=a.filterMenuItems,u=Object(W.a)().handleSubmit,p=Object(r.useState)([{day:"Monday",value:0,require:!1},{day:"Tuesday",value:0,require:!1},{day:"Wednesday",value:0,require:!1},{day:"Thursday",value:0,require:!1},{day:"Friday",value:0,require:!1},{day:"Saturday",value:0,require:!1},{day:"Sunday",value:0,require:!1}]),g=Object(o.a)(p,2),h=g[0],b=g[1],v=Object(r.useState)(!1),y=Object(o.a)(v,2),f=y[0],E=y[1],_=Object(r.useState)(7),w=Object(o.a)(_,2),S=w[0],N=w[1],C=Object(r.useState)(7),O=Object(o.a)(C,2),k=O[0],P=O[1],j=Object(r.useState)(7),T=Object(o.a)(j,2),A=T[0],x=T[1],I=Object(r.useState)(7),D=Object(o.a)(I,2),B=D[0],M=D[1];Object(r.useEffect)((function(){if(console.log("props",e),void 0!==s){x(s.Date),M(s.weekOfYear);var a=La(s.Date);P(a),N(d.length);var t=[];s.salesInput.map((function(e,a){return h[a].value=e,t.push(h[a]),""})),b(t)}var r,n=(new Date).getDay();r=0===n?7:n;for(var l=0;l<r;l++)0===h[l].value?(h[l].require=!0,b(Object(ae.a)(h))):(h[l].require=!1,b(Object(ae.a)(h)));E(e.isSubmitting)}),[e,s]);var R=function(e){var a=[];return h.map((function(t){return t.day===e.target.name?(t.value=e.target.value,a.push(t)):a.push(t),""})),console.log("newArray",a),b(a),""};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"inputs__container"},n.a.createElement("div",{className:"inputs__row"},n.a.createElement("div",{className:"inputs__column"},n.a.createElement("div",{className:"inputs__wrapperForLabels"},n.a.createElement("div",{className:"report-subtitle"},e.selectedSiteValueID.replace(/[^A-Za-z]+/g,"").toLowerCase()),n.a.createElement("div",{className:"section-title"},"Input Daily Sales Food"),n.a.createElement("div",{className:"applyBlueTuckGreen cooperHewittBold"},"WEEK ",k)),n.a.createElement("div",{className:"inputs__wrapper"},n.a.createElement("div",{className:"inputs__labels"},h.map((function(e,a){return n.a.createElement("div",{className:"applyBlueTuckGreen applyCooperHewittBold",key:a},e.day)}))),n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("h3",{className:"applyBlueTuckGreen applyCooperHewittBold"},"Sales"),n.a.createElement("form",{onSubmit:u((function(){E(!0);var a=h.map((function(e){return parseInt(e.value)}));l("SALES INPUTS",{companyId:i,companyName:c,siteName:t,covers:a,firstDateOfTheWeek:A,weekOfYear:B}),e.history.push("/dashboard")}))},h.map((function(e,a){return n.a.createElement("div",{className:"form-group",key:a},n.a.createElement("input",{className:"form-control",type:"number",id:a,name:e.day,onChange:R,value:e.value,required:e.require,onKeyDown:function(e){return["e","E","+","-"].includes(e.key)&&e.preventDefault()}}))})),n.a.createElement("div",{className:"button__wrapper"},n.a.createElement("button",{className:"btn btn-primary",type:"submit"},f?"Submitted":"Submit")))))),n.a.createElement(Jt,{index:Ha(),onPageChange:function(e){var a=e.selected;console.log("sales",h),m(a,"sales-inputs")},pageCount:S}))))}function rr(e){var a=Object(r.useState)({coversInput:[0,0,0,0,0,0,0],Date:"",weekOfYear:""}),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)(""),i=Object(o.a)(c,2),d=i[0],m=i[1],u=Object(r.useState)({salesInput:[0,0,0,0,0,0,0],Date:"",weekOfYear:""}),p=Object(o.a)(u,2),g=p[0],h=p[1];Object(r.useEffect)((function(){l(e.thisWeekCoverInputs[0]),h(e.thisWeekSalesInput[0]),m(e.selectedSiteValueID)}),[]);var b=function(a,t){switch(a){case"COVER INPUTS":V(t).then((function(){e.updateValues("COVER INPUTS")}));break;case"SALES INPUTS":Y(t).then((function(){e.updateValues("SALES INPUTS")}))}};return n.a.createElement("div",{className:"inputs__container"},n.a.createElement("div",{className:"inputs__row"},n.a.createElement("div",{className:"inputs__column"},n.a.createElement(ar,{thisWeekCoverInputs:s,selectedSiteValueID:d,sendDataToDatabase:b,companyID:e.companyID,companyName:e.companyName})),n.a.createElement("div",{className:"inputs__column"},n.a.createElement(tr,{thisWeekSalesInputs:g,selectedSiteValueID:d,sendDataToDatabase:b,companyID:e.companyID,companyName:e.companyName}))))}var nr=Object(k.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}}));function sr(e){var a=nr(),t=Object(r.useState)([]),s=Object(o.a)(t,2),l=s[0],c=s[1];Object(r.useEffect)((function(){new Promise((function(e,a){x.a.get("wastes","/getAllCompaniesBack").then((function(a){console.log("getAllCompaniesBack",a),e(a)})).catch((function(e){a(e)}))})).then((function(e){var a=[];e.Items.map((function(e){return a.push({companyName:e.company,companyID:e.id}),""})),c(a)}))}),[]);var i=function(a,t){var r={companyname:a,email:"",fullName:"",typeOfUser:"superAdmin"};e.saveUserType("superAdmin"),e.getUserDetails(r),e.userHasAuthenticated(!0),e.getAllData(a,"",r,t)};return n.a.createElement("div",{style:{paddingTop:"15rem",margin:"0 20rem",display:"flex",justifyContent:"center",flexDirection:"column"}},n.a.createElement("h2",null,"Select a company you want to load on the dashboard & click submit:"),n.a.createElement(T.a,{className:a.formControl},n.a.createElement(P.a,{id:"demo-simple-select-label"},"Companies"),n.a.createElement(A.a,{labelId:"demo-simple-select-label",id:"demo-simple-select",onChange:function(e){var a=e.target.value.split("_"),t=a[0],r=a[1];i(t,r)}},n.a.createElement(j.a,{value:""},n.a.createElement("em",null,"None")),l.map((function(e){return n.a.createElement(j.a,{value:e.companyName+"_"+e.companyID},e.companyName)})))),n.a.createElement("button",null,n.a.createElement(h.b,{to:"/"},n.a.createElement("h3",null,"submit"))))}function lr(e){var a=e.appProps;return n.a.createElement(c.d,null,n.a.createElement(At,{path:"/forgotpassword",exact:!0,component:Q,appProps:a}),n.a.createElement(Tt,{path:"/dashboard",exact:!0,component:Wt,appProps:a}),n.a.createElement(At,{path:"/",exact:!0,component:O,appProps:a}),n.a.createElement(At,{path:"/publiclivefeed/:companyName/:id",exact:!0,component:kt,appProps:a}),n.a.createElement(Tt,{path:"/kitchenlivefeed/:id",exact:!0,component:Pt,appProps:a}),"greenkodeUser"===a.userType?n.a.createElement(Tt,{path:"/signupsuperadmin",exact:!0,component:ee,appProps:a}):null,"admin"!==a.userType&&"user"!==a.userType?n.a.createElement(Tt,{path:"/signup",exact:!0,component:$,appProps:a}):null,"user"!==a.userType?n.a.createElement(Tt,{path:"/settings",exact:!0,component:Vt,appProps:a}):null,"user"!==a.userType?n.a.createElement(Tt,{path:"/capping",exact:!0,component:Yt,appProps:a}):null,n.a.createElement(Tt,{path:"/inputs",exact:!0,component:rr,appProps:a}),n.a.createElement(Tt,{path:"/coverInputs",exact:!0,component:ar,appProps:a}),n.a.createElement(Tt,{path:"/salesInputs",exact:!0,component:tr,appProps:a}),n.a.createElement(Tt,{path:"/dailySalesVsWasteInputs",exact:!0,component:Zt,appProps:a}),n.a.createElement(Tt,{path:"/inputsList",exact:!0,component:Xt,appProps:a}),n.a.createElement(Tt,{path:"/setDisplays",exact:!0,component:Qt,appProps:a}),n.a.createElement(Tt,{path:"/CompanySelector",exact:!0,component:sr,appProps:a}))}var or=t(571),cr=function(e){var a=n.a.createElement(or.a,{in:e.show,timeout:200,classNames:"slide-in-left",mountOnEnter:!0,unmountOnExit:!0},n.a.createElement("aside",{className:"side-drawer",onClick:e.onClick},e.children));return l.a.createPortal(a,document.getElementById("drawer-hook"))},ir=function(e){return l.a.createPortal(n.a.createElement("div",{className:"backdrop",onClick:e.onClick}),document.getElementById("backdrop-hook"))},dr=t(257),mr=t.n(dr),ur=function(e){var a=Object(r.useState)(!1),t=Object(o.a)(a,2),s=t[0],l=t[1],c=Object(r.useState)({activeObject:{id:2,val:"kilograms",name:"Kg"},objects:[{id:1,val:"pounds",name:"\xa3"},{id:2,val:"Kilograms",name:"Kg"}]}),i=Object(o.a)(c,2),b=i[0],v=i[1];function y(e){return b.objects[e].id===b.activeObject.id?"active":"inactive"}var f=function(){l(!1)};function E(){return(E=Object(m.a)(d.a.mark((function a(){return d.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,g.a.signOut();case 2:e.appProps.userHasAuthenticated(!1);case 3:case"end":return a.stop()}}),a)})))).apply(this,arguments)}var _=n.a.createElement(n.a.Fragment,null," ",e.appProps.isAuthenticated?n.a.createElement("ul",{className:"nav-links"},n.a.createElement("div",{className:"menu"},n.a.createElement("div",{className:"menu__poundsKgWrapper"},n.a.createElement("div",{className:"menu__poundsKgTitle"},"Industry Average (\xa32.775/Kg) converter:"),n.a.createElement("div",{className:"menu__poundsKgIcons"},b.objects.map((function(a,t){var r;return n.a.createElement("li",{className:y(t),id:a.id,onClick:function(){!function(e){v(Object(p.a)({},b,{activeObject:b.objects[e]}))}(t)},key:t},n.a.createElement("div",(r={className:"menu__icon"},Object(u.a)(r,"className","active"===y(t)?"makeBold":"dontMakeBold"),Object(u.a)(r,"id",a.val),Object(u.a)(r,"onClick",e.appProps.kgPoundsConverter),r),a.name))})))),n.a.createElement("div",null,n.a.createElement("li",null,n.a.createElement("div",{className:"logout-button",onClick:function(){return E.apply(this,arguments)}},n.a.createElement("div",{className:"logout__menuName"},"Logout")))))):n.a.createElement("ul",{className:"nav-links"},n.a.createElement("li",null,n.a.createElement("a",{href:"https://greenkode.net/"},n.a.createElement("div",null,"Homepage")))));return n.a.createElement(n.a.Fragment,null,s&&n.a.createElement(ir,{onClick:f}),n.a.createElement(cr,{show:s,onClick:f},n.a.createElement("nav",{className:"main-navigation__drawer-nav"},_)),n.a.createElement("header",{className:"main-header"},n.a.createElement("button",{className:e.showHamburgerButton?"main-navigation__menu-btn":"displayNone",onClick:function(){l(!0)}},n.a.createElement("span",null),n.a.createElement("span",null),n.a.createElement("span",null)),n.a.createElement("div",null,n.a.createElement(h.b,{to:"/dashboard"},n.a.createElement("img",{className:"company-logo",src:mr.a,alt:"logo"})),e.appProps.isAuthenticated&&n.a.createElement("div",{className:"dashboard__overviewSites--positioning hideOnMobile"},n.a.createElement("div",{className:"dashboard__date__user dashboard__userInformationWrapper cooperHewittBold"},n.a.createElement("div",{className:"dashboard__userDateNameAndUserType cooperHewittBold"},Se(),n.a.createElement("div",{className:"dashboard__date__user__type cooperHewittBold"},e.userDetail.typeOfUser),n.a.createElement("div",{className:"dashboard__date__user__name cooperHewittBold"},"Welcome back"," ",e.userDetail.fullName)),n.a.createElement("div",{className:"dashboard__companyName"},ge(e.userDetail.companyname))))),n.a.createElement("nav",{className:"main-navigation__header-nav"}," ",_)))},pr=function(){var e=n.a.useState("greenkodeUser"),a=Object(o.a)(e,2),t=a[0],s=a[1],l=Object(r.useState)(""),c=Object(o.a)(l,2),i=c[0],d=c[1],m=Object(r.useState)(0),u=Object(o.a)(m,2),p=u[0],g=u[1],h=Object(r.useState)(!1),b=Object(o.a)(h,2),v=b[0],y=b[1],f=n.a.useState([]),E=Object(o.a)(f,2),_=E[0],w=E[1];return{saveUserType:function(e){s(e)},getUserDetails:function(e){d(e)},getNoOfUsersCreated:function(e){var a=parseInt(e);g(a)},userType:t,userDetail:i,noOfUsers:p,isAuthenticated:v,userHasAuthenticated:y,saveLoginTime:function(e,a){!function(e,a,t){new Promise((function(r,n){x.a.put("wastes","/updateUsersLoginTime/".concat(a),{body:{userDetails:e,time:t}}).then((function(e){r(e)})).catch((function(e){console.log("error updateUsersLoginTime",e),n(e)}))}))}(e,a,(new Date).toLocaleString("en-GB",{timeZone:"Europe/London"}))},getTheLoginTimeFromUsers:function(e,a){(function(e,a){return new Promise((function(t,r){x.a.get("wastes","/getLoginTimeFromUsers",{queryStringParameters:{companyName:a,companyNumber:e}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))})(e,a).then((function(e){w(e[0].superAdminCreatedUsers)}))},superAdminCreatedUsers:_}},gr=function(){var e=Object(r.useState)(""),a=Object(o.a)(e,2),t=a[0],n=a[1],s=Object(r.useState)(""),l=Object(o.a)(s,2),c=l[0],i=l[1],d=Object(r.useState)(""),m=Object(o.a)(d,2),u=m[0],p=m[1],g=Object(r.useState)(""),h=Object(o.a)(g,2),b=h[0],v=h[1],y=Object(r.useState)(),f=Object(o.a)(y,2),E=f[0],_=f[1],w=Object(r.useState)(),S=Object(o.a)(w,2),N=S[0],C=S[1],O=Object(r.useState)([{year:0,show:!0}]),W=Object(o.a)(O,2),k=W[0],P=W[1],j=Object(r.useState)([{month:"JAN",index:1,show:!1},{month:"FEB",index:2,show:!1},{month:"MAR",index:3,show:!1},{month:"APR",index:4,show:!1},{month:"MAY",index:5,show:!1},{month:"JUN",index:6,show:!1},{month:"JUL",index:7,show:!1},{month:"AUG",index:8,show:!1},{month:"SEP",index:9,show:!1},{month:"OCT",index:10,show:!1},{month:"NOV",index:11,show:!1},{month:"DEC",index:12,show:!1}]),T=Object(o.a)(j,2),A=T[0],x=T[1];return{startDate:t,setStartDate:n,companyID:c,setCompanyID:i,selectedSiteValueID:u,setSelectedValueID:p,companyName:b,setcompanyName:v,getCurrentMonthlyAndYear:function(e){var a=function(e){var a=[],t=ie()(e).format("YYYY"),r=(new Date).getFullYear();if(r===t)a.push({year:t,show:!0});else for(var n=r;n>=t;n--)a.push({year:n,show:n===r});return a.reverse()}(e),t=ue();A.map((function(e){return e.index===parseInt(t)?(e.show=!0,""):(e.show=!1,"")})),x(A),P(a),Ee("yearlyArray",a),Ee("monthlyArr",A)},yearlyArray:k,monthlyArr:A,siteName:E,setSiteName:_,carbonMunicipalValue:N,setCarbonMunicipalValue:C}},hr=function(){var e=N(),a=Object(o.a)(e,3),t=a[0],n=a[1],s=a[2],l=Object(r.useState)([]),c=Object(o.a)(l,2),i=c[0],d=c[1],m=Object(r.useState)(null),u=Object(o.a)(m,2),p=u[0],g=u[1],h=Object(r.useState)(0),b=Object(o.a)(h,2),v=b[0],y=b[1],f=Object(r.useState)(0),E=Object(o.a)(f,2),_=E[0],w=E[1],S=Object(r.useState)([]),C=Object(o.a)(S,2),O=C[0],W=C[1],k=Object(r.useState)(null),P=Object(o.a)(k,2),j=P[0],T=P[1],A=Object(r.useState)(0),I=Object(o.a)(A,2),F=I[0],L=I[1],H=Object(r.useState)(0),V=Object(o.a)(H,2),Y=V[0],U=V[1],z=Object(r.useState)(0),G=Object(o.a)(z,2),q=G[0],K=G[1],J=Object(r.useState)(0),Z=Object(o.a)(J,2),X=Z[0],$=Z[1],Q=Object(r.useState)(0),ee=Object(o.a)(Q,2),ae=ee[0],te=ee[1],re=Object(r.useState)(0),ne=Object(o.a)(re,2),se=ne[0],le=ne[1],oe=Object(r.useState)(0),ce=Object(o.a)(oe,2),de=ce[0],me=ce[1],ue=Object(r.useState)(0),pe=Object(o.a)(ue,2),ge=pe[0],he=pe[1],be=Object(r.useState)(0),ve=Object(o.a)(be,2),ye=ve[0],fe=ve[1],we=Object(r.useState)(0),Se=Object(o.a)(we,2),Ne=Se[0],Ce=Se[1],Oe=Object(r.useState)([0]),We=Object(o.a)(Oe,2),ke=We[0],Pe=We[1],je=Object(r.useState)([]),Te=Object(o.a)(je,2),Ae=Te[0],xe=Te[1],Ie=Object(r.useState)([]),De=Object(o.a)(Ie,2),Be=De[0],Me=De[1],Re=Object(r.useState)(null),Fe=Object(o.a)(Re,2),Le=Fe[0],He=Fe[1],Ve=Object(r.useState)(null),Ye=Object(o.a)(Ve,2),Ue=Ye[0],ze=Ye[1],Ge=Object(r.useState)(null),qe=Object(o.a)(Ge,2),Ke=qe[0],Je=qe[1],Ze=Object(r.useState)([]),Xe=Object(o.a)(Ze,2),$e=Xe[0],Qe=Xe[1],ea=Object(r.useState)([]),aa=Object(o.a)(ea,2),ta=aa[0],ra=aa[1],na=Object(r.useState)(0),sa=Object(o.a)(na,2),la=sa[0],oa=sa[1],ca=Object(r.useState)([]),ia=Object(o.a)(ca,2),da=ia[0],ma=ia[1],ua=Object(r.useState)([]),pa=Object(o.a)(ua,2),ga=pa[0],ha=pa[1],ba=Object(r.useState)([]),va=Object(o.a)(ba,2),ya=va[0],fa=va[1],Ea=Object(r.useState)([]),_a=Object(o.a)(Ea,2),wa=_a[0],Sa=_a[1],Na=Object(r.useState)({salesInput:[0,0,0,0,0,0,0],Date:"",weekOfYear:""}),Ca=Object(o.a)(Na,2),Oa=Ca[0],Wa=Ca[1],ka=Object(r.useState)({salesInput:[0,0,0,0,0,0,0],Date:"",weekOfYear:""}),Pa=Object(o.a)(ka,2),ja=Pa[0],Ta=Pa[1],Aa=Object(r.useState)([]),xa=Object(o.a)(Aa,2),Ia=xa[0],Da=xa[1],Ba=Object(r.useState)([]),Ma=Object(o.a)(Ba,2),Ra=Ma[0],Fa=Ma[1];return{callCoverInput:function(e,a,t){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getCoverInput",{queryStringParameters:{companyName:a,companyNumber:e,siteID:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(e){var a=ie()().format("MM-DD-YYYY"),t=ie()(a,"MMDDYYYY").isoWeek(),r=e[0].weeklyCovers.filter((function(e){return parseInt(e.weekOfYear)===t}));Fa(e[0].weeklyCovers),Wa(r)}))},callSalesInput:function(e,a,t){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getSalesInput",{queryStringParameters:{companyName:a,companyNumber:e,siteID:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(e){var a=ie()().format("MM-DD-YYYY"),t=ie()(a,"MMDDYYYY").isoWeek(),r=e[0].weeklySales.filter((function(e){return parseInt(e.weekOfYear)===t}));Da(e[0].weeklySales),Ta(r)}))},thisWeekCoverInputs:Oa,thisWeekSalesInput:ja,allWeekSalesInput:Ia,allWeekCoverInput:Ra,callDailyAndWeeklyDatesData:function(e,a,t,r){var n,s,l;(n=e,s=a,l=t,new Promise((function(e,a){x.a.get("wastes","/getDailyAndWeeklyDatesData",{queryStringParameters:{companyName:s,companyNumber:n,siteID:l}}).then((function(a){console.log("getDailyAndWeeklyDatesData",a);var t=R(a);e(t)})).catch((function(e){a(e)}))}))).then((function(e){var a=function(e){var a=e.map((function(e){var a=ie()(e,"YYYY-MM-DD"),t=[];return t.push(a.format("dddd").toUpperCase().substr(0,3)+" "+a.format("D")),t}));return a}(e.weeklyData),t=_e(e.weeklyData);fa(a),Sa(t),Ee("dailyChartXaxis",e.weeklyData),Ee("formatedXaxis",a),ma({coverWaste:e.dailyCoverWasteArrayFormated,prepWaste:e.dailyPrepWasteArrayFormated,spoilageWaste:e.dailySpoilageWasteArrayFormated,totalWaste:e.totalDailyWaste,weeklyDates:e.weeklyData});var n=(new Date).getDay(),s=0;s=0===n?6:n-1;var l=r||s;ha({hourlyWaste:e.hourlyWastesWeeklyArray,index:l,date:e.weeklyData[s]})}))},dailyWaste:da,hourlyWaste:ga,callGetCappingAPI:function(e,a,t){var r,n,s;(r=e,n=a,s=t,new Promise((function(e,a){x.a.get("wastes","/getCapping",{queryStringParameters:{id:r,company:n,site:s}}).then((function(a){e(a)})).catch((function(e){a(e)}))}))).then((function(e){oa(e)}))},cappingValue:la,getAiPrediction:function(e,a,t){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getAiPredictionData",{queryStringParameters:{id:e,company:a,site:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(e){ra(e)}))},aiPredictionsData:ta,getTargetsData:function(e,a,t){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getTargets",{queryStringParameters:{id:e,company:a,site:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(e){Qe(e.Items)}))},recommendedTargets:$e,callWeeklyWasteAPI:function(e,a,t){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getWeeklyWasteData",{queryStringParameters:{companyName:a,companyNumber:e,siteID:t}}).then((function(e){console.log("res getWeeklyWaste",e);var a=D(e);r(a)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(e){He(e.currentWeeklyValues),ze(e.weeklyWasteTrend);var a={currentWeek:e.currentWeeklyValues,lastWeek:e.lastWeekWasteValues};Je(a)}))},weeklyWaste:Le,weeklyTrend:Ue,callMonthlyWastesAPI:function(e,a,t){(function(e,a,t){return new Promise((function(r,n){x.a.get("wastes","/getMonthlyWasteData",{queryStringParameters:{companyName:a,companyNumber:e,siteID:t}}).then((function(e){r(e)})).catch((function(e){n(e)}))}))})(e,a,t).then((function(e){U(e.coverWasteInCurrentMonth),K(e.preparationWasteInCurrentMonth),$(e.spoilageWasteInCurrentMonth),te(e.currentMonthCoverWasteArray),le(e.currentMonthPrepWasteArray),me(e.currentMonthSpoilageWasteArray),he(e.coverMonthlyChanges),fe(e.prepMonthlyChanges),Ce(e.spoilageMonthlyChanges),Pe(e.monthlyChanges)})).then((function(){s()}))},coverWasteInCurrentMonth:Y,preparationWasteInCurrentMonth:q,spoilageWasteInCurrentMonth:X,currentMonthCoverWasteArray:ae,currentMonthPrepWasteArray:se,currentMonthSpoilageWasteArray:de,coverMonthlyChanges:ge,prepMonthlyChanges:ye,spoilageMonthlyChanges:Ne,monthlyChanges:ke,callWastePerCover:function(e,a,t,r,n){(function(e,a,t,r,n){return new Promise((function(n,s){x.a.get("wastes","/getWastePerCoverData",{queryStringParameters:{id:e,company:a,site:t,month:r}}).then((function(e){console.log("res",e);var a=B(e);n(a)})).catch((function(e){s(e)}))}))})(e,a,t,r).then((function(e){y(n),s(),console.log("data",e),d(e),g(null)})).catch((function(e){s(),d(null),g(e.message)}))},wastePerCover:i,callWastePerSales:function(e,a,t,r,n){(function(e,a,t,r,n){return new Promise((function(n,s){x.a.get("wastes","/getWastePerSalesData",{queryStringParameters:{id:e,company:a,site:t,month:r}}).then((function(e){var a=B(e);n(a)})).catch((function(e){s(e)}))}))})(e,a,t,r).then((function(e){L(n),s(),console.log("data",e),W(e),T(null)})).catch((function(e){s(),W(null),T(e.message)}))},wastePerSales:O,searchErrorForWastePerSales:j,selectedYearForWastePerSales:F,searchError:p,setSearchError:g,selectedYear:v,setSelectedYear:y,selectedMonth:_,setSelectedMonth:w,getAllSites:function(e,a,t){(function(e,a){return new Promise((function(t,r){x.a.get("wastes","/getAllSitesData",{queryStringParameters:{id:e,companyName:a}}).then((function(e){var a=M(e);t(a)})).catch((function(e){r(e)}))}))})(e,a).then((function(e){var a=e.filter((function(e){return e.siteName===t}));xe(e),Me(a)}))},allSites:Ae,totalWasteFromSelectedSite:Be,spinner:t,showSpinner:n,hideSpinner:s,weeklyDailyLabels:ya,weeklyDailyRange:wa,weeklyWasteValuesForCurrentWeekAndLastWeek:Ke}},br=function(){var e=Object(r.useState)(!1),a=Object(o.a)(e,2),t=a[0],n=a[1];return{showPounds:t,setShowPounds:n,kgPoundsConverter:function(e){var a=e.target.id;n("Kilograms"!==a)}}};var vr=Object(c.g)((function(){var e=n.a.useState(),a=Object(o.a)(e,2),t=a[0],s=a[1],l=pr(),c=l.saveUserType,i=l.getUserDetails,d=l.getNoOfUsersCreated,m=l.userType,u=l.userDetail,p=l.noOfUsers,g=l.isAuthenticated,h=l.userHasAuthenticated,b=l.saveLoginTime,v=l.getTheLoginTimeFromUsers,y=l.superAdminCreatedUsers,f=gr(),E=f.startDate,_=f.setStartDate,w=f.companyID,S=f.setCompanyID,N=f.selectedSiteValueID,C=f.setSelectedValueID,O=f.companyName,W=f.setcompanyName,k=f.getCurrentMonthlyAndYear,P=f.yearlyArray,j=f.monthlyArr,T=f.siteName,A=f.setSiteName,I=f.carbonMunicipalValue,D=f.setCarbonMunicipalValue,B=hr(),M=B.callCoverInput,R=B.callSalesInput,F=B.thisWeekCoverInputs,L=B.thisWeekSalesInput,H=B.allWeekSalesInput,V=B.allWeekCoverInput,Y=B.getTargetsData,U=B.recommendedTargets,z=B.callWastePerCover,G=B.wastePerCover,q=B.searchError,K=B.selectedYear,J=B.setSelectedYear,Z=B.selectedMonth,X=B.setSelectedMonth,$=B.spinner,Q=B.showSpinner,ee=B.callWastePerSales,ae=B.wastePerSales,te=B.searchErrorForWastePerSales,ne=B.selectedYearForWastePerSales,le=B.callMonthlyWastesAPI,ce=B.coverWasteInCurrentMonth,ie=B.preparationWasteInCurrentMonth,de=B.spoilageWasteInCurrentMonth,me=B.currentMonthCoverWasteArray,ge=B.currentMonthPrepWasteArray,he=B.currentMonthSpoilageWasteArray,be=B.coverMonthlyChanges,ve=B.prepMonthlyChanges,ye=B.spoilageMonthlyChanges,fe=B.monthlyChanges,Ee=B.getAllSites,_e=B.allSites,we=B.totalWasteFromSelectedSite,Se=B.callWeeklyWasteAPI,Ne=B.weeklyWaste,Ce=B.weeklyTrend,Oe=B.getAiPrediction,We=B.aiPredictionsData,ke=B.callGetCappingAPI,Pe=B.cappingValue,je=B.callDailyAndWeeklyDatesData,Te=B.dailyWaste,Ae=B.hourlyWaste,xe=B.weeklyDailyLabels,De=B.weeklyDailyRange,Me=B.weeklyWasteValuesForCurrentWeekAndLastWeek,Fe=br(),Le=Fe.showPounds,He=Fe.kgPoundsConverter,Ve=Object(r.useState)(!1),Ue=Object(o.a)(Ve,2),ze=Ue[0],qe=Ue[1],Ke=Object(r.useState)(0),Je=Object(o.a)(Ke,2),Ze=Je[0],Xe=Je[1],$e=Object(r.useState)(0),Qe=Object(o.a)($e,2),ea=Qe[0],aa=Qe[1],ta=function(e,a){var t=e.monthlyIndex,r=e.yearlyIndex;switch(a){case"wastePerCover":X(t),Q(),z(w,O,N,t,r);break;case"wastePerSales":X(t),Q(),ee(w,O,N,t,r)}},ra=function(e){switch(e){case"COVER INPUTS":M(w,O,N),z(w,O,N,Z,K);break;case"SALES INPUTS":R(w,O,N),ee(w,O,N,Z,K);break;case"TARGETS":Y(w,O,N);break;case"UPDATE GRAPH":Xe(Ze+1);break;default:Xe(!0)}};return n.a.createElement(n.a.Fragment,null,$,n.a.createElement("div",{className:"App"},n.a.createElement(Re,{companyId:w,companyName:O,selectedSiteValueID:N,thisWeekCoverInputs:F,thisWeekSalesInput:L,updateValues:ra,allWeekSalesInput:H,allWeekCoverInput:V},n.a.createElement(Et,{siteName:t,companyId:w,companyName:O,updateGraph:Ze},n.a.createElement(Qa,{siteName:t,companyId:w,companyName:O,totalWasteFromSelectedSite:we,startDate:E},n.a.createElement(xa,{aiPredictionsData:We,recommendedTargets:U,currentMonthCoverWasteArray:me,currentMonthPrepWasteArray:ge,currentMonthSpoilageWasteArray:he,carbonMunicipalValue:I},n.a.createElement(oe,{companyName:O,selectedSiteValueID:N,companyID:w,cappingValue:Pe,showPounds:Le},n.a.createElement(ur,{appProps:{isAuthenticated:g,userHasAuthenticated:h,kgPoundsConverter:He},userDetail:u,showHamburgerButton:ze}),n.a.createElement(se,{siteName:T,allSites:_e,totalWasteFromSelectedSite:we},n.a.createElement(Ma,{startDate:E,handleSearch:ta,monthlyArray:j,yearlyArray:P,wastePerCover:G,searchError:q,selectedYear:K,companyId:w,companyName:O},n.a.createElement(Ka,{siteName:t,wastePerSales:ae,monthlyArray:j,yearlyArray:P,handleSearch:ta,searchErrorForWastePerSales:te,selectedYearForWastePerSales:ne},n.a.createElement(re,{siteName:T,companyName:O,sites:_e,startDate:E,showPounds:Le,changeIndex:function(e){aa(e)},userType:m,userDetail:u,handleSiteIDchange:function(e){Q();var a=e.target.value;s(a);var t=a.replace(/[^A-Za-z]+/g,"").toLowerCase();C(a),A(t);var r=ue(),n=pe();k(E),le(w,O,a),Se(w,O,a),z(w,O,a,r,n),ee(w,O,a,r,n),M(w,O,a),R(w,O,a),ke(w,O,a),Ee(w,O,a),je(w,O,a),Y(w,O,a),Oe(w,O,a)},selectedSiteValueID:N,companyID:w,thisWeekCoverInputs:F,weeklyDailyLabels:xe,weeklyDailyRange:De},n.a.createElement(ha,{companyName:O,siteName:T,aiPredictionsData:We},n.a.createElement(Be,{companyName:O,index:ea,hourlyWaste:Ae},n.a.createElement(Ie,{siteName:T,showPounds:Le,dailyWaste:Te},n.a.createElement(Ge,{companyName:O,siteName:T,weeklyWasteValuesForCurrentWeekAndLastWeek:Me,weeklyTrend:Ce},n.a.createElement(Ye,{weeklyWaste:Ne,siteName:T},n.a.createElement(ua,{companyName:O,siteName:T,companyID:w,coverWasteInCurrentMonth:ce,preparationWasteInCurrentMonth:ie,spoilageWasteInCurrentMonth:de,currentMonthCoverWasteArray:me,currentMonthPrepWasteArray:ge,currentMonthSpoilageWasteArray:he,coverMonthlyChanges:be,prepMonthlyChanges:ve,spoilageMonthlyChanges:ye,monthlyChanges:fe},n.a.createElement(lr,{appProps:{siteName:T,getUserDetails:i,isAuthenticated:g,userHasAuthenticated:h,getAllData:function(e,a,t,r){var n;Q(),function(e,a){return new Promise((function(t,r){x.a.get("wastes","/masterTableData",{queryStringParameters:{companyId:a,companyName:e}}).then((function(e){t(e)})).catch((function(e){r(e)}))}))}(e,r).then((function(a){var r=(n=a).companyId,l=n.sites,c=n.startDate,i=n.carbonMunicipalValue;b(t,r),v(r,e),_(c),S(r),W(e),D(i);var d=Object.entries(l).map((function(e){var a=Object(o.a)(e,2),t=a[0];a[1];return t})).reverse();s(d[0]),C(d[0]);var m=ue();X(m);var u=pe();J(u),z(r,e,d[0],m,u),ee(r,e,d[0],m,u),le(r,e,d[0]),Ee(r,e,d[0]),Se(r,e,d[0]),Y(r,e,d[0]),Oe(r,e,d[0]),ke(r,e,d[0]);var p=(new Date).getDay(),g=0===p?6:p-1;je(r,e,d[0],g),M(r,e,d[0]),R(r,e,d[0]),k(n.startDate),qe(!0)})).catch((function(e){console.log("error from master table",e)}))},saveUserType:c,companyName:O,userType:m,getNoOfUsersCreated:d,noOfUsers:p,userDetail:u,companyID:w,superAdminCreatedUsers:y,selectedSiteValueID:N,thisWeekCoverInputs:F,thisWeekSalesInput:L,callGetCappingAPI:ke,recommendedTargets:U,updateValues:ra,startDate:E,carbonMunicipalValue:I}}))))))))))))))))))})),yr={REGION:"us-east-1",BUCKET:"waste-app-uploads"},fr={REGION:"us-east-1",URL:"https://oqt9f6jn82.execute-api.us-east-1.amazonaws.com/prod"},Er={REGION:"us-east-1",USER_POOL_ID:"us-east-1_LYyDatvKz",APP_CLIENT_ID:"31ve7mhg5rpojau8glsoon6mis",IDENTITY_POOL_ID:"us-east-1:792a1c62-e2ae-418b-aba3-ac7a96a6318e"};t(69).default.configure({Auth:{mandatorySignIn:!0,region:Er.REGION,userPoolId:Er.USER_POOL_ID,identityPoolId:Er.IDENTITY_POOL_ID,userPoolWebClientId:Er.APP_CLIENT_ID},Storage:{region:yr.REGION,bucket:yr.BUCKET,identityPoolId:Er.IDENTITY_POOL_ID},API:{endpoints:[{name:"wastes",endpoint:fr.URL,region:fr.REGION}]}}),l.a.render(n.a.createElement(h.a,null,n.a.createElement(vr,null)),document.getElementById("root"))}},[[276,1,2]]]);
//# sourceMappingURL=main.ad31a9fc.chunk.js.map